{"version":3,"sources":["lib/util/random.ts","components/NodeDetail.tsx","lib/pixi/keyboard.ts","lib/util/fpsTracker.ts","lib/pixi/DraggableHelper.ts","lib/util/epsilon_math.ts","lib/util/misc.ts","lib/util/geometry/vector2.ts","lib/util/data_structures/hash.ts","pixi/Chunk.ts","pixi/ZLevel.ts","pixi/Application.ts","components/PixiComponent.tsx","components/QuestProgress.tsx","components/Sidebar.tsx","components/TabContent.tsx","components/Tabs.tsx","contexts.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["INTMAX32","squirrel3","i","n","Math","imul","NodeDetail","focusedNode","useState","history","setHistory","useEffect","chunk","location","x","y","node","slice","map","key","reverse","KeyInfoMap","m","Q","W","E","R","T","Y","U","I","O","P","A","S","D","F","G","H","J","K","L","Z","X","C","V","B","N","M","Up","Down","Left","Right","Shift","Spacebar","Enter","Object","keys","KeyboardState","down","justDown","justUp","_queuedEvents","document","addEventListener","e","keyDown","keyUp","window","clear","this","push","event","isDown","str","length","toUpperCase","formatKeyString","number","keyCode","which","String","fromCharCode","queuedEvent","eventToKey","console","log","FpsTracker","frameTimestampsInTicks","frameTimestampsInTime","ticksSinceLastUpdate","lastFrameTime","logRowsToKeep","Date","getTime","ticksDiff","framesPerTick","timeDiff","framesPerMilli","getFps","toFixed","getUps","DraggableHelper","args","sourceContainer","targetContainer","targetStartingX","targetStartingY","mouseStartingX","mouseStartingY","data","isDragging","onDragStart","startingPosition","getLocalPosition","onDragEnd","onDragMove","localPosition","source","target","interactive","addListener","Util","list","fn","lowestT","lowestValue","item","value","obj","highestT","highestValue","low","high","floor","random","array","sort","a","b","mapObj","re","RegExp","join","replace","matched","toLowerCase","func","timeoutId","waitMilliseconds","options","isImmediate","result","doLater","undefined","apply","shouldCallNow","clearTimeout","setTimeout","d","monthName","getMonth","getDate","getHours","substr","getMinutes","getSeconds","arr","concat","string","intersperse","character","repeat","Vector2","propsOrX","_x","_y","toString","round","p","abs","max","dx","dy","sqrt","newY","about","amount","origin","angle","PI","cos","sin","other","__type","trans","scale","newX","t","error","add","tx","ty","lerp","highX","highY","lowX","lowY","RandRange","hasOwnProperty","JSON","stringify","Zero","One","HashSet","initialValues","_values","HashMap","put","remove","get","values","hash","Chunk","seed","chunkIndex","id","nodes","selectedNodes","allocatedNodes","edges","droppedNodes","CHUNK_HALF_DIM","j","CHUNK_DIM","DROP_NODES_CHANCE","loc","RenderedChunk","onNodeFocus","texture","container","renderedNodes","Pixi","g","anchor","SPACING_PX","hitArea","NODE_HITAREA_PX","tint","allowed","addX","addY","neighbor","alert","selected","addChild","CHUNK_SPACING_PX","NODE_SIZE_PX","NODE_ROUNDED_PX","ZLevel","zIndex","z","chunks","RenderedZLevel","zLevel","renderedChunks","renderedChunk","defaultConfig","originalWindowWidth","originalWindowHeight","onFocusedNodeChange","Application","config","app","stage","fixedCameraStage","actionStage","backdropStage","keyboard","fpsTracker","onResize","originalAppWidth","originalAppHeight","randomSeed","assign","min","width","height","antialias","transparent","resolution","devicePixelRatio","autoDensity","powerPreference","backgroundColor","sortableChildren","ticker","update","delta","tick","resize","curr","appendChild","view","windowWidth","windowHeight","renderer","pivot","screen","textFpsHud","fontFamily","fontSize","text","getFpsString","getUpsString","backdrop","beginFill","drawRect","reticle","lineStyle","drawCircle","drawRoundedRect","generateTexture","NEAREST","zLevelPersistence","chunksContainer","chunkOriginalWidth","chunkOriginalHeight","alpha","removeChild","newZIndex","PixiComponent","useRef","application","setApplication","initializeApplication","newApp","innerWidth","innerHeight","current","drawStart","onresize","ref","onClick","QuestProgress","remainingPoints","Sidebar","children","className","TabContent","showContent","hidden","Tabs","labels","onChange","label","Tab","active","GameContext","React","createContext","UIContext","tabLabels","App","setFocusedNode","batchContents","setBatchContents","activeTab","setActiveTab","uiState","useMemo","game","handleFocusedNodeChange","useCallback","handleActiveTabChange","activeTabIndex","tabViews","Provider","component","Boolean","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.a843bb20.chunk.js","sourcesContent":["import crypto from \"crypto\";\n\n/**\n * NOTE(bowei): we use a hash function that is NOT md5 -\n * Either https://github.com/sublee/squirrel3-python/blob/master/squirrel3.py or https://github.com/svaarala/duktape/blob/master/misc/splitmix64.c works fine and is much faster\n * Reference: https://www.youtube.com/watch?v=e4b--cyXEsM or https://www.youtube.com/watch?v=LWFzPP8ZbdU\n * TODO(bowei): port bigint to wasm for faster 64bit operations\n */\n\nfunction splitmix64(seed: bigint, i: bigint) {\n    let z: bigint = seed + i * BigInt(\"0x9e3779b97f4a7c15\");\n    z = ( z ^ ( z >> BigInt(30) ) ) * BigInt(\"0xBF58476D1CE4E5B9\");\n    z = ( z ^ ( z >> BigInt(27) ) ) * BigInt(0x94D049BB133111EB);\n    return z ^ ( z >> BigInt(31) );\n}\n\nexport const INTMAX32 = 2 ** 32;\nexport function squirrel3(i: number) {\n  let n = (i + INTMAX32) % INTMAX32;\n    n = Math.imul(n, 0xb5297a4d);\n    n ^= n >>> 8;\n    n += 0x68e31da4;\n    n ^= n << 8;\n    n = Math.imul(n, 0x1b56c4e9);\n    n ^= n >>> 8;\n    return (n + INTMAX32) % INTMAX32;\n}\nexport const PRIME32 = 0x3233f2cd; // not used ; useful for hashing integers; a 32 bit prime\n\n/**\n * Md5 is 16 bytes, or max int of 256 ** 16 = 2 ** 128\n */\nexport class HashState {\n  private seed!: Buffer;\n\n  /**\n   * HashState().step(\"foo\") is equivalent to HashState(\"foo\")\n   */\n  constructor(seed?: string) {\n    const buffer = crypto\n      .createHash(\"md5\")\n      .update((seed || \"\").toString())\n      .digest();\n    this.seed = buffer;\n  }\n\n  public peekRandom(): number {\n    const buffer = crypto.createHash(\"md5\").update(this.seed).digest();\n    return Number(this.bufferToBigInt(buffer) % BigInt(2 ** 32)) % 2 ** 32;\n  }\n\n  // increment the seed linearly by 1\n  public step(numSteps: number = 1) {\n    this.seed = this.bigIntToBuffer(this.bufferToBigInt(this.seed) + BigInt(1));\n  }\n\n  public stepSeed(seed: string) {\n    const buffer = crypto.createHash(\"md5\").update(seed.toString()).digest();\n    this.seed = this.bigIntToBuffer(\n      this.bufferToBigInt(this.seed) + this.bufferToBigInt(buffer)\n    );\n  }\n\n  private bigIntToBuffer(b: bigint): Buffer {\n    let buf = Buffer.alloc(16);\n    let val = b;\n    for (let i = 0; i < 16; i++) {\n      buf[i] = Number(val % BigInt(256));\n      val = val / BigInt(256);\n    }\n    return buf;\n  }\n\n  private bufferToBigInt(b: Buffer): bigint {\n    let val = BigInt(0);\n    for (let i = 0; i < 16; i++) {\n      val = val * BigInt(256) + BigInt(b[i]);\n    }\n    return val;\n  }\n\n  public random(): number {\n    this.step();\n    return this.peekRandom();\n  }\n}\n","import React, { useEffect, useState } from \"react\";\n\nexport function NodeDetail({\n  focusedNode,\n}: {\n  focusedNode?: { chunk: any; node: any };\n}) {\n  const [history, setHistory] = useState<{ chunk: any; node: any }[]>([]);\n  useEffect(() => {\n    if (!focusedNode || focusedNode?.chunk === null) return;\n    setHistory((history) => [...history, focusedNode]);\n  }, [focusedNode]);\n  return (\n    <>\n      {focusedNode && focusedNode.chunk && (\n        <>\n          <h1>Current</h1>\n          <h3>\n            Chunk: {focusedNode.chunk.location.x},{focusedNode.chunk.location.y}\n          </h3>\n          <h3>X: {focusedNode.node.x}</h3>\n          <h3>Y: {focusedNode.node.y}</h3>\n          <h2>Previous</h2>\n          {history\n            .slice(0, -1)\n            .map(({ chunk, node }, i) => {\n              return (\n                <div key={i}>\n                  Chunk ({chunk.location.x},{chunk.location.y}) at ({node.x},\n                  {node.y})\n                </div>\n              );\n            })\n            .reverse()}\n        </>\n      )}\n    </>\n  );\n}\n","const KeyInfo = () => ({\n  Q       : false,\n  W       : false,\n  E       : false,\n  R       : false,\n  T       : false,\n  Y       : false,\n  U       : false,\n  I       : false,\n  O       : false,\n  P       : false,\n  A       : false,\n  S       : false,\n  D       : false,\n  F       : false,\n  G       : false,\n  H       : false,\n  J       : false,\n  K       : false,\n  L       : false,\n  Z       : false,\n  X       : false,\n  C       : false,\n  V       : false,\n  B       : false,\n  N       : false,\n  M       : false,\n  Up      : false,\n  Down    : false,\n  Left    : false,\n  Right   : false,\n  \">\"     : false,\n  \"<\"     : false,\n  \"+\"     : false,\n  \"-\"     : false,\n  Shift   : false,\n  Spacebar: false,\n  Enter   : false,\n});\n\nconst KeyInfoMap = (() => {\n  let m = KeyInfo();\n  for (let k of Object.keys(m)) {\n    m[k as keyof KeyInfoType] = true;\n  }\n  return m;\n})();\n\nexport type KeyInfoType = ReturnType<typeof KeyInfo>;\n\ninterface QueuedKeyboardEvent {\n  isDown: boolean;\n  event : KeyboardEvent;\n}\n\nexport class KeyboardState {\n  public down     = KeyInfo();\n  public justDown = KeyInfo();\n  public justUp   = KeyInfo();\n\n  private _queuedEvents: QueuedKeyboardEvent[] = [];\n\n  constructor() {\n    document.addEventListener(\"keydown\", e => this.keyDown(e), false);\n    document.addEventListener(\"keyup\"  , e => this.keyUp(e),   false);\n    window.addEventListener(\"blur\"     , () => { \n      this.clear();\n    }, false);\n  }\n\n  public clear() {\n    this.down          = KeyInfo(); \n    this.justDown      = KeyInfo(); \n    this.justUp        = KeyInfo(); \n    this._queuedEvents = [];\n  }\n\n  private keyUp(e: KeyboardEvent): void {\n    // Since events usually happen between two ticks, we queue them up to be\n    // processed on the next tick.\n\n    this._queuedEvents.push({ event: e, isDown: false });\n  }\n\n  private keyDown(e: KeyboardEvent): void {\n    this._queuedEvents.push({ event: e, isDown: true });\n  }\n\n  private formatKeyString(str: string): string {\n    if (str === \" \") {\n      return \"Spacebar\";\n    }\n\n    if (str.length === 1) {\n      return str.toUpperCase();\n    }\n    if (str.slice(0, 5) === \"Arrow\") {\n      return str.slice(5);\n    }\n\n    return str[0].toUpperCase() + str.slice(1);\n  }\n\n  private eventToKey(event: KeyboardEvent): string {\n    // prefer event.key\n    let str: string = event.key;\n    str = this.formatKeyString(str);\n    if (str) {\n      return str;\n    }\n    // use keycode or which if they are supported, and convert them to key string\n    const number = event.keyCode || event.which;\n\n    switch (number) {\n      case 13: str = \"Enter\"; break;\n      case 16: str = \"Shift\"; break;\n      case 37: str = \"Left\" ; break;\n      case 38: str = \"Up\"   ; break;\n      case 39: str = \"Right\"; break;\n      case 40: str = \"Down\" ; break;\n\n      /* A-Z */\n      default: str = String.fromCharCode(number);\n    }\n    return this.formatKeyString(str);\n  }\n\n  update(): void {\n    for (const key of Object.keys(this.justDown)) {\n      this.justDown[key as keyof KeyInfoType] = false;\n      this.justUp[key as keyof KeyInfoType] = false;\n    }\n\n    for (const queuedEvent of this._queuedEvents) {\n      const key = this.eventToKey(queuedEvent.event);\n      if (!KeyInfoMap[key as keyof KeyInfoType]) {\n        console.log(\"got unrecognized keypress: [\", key,\"]\", queuedEvent) // DEBUG\n      }\n\n      if (queuedEvent.isDown) {\n        if (!this.down[key as keyof KeyInfoType]) {\n          this.justDown[key as keyof KeyInfoType] = true;\n        }\n\n        this.down[key as keyof KeyInfoType] = true;\n      } else {\n        if (this.down[key as keyof KeyInfoType]) {\n          this.justUp[key as keyof KeyInfoType] = true;\n        }\n        \n        this.down[key as keyof KeyInfoType] = false;\n      }\n    }\n\n    this._queuedEvents = [];\n  }\n}","\nconst logRowsToKeep: number = 60; // last 1 seconds, at 60 fps\n\n/**\n * See https://www.npmjs.com/package/pixi-fps https://github.com/jkanchelov/pixi-fps\n */\nexport class FpsTracker {\n  private frameTimestampsInTicks: any[] = [];\n  private frameTimestampsInTime: any[] = [];\n\n  constructor() {\n    this.frameTimestampsInTicks.push(0);\n    // this.frameTimestampsInTime.push((new Date()).getTime());\n  }\n\n  public tick(ticksSinceLastUpdate: number) {\n    let lastFrameTime = this.frameTimestampsInTicks[this.frameTimestampsInTicks.length - 1];\n    this.frameTimestampsInTicks.push(lastFrameTime + ticksSinceLastUpdate);\n    \n    // rotate logs\n    if (this.frameTimestampsInTicks.length > logRowsToKeep + 60) {\n      this.frameTimestampsInTicks = this.frameTimestampsInTicks.slice(60);\n    }\n\n    // do the same but track real time\n    this.frameTimestampsInTime.push((new Date()).getTime());\n    if (this.frameTimestampsInTime.length > logRowsToKeep + 60) {\n      this.frameTimestampsInTime = this.frameTimestampsInTime.slice(60);\n    }\n  }\n\n  // [0, 3, 4] -> 30 fps\n  public getUps() : number {\n    let ticksDiff = this.frameTimestampsInTicks[this.frameTimestampsInTicks.length - 1] - this.frameTimestampsInTicks[0];\n    let framesDiff = this.frameTimestampsInTicks.length - 1;\n\n    let framesPerTick = framesDiff / ticksDiff;\n    if (!framesPerTick) {\n      return 60;\n    }\n\n    return framesPerTick * 60;\n  }\n\n  public getFps(): number {\n    let timeDiff = this.frameTimestampsInTime[this.frameTimestampsInTime.length - 1] - this.frameTimestampsInTime[0];\n    let framesDiff = this.frameTimestampsInTime.length - 1;\n\n    let framesPerMilli = framesDiff / timeDiff;\n    if (!framesPerMilli) {\n      return 60;\n    }\n\n    return framesPerMilli * 1000;\n  }\n\n  public getFpsString(): string {\n    let fpsNumber = this.getFps();\n\n    return fpsNumber.toFixed(1);\n  }\n\n  public getUpsString(): string {\n    let upsNumber = this.getUps();\n\n    return upsNumber.toFixed(1);\n  }\n}","import { InteractionData } from \"pixi.js\";\n\n\n/**\n * CONSIDER importing: https://www.npmjs.com/package/pixi-viewport https://davidfig.github.io/pixi-viewport/\n * NOTE: on mobile multitouch, runs into issues when:\n * 1. hold 1 finger down and move it around (works)\n * 2. put down another finger (note that the newest finger controls the drag)\n * 3. release the second finger\n * 4. the first finger (which is the only \"down\" finger) no longer controls drag!!! bad!!!\n */\nexport class DraggableHelper {\n  private sourceContainer!: PIXI.Container\n  private targetContainer!: PIXI.Container\n  private targetStartingX!: number;\n  private targetStartingY!: number;\n  private mouseStartingX!: number;\n  private mouseStartingY!: number;\n  private data!: InteractionData // TODO(bowei): what is this\n  private isDragging: boolean = false;\n  // private dragRatio: number = 1;\n\n  constructor(args: {\n    source: PIXI.Container,\n    target: PIXI.Container,\n  }) {\n    let { source, target } = args;\n    source.interactive = true;\n\n    // this.dragRatio = ratio;\n    this.sourceContainer = source;\n    this.targetContainer = target;\n\n    source.addListener('pointerdown', this.onDragStart);\n\n    source.addListener('pointerup', this.onDragEnd);\n    source.addListener('pointerupoutside', this.onDragEnd);\n\n    source.addListener('pointermove', this.onDragMove);\n  }\n\n  private onDragStart = (event: PIXI.InteractionEvent) => {\n    this.data = event.data;\n    this.targetStartingX = this.targetContainer.x;\n    this.targetStartingY = this.targetContainer.y;\n    const startingPosition = this.data.getLocalPosition(this.sourceContainer)\n    this.mouseStartingX = startingPosition.x;\n    this.mouseStartingY = startingPosition.y;\n\n    console.log(this);\n    this.isDragging = true;\n  }\n\n  private onDragEnd = () => {\n    this.isDragging = false;\n  }\n\n  private onDragMove = () => {\n    if (this.isDragging) {\n      // wtf??\n      const localPosition = this.data.getLocalPosition(this.sourceContainer);\n      this.targetContainer.x = this.targetStartingX + (localPosition.x - this.mouseStartingX);\n      this.targetContainer.y = this.targetStartingY + (localPosition.y - this.mouseStartingY);\n    }\n  }\n}\n\nexport function registerDraggable(args: {\n    source: PIXI.Container,\n    target: PIXI.Container,\n    ratio?: number\n}) : DraggableHelper {\n  return new DraggableHelper(args);\n}","export const EPSILON = 0.0000001;\n\nexport const epsEqual = (x: number, y: number) => {\n  return Math.abs(x - y) < EPSILON;\n}\n\nexport const epsGreaterThan = (x: number, y: number) => {\n  return (x + EPSILON - y) > 0;\n}\n\nexport const epsLessThan = (x: number, y: number) => {\n  return (x - EPSILON - y) < 0;\n}","let lastUsedId = 0;\n\nexport const getUniqueID = () => {\n  return lastUsedId++;\n};\n\nexport class Util {\n  static MinBy<T>(list: T[], fn: (T: T) => number): T | null {\n    let lowestT: T | null = null;\n    let lowestValue: number | null = null;\n\n    for (const item of list) {\n      const value = fn(item);\n\n      if (lowestValue === null || value < lowestValue) {\n        lowestT = item;\n        lowestValue = value;\n      }\n    }\n\n    return lowestT;\n  }\n\n  static MinByAndValue<T>(list: T[], fn: (T: T) => number): { obj: T, value: number } | null {\n    let lowestT: T | null = null;\n    let lowestValue: number | null = null;\n\n    for (const item of list) {\n      const value = fn(item);\n\n      if (lowestValue === null || value < lowestValue) {\n        lowestT = item;\n        lowestValue = value;\n      }\n    }\n\n    return lowestT === null || lowestValue === null ? null : { obj: lowestT, value: lowestValue };\n  }\n\n  static MaxBy<T>(list: T[], fn: (T: T) => number): T | null {\n    let highestT: T | null = null;\n    let highestValue: number | null = null;\n\n    for (const item of list) {\n      const value = fn(item);\n\n      if (highestValue === null || value > highestValue) {\n        highestT = item;\n        highestValue = value;\n      }\n    }\n\n    return highestT;\n  }\n\n  static RandRange(low: number, high: number): number {\n    return Math.floor(Math.random() * (high - low) + low);\n  }\n\n  public static SortByKey<T>(array: T[], key: (x: T) => number): T[] {\n    return array.sort((a, b) => {\n      return key(a) - key(b)\n    });\n  }\n\n  public static ReplaceAll(\n    str: string,\n    mapObj: { [key: string]: string }\n  ): string {\n    const re = new RegExp(Object.keys(mapObj).join('|'), 'gi')\n\n    return str.replace(re, matched => {\n      return mapObj[matched.toLowerCase()]\n    });\n  }\n\n  public static Debounce<F extends (...args: any[]) => void>(\n    func: F,\n    waitMilliseconds = 50,\n    options = {\n      isImmediate: false,\n    }\n  ): F {\n    let timeoutId: any; // types are different on node vs client, so we have to use any.\n\n    const result = (...args: any[]) => {\n      const doLater = () => {\n        timeoutId = undefined;\n        if (!options.isImmediate) {\n          func.apply(this, args);\n        }\n      }\n\n      const shouldCallNow = options.isImmediate && timeoutId === undefined;\n\n      if (timeoutId !== undefined) {\n        clearTimeout(timeoutId);\n      }\n\n      timeoutId = setTimeout(doLater, waitMilliseconds);\n\n      if (shouldCallNow) {\n        func.apply(this, args);\n      }\n    }\n\n    return result as any;\n  }\n\n  public static FormatDate(d: Date): string {\n    const monthName = [\n      'Jan',\n      'Feb',\n      'Mar',\n      'Apr',\n      'May',\n      'Jun',\n      'Jul',\n      'Aug',\n      'Sep',\n      'Oct',\n      'Nov',\n      'Dec',\n    ][d.getMonth()]\n\n    return `${monthName} ${d.getDate()}, ${('00' + d.getHours()).substr(-2)}:${(\n      '00' + d.getMinutes()\n    ).substr(-2)}:${('00' + d.getSeconds()).substr(-2)}`;\n  }\n\n  public static FlattenByOne<T>(arr: T[][]): T[] {\n    let result: T[] = []\n\n    for (const obj of arr) {\n      result = result.concat(obj)\n    }\n\n    return result\n  }\n\n  public static PadString(string: string, length: number, intersperse = \"\", character = \" \") {\n    return string + intersperse + character.repeat(length - string.length);\n  }\n}\n","import { EPSILON } from \"../epsilon_math\";\nimport { Util } from \"../misc\";\n\nexport interface IVector2 {\n  x: number;\n  y: number;\n}\n\nexport class Vector2 {\n  private _x: number;\n  private _y: number;\n\n  public get x(): number { return this._x; }\n  public get y(): number { return this._y; }\n\n  constructor();\n  constructor(x: number, y: number);\n  constructor(props: { x: number, y: number });\n  constructor(propsOrX: { x: number, y: number } | number = { x: 0, y: 0 }, y?: number) {\n    if (typeof propsOrX === \"number\") {\n      this._x = propsOrX;\n      this._y = y!;\n    } else {\n      this._x = propsOrX.x;\n      this._y = propsOrX.y;\n    }\n  }\n\n  public get half(): Vector2 {\n    return new Vector2({ x: this.x / 2, y: this.y / 2 });\n  }\n\n  public static Zero: Vector2 = new Vector2(0, 0);\n  public static One: Vector2 = new Vector2(1, 1);\n\n  static IsVector2(x: any): x is Vector2 {\n    return x instanceof Vector2;\n  }\n\n  static Random(highX: number, highY: number, lowX = 0, lowY = 0) {\n    return new Vector2({\n      x: Util.RandRange(lowX, highX),\n      y: Util.RandRange(lowY, highY),\n    });\n  }\n\n  hash(): string {\n    return this.toString();\n  }\n\n  toString(): string {\n    return `[${this.x}, ${this.y}]`;\n  }\n\n  invert(): Vector2 {\n    return new Vector2({\n      x: -this.x,\n      y: -this.y,\n    });\n  }\n\n  round(): Vector2 {\n    return new Vector2({\n      x: Math.round(this.x),\n      y: Math.round(this.y),\n    });\n  }\n\n  floor(): Vector2 {\n    return new Vector2({\n      x: Math.floor(this.x),\n      y: Math.floor(this.y),\n    });\n  }\n\n  taxicabDistance(p: Vector2): number {\n    return Math.abs(p.x - this.x) + Math.abs(p.y - this.y);\n  }\n\n  diagonalDistance(p: IVector2): number {\n    return Math.max(Math.abs(p.x - this.x), Math.abs(p.y - this.y));\n  }\n\n  distance(p: IVector2): number {\n    let dx = Math.abs(p.x - this.x);\n    let dy = Math.abs(p.y - this.y);\n\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n\n  translate(p: { x: number, y: number }): Vector2 {\n    return new Vector2({\n      x: this.x + p.x,\n      y: this.y + p.y,\n    });\n  }\n\n  subtract(p: { x: number, y: number }): Vector2 {\n    return new Vector2({\n      x: this.x - p.x,\n      y: this.y - p.y,\n    });\n  }\n\n  add(p: { x: number, y: number }): Vector2 {\n    return new Vector2({\n      x: this.x + p.x,\n      y: this.y + p.y,\n    });\n  }\n\n  addX(x: number): Vector2 {\n    return new Vector2({\n      x: this.x + x,\n      y: this.y,\n    });\n  }\n\n  addY(y: number): Vector2 {\n    return new Vector2({\n      x: this.x,\n      y: this.y + y,\n    });\n  }\n\n  subtractX(x: number): Vector2 {\n    return new Vector2({\n      x: this.x - x,\n      y: this.y,\n    });\n  }\n\n  subtractY(y: number): Vector2 {\n    return new Vector2({\n      x: this.x,\n      y: this.y - y,\n    });\n  }\n\n  clampY(low: number, high: number): Vector2 {\n    let newY = this.y;\n\n    if (newY < low) { newY = low; }\n    if (newY > high) { newY = high; }\n\n    return new Vector2({\n      x: this.x,\n      y: newY,\n    });\n  }\n\n  scale(about: { x: number; y: number }, amount: { x: number; y: number }): Vector2 {\n    return new Vector2({\n      x: (this.x - about.x) * amount.x + about.x,\n      y: (this.y - about.y) * amount.y + about.y,\n    });\n  }\n\n  rotate(origin: Vector2, angle: number): Vector2 {\n    angle = angle / (180 / Math.PI);\n\n    return new Vector2({\n      x: Math.cos(angle) * (this.x - origin.x) - Math.sin(angle) * (this.y - origin.y) + origin.x,\n      y: Math.sin(angle) * (this.x - origin.x) + Math.cos(angle) * (this.y - origin.y) + origin.y,\n    });\n  }\n\n  equals(other: Vector2 | undefined): boolean {\n    if (other === undefined) {\n      return false;\n    }\n\n    return (\n      Math.abs(this.x - other.x) < EPSILON &&\n      Math.abs(this.y - other.y) < EPSILON\n    );\n  }\n\n  multiply(other: Vector2 | number): Vector2 {\n    if (typeof other === \"number\") {\n      return new Vector2({\n        x: this.x * other,\n        y: this.y * other,\n      });\n    } else {\n      return new Vector2({\n        x: this.x * other.x,\n        y: this.y * other.y,\n      });\n    }\n  }\n\n  divide(other: Vector2 | number): Vector2 {\n    if (typeof other === \"number\") {\n      return new Vector2({\n        x: this.x / other,\n        y: this.y / other,\n      });\n    } else {\n      return new Vector2({\n        x: this.x / other.x,\n        y: this.y / other.y,\n      });\n    }\n  }\n\n  toJSON(): any {\n    return {\n      __type: \"Vector2\",\n      x: this.x,\n      y: this.y,\n    }\n  }\n\n  transform(trans: Vector2, scale: number): Vector2 {\n    return new Vector2({\n      x: Math.floor((this.x - trans.x) * scale),\n      y: Math.floor((this.y - trans.y) * scale),\n    });\n  }\n\n  normalize(): Vector2 {\n    if (this.x === 0 && this.y === 0) {\n      return this;\n    }\n\n    const length = Math.sqrt(this.x * this.x + this.y * this.y);\n\n    return new Vector2({\n      x: this.x / length,\n      y: this.y / length\n    });\n  }\n\n  withX(newX: number): Vector2 {\n    return new Vector2({\n      x: newX,\n      y: this.y,\n    });\n  }\n\n  withY(newY: number): Vector2 {\n    return new Vector2({\n      x: this.x,\n      y: newY,\n    });\n  }\n\n  invertX(): Vector2 {\n    return new Vector2({\n      x: -this.x,\n      y: this.y,\n    });\n  }\n\n  lerp(other: Vector2, t: number): Vector2 {\n    if (t > 1 || t < 0) { console.error(\"Lerp t must be between 0 and 1.\"); }\n    if (t === 0) return this;\n    if (t === 1) return other;\n\n    return this.scale({ x: 0, y: 0 }, { x: 1 - t, y: 1 - t }).add(other.scale({ x: 0, y: 0 }, { x: t, y: t }))\n  }\n\n  lerp2D(other: Vector2, tx: number, ty: number): Vector2 {\n    if (tx > 1 || tx < 0 || ty > 1 || ty < 0) { console.error(\"Lerp t must be between 0 and 1.\"); }\n    return this.scale({ x: 0, y: 0 }, { x: 1 - tx, y: 1 - ty }).add(other.scale({ x: 0, y: 0 }, { x: tx, y: ty }))\n  }\n\n  coserp(other: Vector2, t: number): Vector2 {\n    t = 0.5 * (1 + Math.cos(2 * t * Math.PI));\n\n    return this.lerp(other, t);\n  }\n\n  static Deserialize(obj: any): Vector2 {\n    if (!obj.hasOwnProperty(\"x\") || !obj.hasOwnProperty(\"y\")) {\n      console.error(\"Failed deserializing point\");\n    }\n\n    return new Vector2({\n      x: obj.x,\n      y: obj.y,\n    });\n  }\n\n  static Serialize(obj: Vector2): string {\n    return JSON.stringify({ x: obj.x, y: obj.y });\n  }\n}","export class HashSet<K extends { hash(): string }> {\n  private _values: HashMap<K, K>;\n\n  constructor(initialValues: K[] = []) {\n    this._values = new HashMap<K, K>();\n\n    for (const value of initialValues) {\n      this.put(value);\n    }\n  }\n\n  remove(key: K): void {\n    this._values.remove(key);\n  }\n\n  put(key: K): void {\n    this._values.put(key, key);\n  }\n\n  get(key: K): boolean {\n    return this._values.get(key) !== undefined;\n  }\n\n  values(): K[] {\n    return this._values.values();\n  }\n}\n\nexport class HashMap<K extends { hash(): string }, V> {\n  private _values: { [key: string]: V } = {};\n\n  put(key: K, value: V) {\n    this._values[key.hash()] = value;\n  }\n\n  remove(key: K): void {\n    delete this._values[key.hash()];\n  }\n\n  get(key: K): V {\n    return this._values[key.hash()];\n  }\n\n  values(): V[] {\n    return Object.keys(this._values).map(key => this._values[key]);\n  }\n}\n\nexport class DefaultHashMap<K extends { hash(): string }, V> {\n  private _values: { [key: string]: V } = {};\n  private _makeDefault: () => V;\n\n  constructor(makeDefaultValue: () => V) {\n    this._makeDefault = makeDefaultValue;\n  }\n\n  put(key: K, value: V) {\n    this._values[key.hash()] = value;\n  }\n\n  get(key: K): V {\n    if (this._values[key.hash()] === undefined) {\n      this._values[key.hash()] = this._makeDefault();\n    } \n\n    return this._values[key.hash()];\n  }\n}\n\n","import { Line } from \"../lib/util/geometry/line\";\nimport { Vector2 } from \"../lib/util/geometry/vector2\";\nimport { INTMAX32, squirrel3 } from \"../lib/util/random\";\nimport * as Pixi from \"pixi.js\";\nimport { HashMap, HashSet } from \"../lib/util/data_structures/hash\";\n\nexport class Chunk {\n  public static CHUNK_DIM = 9; // each chunk is a DIM x DIM grid of nodes, centered on a single node\n  public static CHUNK_HALF_DIM = (Chunk.CHUNK_DIM - 1) / 2;\n  public static DROP_NODES_CHANCE = 0.3; // before generating edges, how many of the nodes to throw out\n\n  private id!: number;\n\n  public nodes: Vector2[] = [];\n  public selectedNodes: HashSet<Vector2> = new HashSet();\n  public allocatedNodes: HashSet<Vector2> = new HashSet();\n\n  public edges: Line[] = [];\n\n  public location: Vector2 = new Vector2(0, 0);\n\n  constructor(seed: number, chunkIndex: Vector2) {\n    this.location = chunkIndex;\n\n    this.id = squirrel3(seed + squirrel3(seed + this.location.x) + this.location.y);\n\n    // determine which nodes we want to throw out - also keep 4way rotational symmetry\n    let droppedNodes: HashSet<Vector2> = new HashSet();\n    for (let i = -Chunk.CHUNK_HALF_DIM; i <= Chunk.CHUNK_HALF_DIM; i++) {\n      for (let j = -Chunk.CHUNK_HALF_DIM; j <= Chunk.CHUNK_HALF_DIM; j++) {\n        if (i === 0 && j === 0) {\n          continue;\n        }\n        if (squirrel3(this.id + i * Chunk.CHUNK_DIM + j) / INTMAX32 < Chunk.DROP_NODES_CHANCE / 4) {\n          droppedNodes.put(new Vector2(i, j));\n          droppedNodes.put(new Vector2(j, -i));\n          droppedNodes.put(new Vector2(-i, -j));\n          droppedNodes.put(new Vector2(-j, i));\n        }\n      }\n    }\n\n    for (let i = -Chunk.CHUNK_HALF_DIM; i <= Chunk.CHUNK_HALF_DIM; i++) {\n      for (let j = -Chunk.CHUNK_HALF_DIM; j <= Chunk.CHUNK_HALF_DIM; j++) {\n        let loc = new Vector2(i, j);\n        if (!droppedNodes.get(loc)) {\n          this.nodes.push(new Vector2(i, j));\n        }\n      }\n    }\n  }\n\n  public hash(): string {\n    return this.id.toString();\n  }\n}\n\nexport class RenderedChunk {\n  public chunk!: Chunk;\n  public container: Pixi.Container;\n  public renderedNodes: HashMap<Vector2, Pixi.Graphics | Pixi.Sprite> = new HashMap();\n\n  public static SPACING_PX: number = 24;\n  public static CHUNK_SPACING_PX: number = (Chunk.CHUNK_DIM + 0.5) * RenderedChunk.SPACING_PX;\n  public static NODE_SIZE_PX: number = 14;\n  public static NODE_HITAREA_PX: number = 18;\n  public static NODE_ROUNDED_PX: number = 4;\n\n  constructor(chunk: Chunk, onNodeFocus?: Function, texture?: Pixi.Texture) {\n    this.chunk = chunk;\n    // this.parentContainer = parent;\n\n    // render the thing\n    this.container = new Pixi.Container();\n\n    for (let node of chunk.nodes) {\n      let g: Pixi.Graphics | Pixi.Sprite = new Pixi.Graphics();\n      if (!texture) {\n        // g.beginFill(0xff8080);\n        // // if (node.x == 0 && node.y == 0) {\n        // //   g.beginFill(0xff0000);\n        // // }\n        // g.drawRoundedRect(\n        //   node.x * RenderedChunk.SPACING_PX - RenderedChunk.NODE_SIZE_PX / 2,\n        //   node.y * RenderedChunk.SPACING_PX - RenderedChunk.NODE_SIZE_PX / 2,\n        //   RenderedChunk.NODE_SIZE_PX,\n        //   RenderedChunk.NODE_SIZE_PX,\n        //   RenderedChunk.NODE_ROUNDED_PX\n        // );\n        // this.renderedNodes.put(node, g);\n        // g.hitArea = new Pixi.Rectangle(\n        //   node.x * RenderedChunk.SPACING_PX - RenderedChunk.NODE_HITAREA_PX / 2,\n        //   node.y * RenderedChunk.SPACING_PX - RenderedChunk.NODE_HITAREA_PX / 2,\n        //   RenderedChunk.NODE_HITAREA_PX,\n        //   RenderedChunk.NODE_HITAREA_PX,\n        // )\n      } else {\n        g = new Pixi.Sprite(texture);\n        g.anchor.x = 0.5;\n        g.anchor.y = 0.5;\n        g.x = node.x * RenderedChunk.SPACING_PX;\n        g.y = node.y * RenderedChunk.SPACING_PX;\n        g.hitArea = new Pixi.Rectangle(\n          - RenderedChunk.NODE_HITAREA_PX / 2,\n          - RenderedChunk.NODE_HITAREA_PX / 2,\n          RenderedChunk.NODE_HITAREA_PX,\n          RenderedChunk.NODE_HITAREA_PX,\n        )\n        this.renderedNodes.put(node, g);\n      }\n      g.interactive = true;\n\n      if (this.chunk.allocatedNodes.get(node)) {\n        g.tint = 0x00aaff;\n      } else if (this.chunk.selectedNodes.get(node)) {\n        g.tint = 0xBBBBBB;\n      }\n      g.addListener(\"pointerdown\", () => {\n        onNodeFocus?.(this.chunk, node);\n        console.log(`clicked chunk ${this.chunk.location.x} ${this.chunk.location.y} node ${node.x}, ${node.y}`);\n\n        // if nothing is selected\n        if (this.chunk.selectedNodes.values().length == 0) {\n          // select it\n          this.chunk.selectedNodes.put(node);\n          g.tint = 0xBBBBBB;\n          // g.alpha = 0.5;\n        } else if (this.chunk.selectedNodes.get(node)) {\n          // i was already selected, let's allocate it\n          this.chunk.selectedNodes.remove(node);\n          // try to allocate, only allow if we are connected to something already allocated\n          let neighbors = [node.addX(1), node.addY(1), node.addY(-1), node.addX(-1)];\n          let allowed = false;\n          for (let neighbor of neighbors) {\n            if (this.chunk.allocatedNodes.get(neighbor)) {\n              allowed = true;\n              break;\n            }\n          }\n          if (allowed) {\n            this.chunk.allocatedNodes.put(node);\n            g.tint = 0x00aaff;\n          } else {\n            g.tint = 0xFFFFFF;\n            window.alert('not allowed to allocate that one!');\n          }\n          // g.alpha = 0.5;\n        } else {\n          // unselect what was previously selected\n          for (let selected of this.chunk.selectedNodes.values()) {\n            this.renderedNodes.get(selected).tint = 0xFFFFFF;\n            this.chunk.selectedNodes.remove(selected);\n          }\n          this.chunk.selectedNodes.put(node);\n          g.tint = 0xBBBBBB;\n        }\n      });\n      this.container.addChild(g);\n    }\n\n    this.container.x = this.chunk.location.x * RenderedChunk.CHUNK_SPACING_PX;\n    this.container.y = this.chunk.location.y * RenderedChunk.CHUNK_SPACING_PX;\n  }\n\n  public hash(): string {\n    return this.chunk.hash();\n  }\n}","import * as Pixi from \"pixi.js\";\nimport { HashMap } from \"../lib/util/data_structures/hash\";\nimport { Vector2 } from \"../lib/util/geometry/vector2\";\nimport { squirrel3 } from \"../lib/util/random\";\nimport { Chunk, RenderedChunk } from \"./Chunk\";\n\n\nexport class ZLevel {\n  private id: number;\n  public z: number;\n  public chunks: Chunk[] = []\n\n  constructor(seed: number, zIndex: number) {\n    this.z = zIndex;\n    this.id = squirrel3(seed + this.z);\n\n    // pregenerate stuff\n    for (let i = -3; i <= 3; i++) {\n      for (let j = -3; j <= 3; j++) {\n        this.chunks.push(new Chunk(this.id, new Vector2(i, j)));\n      }\n    }\n  }\n}\n\n\nexport class RenderedZLevel {\n  public zLevel!: ZLevel;\n\n  public container: Pixi.Container;\n  public renderedChunks: HashMap<Chunk, RenderedChunk> = new HashMap();\n\n  constructor(zLevel: ZLevel, onNodeFocus: Function, texture?: Pixi.Texture) {\n    this.zLevel = zLevel;\n    this.container = new Pixi.Container();\n    // this.actionStage.addChild(chunksContainer);\n    // this.container.x = this.app.screen.width/2;\n    // this.container.y = this.app.screen.height/2;\n    // this.onResize.push(() => {\n    //   chunksContainer.x = this.app.screen.width/2;\n    //   chunksContainer.y = this.app.screen.height/2;\n    // })\n\n    for (let chunk of this.zLevel.chunks) {\n      let renderedChunk = new RenderedChunk(chunk, onNodeFocus, texture);\n      this.renderedChunks.put(chunk, renderedChunk)\n      this.container.addChild(renderedChunk.container)\n    }\n  }\n}","import * as Pixi from \"pixi.js\";\nimport { KeyboardState } from \"../lib/pixi/keyboard\";\nimport { FpsTracker } from \"../lib/util/fpsTracker\";\nimport { registerDraggable } from \"../lib/pixi/DraggableHelper\";\nimport createBunnyExample from \"./BunnyExample\";\nimport { Chunk, RenderedChunk } from \"./Chunk\";\nimport { Vector2 } from \"../lib/util/geometry/vector2\";\nimport { RenderedZLevel, ZLevel } from \"./ZLevel\";\nimport { HashMap } from \"../lib/util/data_structures/hash\";\n\nexport type Config = {\n  originalWindowWidth: number;\n  originalWindowHeight: number;\n  onFocusedNodeChange: Function;\n};\n\nconst defaultConfig: Config = {\n  originalWindowWidth: 800,\n  originalWindowHeight: 800,\n  onFocusedNodeChange: () => { }\n};\n\nexport type Point = number[];\n\nexport class Application {\n  public app!: Pixi.Application;\n\n  // root container\n  public stage!: Pixi.Container;\n  // Contains HUD, and other entities that don't move when game camera moves\n  public fixedCameraStage!: Pixi.Container;\n  // Contains game entities that move when game camera pans/zooms. Highly encouraged to have further subdivions.\n  public actionStage!: Pixi.Container;\n  // Contains a few entities that doesn't move when game camera moves, but located behind action stage entities, e.g. static backgrounds\n  public backdropStage!: Pixi.Container;\n\n  public keyboard!: KeyboardState;\n\n  public config!: Config;\n\n  public fpsTracker: FpsTracker;\n\n  onResize: (() => void)[] = [];\n  originalAppWidth: number = 1280;\n  originalAppHeight: number = 720;\n  randomSeed!: number;\n\n  /**\n   * Need to provide config to set up the pixi canvas\n   */\n  constructor(config?: Config, app?: Pixi.Application) {\n    this.config = Object.assign({}, defaultConfig, config);\n    this.randomSeed = 0xcafebabe;\n\n    this.originalAppWidth = Math.min(1280, this.config.originalWindowWidth - 8);\n    this.originalAppHeight = Math.min(720, this.config.originalWindowHeight - 8);\n    this.app =\n      app ||\n    new Pixi.Application({\n        width: this.originalAppWidth, // both are ignored - see resize() below\n        height: this.originalAppHeight,\n      antialias: true, // both about the same FPS, i get around 30 fps on 1600 x 900\n      transparent: true, // true -> better fps?? https://github.com/pixijs/pixi.js/issues/5580\n      resolution: window.devicePixelRatio || 1, // lower -> more FPS but uglier\n      // resolution: 0.5,\n      // resolution: 2,\n      autoDensity: true,\n      powerPreference: \"low-power\", // the only valid one for webgl\n        backgroundColor: 0xffffff, // immaterial - we recommend setting color in backdrop graphics\n      });\n\n    this.stage = this.app.stage;\n    this.stage.sortableChildren = true;\n\n    this.fixedCameraStage = new Pixi.Sprite();\n    this.fixedCameraStage.zIndex = 1;\n    this.fixedCameraStage.sortableChildren = true;\n    this.stage.addChild(this.fixedCameraStage);\n\n    this.actionStage = new Pixi.Sprite();\n    this.actionStage.zIndex = 0;\n    this.actionStage.sortableChildren = true;\n    this.stage.addChild(this.actionStage);\n\n    this.backdropStage = new Pixi.Sprite();\n    this.backdropStage.zIndex = -1;\n    this.backdropStage.sortableChildren = true;\n    this.stage.addChild(this.backdropStage);\n\n    this.keyboard = new KeyboardState();\n    this.app.ticker.add(() => {\n      this.keyboard.update();\n    })\n\n    this.fpsTracker = new FpsTracker();\n    this.app.ticker.add((delta) => {\n      // delta should be approximately equal to 1\n      this.fpsTracker.tick(delta);\n    })\n\n    this.resize(this.config.originalWindowWidth, this.config.originalWindowHeight);\n\n  }\n\n  /**\n   * Please only call once!!\n   * Usage: const container = useRef<HTMLDivElement>(null); useEffect(() => { application.register(container.current!); }, []);\n   */\n  public register(curr: HTMLDivElement) {\n    curr.appendChild(this.app.view);\n  }\n\n  public resize(windowWidth: number, windowHeight: number) {\n    // we dont want to take up the whole window\n    // this.app.renderer.resize(windowHeight * 0.75, windowHeight * 0.75);\n    this.app.renderer.resize(Math.min(1280, windowWidth  - 8), Math.min(720, windowHeight  - 8));\n    // causes the game to be rescaled when window is resized\n    // this.app.stage.width = windowHeight * 0.75;\n    // this.app.stage.height = windowHeight * 0.75;\n    // this.app.stage.x = windowHeight * 0.375;\n    this.actionStage.pivot.x = (this.app.screen.width - this.originalAppWidth) * -0.5;\n    this.actionStage.pivot.y = (this.app.screen.height - this.originalAppHeight) * -0.5;\n    this.onResize.map(fn => fn());\n    // this.app.stage.pivot.x = 0;\n  }\n\n  public drawStart() {\n    // put a text thingy in the top right\n    let textFpsHud = new Pixi.Text('', {\n      fontFamily: 'PixelMix',\n      fontSize: 12,\n      // align: 'right'\n    });\n    this.app.ticker.add(() => {\n      textFpsHud.text = this.fpsTracker.getFpsString() + \" FPS\\n\" + this.fpsTracker.getUpsString() + \" UPS\\n\" + \n      this.app.screen.width + \"x\" + this.app.screen.height;\n    })\n    textFpsHud.x = this.app.screen.width;\n    this.onResize.push(() => { textFpsHud.x = this.app.screen.width; });\n    textFpsHud.y = 0;\n    textFpsHud.anchor.x = 1; // right justify\n    this.fixedCameraStage.addChild(textFpsHud);\n\n    // Register mouse drag to use for panning\n    registerDraggable({\n      source: this.backdropStage,\n      // dragging backdrop stage should move action stage in the reverse direction -- we're dragging the backdrop, not an entity\n      target: this.actionStage,\n    });\n\n    // populate the backdrop layer with something that captures mouse events\n    const backdrop = new Pixi.Graphics();\n    this.backdropStage.addChild(backdrop);\n    backdrop.beginFill(0xabcdef, 1);\n    // backdrop.alpha = 0.5; // if alpha == 0, Pixi does not register this as a hittable area\n    backdrop.interactive = true;\n    // backdrop.interactiveChildren = true; // not sure what this does\n    // backdrop.buttonMode = true; // changes the mouse cursor on hover to pointer; not desirable for the entire backdrop\n    backdrop.drawRect(0, 0, this.app.screen.width, this.app.screen.height);\n    this.onResize.push(() => {\n      backdrop.width = this.app.screen.width;\n      backdrop.height = this.app.screen.height;\n    });\n    // backdrop.drawRect(-10000, -10000, 30000, 30000);\n\n    // Register keyboard to use for panning\n    this.app.ticker.add((delta) => {\n      if (this.keyboard.down.Right) {\n        this.actionStage.x -= 10 * delta;\n      }\n      if (this.keyboard.down.Left) {\n        this.actionStage.x += 10 * delta;\n      }\n      if (this.keyboard.down.Up) {\n        this.actionStage.y += 10 * delta;\n      }\n      if (this.keyboard.down.Down) {\n        this.actionStage.y -= 10 * delta;\n      }\n    });\n\n    // Add a reticle in the hud at the midpoint\n    const reticle = new Pixi.Graphics();\n    reticle.lineStyle(2, 0x999999);\n    reticle.drawCircle(0, 0, 6);\n    reticle.x = this.app.screen.width / 2;\n    reticle.y = this.app.screen.height / 2;\n    this.onResize.push(() => {\n    reticle.x = this.app.screen.width / 2;\n    reticle.y = this.app.screen.height / 2;\n    })\n    reticle.interactive = true;\n    this.fixedCameraStage.addChild(reticle);\n\n    // test\n    // createBunnyExample({ parent: this.actionStage, ticker: this.app.ticker, x: this.app.screen.width / 2, y: this.app.screen.height / 2 });\n\n\n    // TODO(bowei): move this code outta here!!\n    // generate a texture\n    let g = new Pixi.Graphics();\n    g.beginFill(0xff8080);\n    g.drawRoundedRect(\n      - RenderedChunk.NODE_SIZE_PX / 2,\n      - RenderedChunk.NODE_SIZE_PX / 2,\n      RenderedChunk.NODE_SIZE_PX,\n      RenderedChunk.NODE_SIZE_PX,\n      RenderedChunk.NODE_ROUNDED_PX\n    );\n    // g.x = 200;\n    // g.y = 200;\n    // this.app.stage.addChild(g);\n    let texture = this.app.renderer.generateTexture(g, Pixi.SCALE_MODES.NEAREST, 1);\n    // const sprite = new Pixi.Sprite(texture);\n    // sprite.x = 300;\n    // sprite.y = 300;\n    // this.app.stage.addChild(sprite);\n\n    // create the world\n    let zLevel = new RenderedZLevel(\n      new ZLevel(this.randomSeed, 0),\n      this.config.onFocusedNodeChange,\n      texture\n    );\n    let zLevelPersistence: { [i: number]: ZLevel } = {};\n    zLevelPersistence[0] = zLevel.zLevel;\n    // find the 0th square, and allocate it\n    for (let chunk of zLevel.zLevel.chunks) {\n      if (chunk.location.x === 0 && chunk.location.y === 0) {\n        chunk.allocatedNodes.put(new Vector2(0, 0));\n        zLevel.renderedChunks.get(chunk).renderedNodes.get(new Vector2(0, 0)).tint = 0x00AAFF;\n      }\n    }\n    let chunksContainer = zLevel.container;\n    this.actionStage.addChild(chunksContainer);\n    chunksContainer.x = this.app.screen.width/2;\n    chunksContainer.y = this.app.screen.height/2;\n    this.onResize.push(() => {\n      chunksContainer.x = this.app.screen.width / 2;\n      chunksContainer.y = this.app.screen.height / 2;\n    });\n\n    \n    // let preloadedZLevelDown = new RenderedZLevel(\n    //   new ZLevel(this.randomSeed, -1),\n    //   this.config.onFocusedNodeChange,\n    //   texture\n    // )\n    let chunkOriginalWidth = chunksContainer.width;\n    let chunkOriginalHeight = chunksContainer.height;\n\n    this.app.ticker.add((delta) => {\n      if (this.keyboard.justUp[\">\"] || this.keyboard.justUp[\"<\"]) {\n        // reset\n        chunksContainer.alpha = 1;\n        chunksContainer.width = chunkOriginalWidth;\n        chunksContainer.height = chunkOriginalHeight;\n      }\n\n      if (this.keyboard.down[\">\"]) {\n        // phase out the current z level and go to another one\n        chunksContainer.alpha -= 0.1;\n        chunksContainer.width *= 1.03;\n        chunksContainer.height *= 1.03;\n        // this.actionStage.removeChild(chunksContainer);\n        if (chunksContainer.alpha <= 0) {\n          chunksContainer.alpha = 1;\n          // start the process to render next z level\n          backdrop.tint = 0xDDAADD;\n          this.actionStage.removeChild(chunksContainer);\n          setTimeout(() => {\n            let newZIndex = zLevel.zLevel.z - 1;\n            // prefer cached persistence data if it is available\n            if (!zLevelPersistence[newZIndex]) {\n              zLevelPersistence[newZIndex] = new ZLevel(this.randomSeed, newZIndex);\n            }\n            zLevel = new RenderedZLevel(\n              zLevelPersistence[newZIndex],\n              this.config.onFocusedNodeChange,\n              texture\n            );\n            // zLevel = preloadedZLevelDown;\n            // preloadedZLevelDown = new RenderedZLevel(\n            //   new ZLevel(this.randomSeed, preloadedZLevelDown.zLevel.z - 1),\n            //   this.config.onFocusedNodeChange,\n            //   texture\n            // );\n            chunksContainer = zLevel.container;\n            this.actionStage.addChild(chunksContainer);\n            chunksContainer.x = this.app.screen.width / 2;\n            chunksContainer.y = this.app.screen.height / 2;\n            backdrop.tint = 0xFFFFFF;\n          });\n        }\n      }\n      if (this.keyboard.down[\"<\"]) {\n        // phase out the current z level and go to another one\n        chunksContainer.alpha -= 0.1;\n        chunksContainer.width *= 1/1.03;\n        chunksContainer.height *= 1/1.03;\n        // this.actionStage.removeChild(chunksContainer);\n        if (chunksContainer.alpha <= 0) {\n          // start the process to render next z level\n          chunksContainer.alpha = 1;\n          backdrop.tint = 0xDDAADD;\n          this.actionStage.removeChild(chunksContainer);\n          setTimeout(() => {\n            let newZIndex = zLevel.zLevel.z + 1;\n            // prefer cached persistence data if it is available\n            if (!zLevelPersistence[newZIndex]) {\n              zLevelPersistence[newZIndex] = new ZLevel(this.randomSeed, newZIndex);\n            }\n            zLevel = new RenderedZLevel(\n              zLevelPersistence[newZIndex],\n              this.config.onFocusedNodeChange,\n              texture\n            );\n            // zLevel = preloadedZLevelDown;\n            // preloadedZLevelDown = new RenderedZLevel(\n            //   new ZLevel(this.randomSeed, preloadedZLevelDown.zLevel.z - 1),\n            //   this.config.onFocusedNodeChange,\n            //   texture\n            // );\n            chunksContainer = zLevel.container;\n            this.actionStage.addChild(chunksContainer);\n            chunksContainer.x = this.app.screen.width / 2;\n            chunksContainer.y = this.app.screen.height / 2;\n            backdrop.tint = 0xFFFFFF;\n          });\n        }\n      }\n    });\n  }\n}\n","import React, { useEffect, useRef, useState } from \"react\";\nimport \"./PixiComponent.css\";\nimport { Application } from \"../pixi/Application\";\n\n/**\n * Initialize the pixi app\n */\n// const game = new BaseGame({\n//   scale: 1,\n//   canvasWidth: 800,\n//   canvasHeight: 800,\n//   tileHeight: 16,\n//   tileWidth: 16,\n//   debugFlags: {},\n//   state: {\n//     tick: 0,\n//   },\n//   backgroundColor: 0xffffff, // TODO(bowei): fix this\n// });\n// let application = new Application({ originalWindowWidth: window.innerHeight * .75, originalWindowHeight: window.innerHeight * .75 });\n\nexport function PixiComponent({\n  onFocusedNodeChange,\n}: {\n  whatever?: any;\n  onFocusedNodeChange: (...x: any) => void;\n}) {\n  const container = useRef<HTMLDivElement>(null);\n  const [application, setApplication] = useState();\n  function initializeApplication() {\n    const newApp = new Application({\n      originalWindowWidth: window.innerWidth,\n      originalWindowHeight: window.innerHeight,\n      onFocusedNodeChange,\n    });\n    // application.register(container.current!);\n    container.current!.appendChild(newApp.app.view);\n    // container.current!.appendChild(application.app.view)\n    // console.log(container.current!)\n    newApp.drawStart();\n    setApplication(newApp);\n  }\n\n  useEffect(() => {\n    return initializeApplication();\n  }, []);\n\n  window.onresize = () => {\n    application?.resize?.(window.innerWidth, window.innerHeight);\n  };\n\n  return (\n    <>\n      <div ref={container} />\n      <button onClick={() => {}}>draw circle</button>\n      <button\n        onClick={() => {\n          container.current!.removeChild(application?.app?.view);\n          initializeApplication();\n        }}\n      >\n        [DEBUG] reset and rerender\n      </button>\n    </>\n  );\n}\n","import React from \"react\";\n\nexport default function QuestProgress({ remainingPoints } : any) {\n  return (\n    <>\n      <h1>Quest Progress</h1>\n      <h3>\n        You have {remainingPoints} skill points left in your current batch\n      </h3>\n    </>\n  );\n}\n","import React from \"react\";\nimport \"./Sidebar.css\";\n\nexport default function Sidebar({ children }: any) {\n  return <div className=\"layout\">{children}</div>;\n}\n","import React from \"react\";\nexport default function TabContent({ showContent, children }: any) {\n  return <div hidden={!showContent}>{children}</div>;\n}\n","import React from \"react\";\nimport \"./Tabs.css\";\n\nexport default function Tabs({ value, labels, onChange } : any) {\n  return (\n    <div className={\"tab-label-container\"}>\n      {labels.map((label: any, i : any) => (\n        <Tab onClick={onChange} value={i} active={value === i} key={i}>\n          {label}\n        </Tab>\n      ))}\n    </div>\n  );\n}\n\nfunction Tab({ onClick, value, active, children } : any) {\n  const handleClick = () => {\n    onClick(value);\n  };\n  return (\n    <div className={active ? \"tab-label active\" : \"tab-label inactive\"}>\n      <div onClick={handleClick}>{children}</div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Vector2 } from \"./lib/util/geometry/vector2\";\nimport { Chunk } from \"./pixi/Chunk\";\n\nexport const GameContext = React.createContext<{\n  [k: string]: any;\n}>({});\n\nexport const UIContext = React.createContext<{\n  focusedNode?: { chunk: Chunk; node: Vector2 };\n}>({});\n","import \"./App.css\";\n\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { NodeDetail } from \"./components/NodeDetail\";\nimport { PixiComponent } from \"./components/PixiComponent\";\nimport QuestProgress from \"./components/QuestProgress\";\nimport Sidebar from \"./components/Sidebar\";\nimport TabContent from \"./components/TabContent\";\nimport Tabs from \"./components/Tabs\";\nimport { GameContext, UIContext } from \"./contexts\";\nimport { Vector2 } from \"./lib/util/geometry/vector2\";\nimport { Chunk } from \"./pixi/Chunk\";\n\nconst tabLabels = [\"Node Details\", \"Quest Progress\"];\n\nfunction App() {\n  const [focusedNode, setFocusedNode] = useState<{\n    chunk: Chunk;\n    node: Vector2;\n  }>();\n  const [batchContents, setBatchContents] = useState(0);\n  const [activeTab, setActiveTab] = useState(0);\n  const uiState = useMemo(() => ({ focusedNode }), [focusedNode]);\n  const game = useMemo(() => ({}), []);\n  const handleFocusedNodeChange = useCallback(\n    (chunk, node) => {\n      setBatchContents((n) => n - 1);\n      setFocusedNode({ chunk, node });\n    },\n    [setFocusedNode]\n  );\n  const handleActiveTabChange = useCallback(\n    (activeTabIndex) => {\n      setActiveTab(activeTabIndex);\n    },\n    [setActiveTab]\n  );\n\n  useEffect(() => {\n    if (batchContents === 0) {\n      setBatchContents(5);\n    }\n  }, [batchContents]);\n\n  const tabViews = useMemo(() => {\n    return [\n      <NodeDetail focusedNode={focusedNode} />,\n      <QuestProgress remainingPoints={batchContents} />,\n    ];\n  }, [focusedNode]);\n\n  return (\n    <div className=\"App\">\n      <GameContext.Provider value={game}>\n        <UIContext.Provider value={uiState}>\n          <PixiComponent onFocusedNodeChange={handleFocusedNodeChange} />\n          <Sidebar>\n            <Tabs\n              value={activeTab}\n              labels={tabLabels}\n              onChange={handleActiveTabChange}\n            />\n            {tabViews.map((component, i) => {\n              return (\n                <TabContent key={i} showContent={activeTab === i}>\n                  {component}\n                </TabContent>\n              );\n            })}\n          </Sidebar>\n        </UIContext.Provider>\n      </GameContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}