(this["webpackJsonpprocgen-skill-tree"]=this["webpackJsonpprocgen-skill-tree"]||[]).push([[0],{137:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){},15:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));n(2),n(5),n(54);var a=Math.pow(2,32);function r(e){var t=(e+a)%a;return t=Math.imul(t,3039394381),t^=t>>>8,t+=1759714724,t^=t<<8,t=Math.imul(t,458671337),((t^=t>>>8)+a)%a}}).call(this,n(13).Buffer)},158:function(e,t){},160:function(e,t){},170:function(e,t){},172:function(e,t){},197:function(e,t){},199:function(e,t){},200:function(e,t){},205:function(e,t){},207:function(e,t){},213:function(e,t){},215:function(e,t){},234:function(e,t){},246:function(e,t){},249:function(e,t){},252:function(e,t,n){},253:function(e,t,n){},254:function(e,t,n){},255:function(e,t,n){},256:function(e,t,n){},257:function(e,t,n){},258:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(138),o=n.n(i),c=(n(144),n(6)),u=(n(145),n(28)),s=n.n(u),l=(n(146),n(2)),d=n(5),p=function(){function e(){Object(l.a)(this,e),this.frameTimestampsInTicks=[],this.frameTimestampsInTime=[],this.frameTimestampsInTicks.push(0)}return Object(d.a)(e,[{key:"tick",value:function(e){var t=this.frameTimestampsInTicks[this.frameTimestampsInTicks.length-1];this.frameTimestampsInTicks.push(t+e),this.frameTimestampsInTicks.length>120&&(this.frameTimestampsInTicks=this.frameTimestampsInTicks.slice(60)),this.frameTimestampsInTime.push((new Date).getTime()),this.frameTimestampsInTime.length>120&&(this.frameTimestampsInTime=this.frameTimestampsInTime.slice(60))}},{key:"getUps",value:function(){var e=this.frameTimestampsInTicks[this.frameTimestampsInTicks.length-1]-this.frameTimestampsInTicks[0],t=(this.frameTimestampsInTicks.length-1)/e;return t?60*t:60}},{key:"getFps",value:function(){var e=this.frameTimestampsInTime[this.frameTimestampsInTime.length-1]-this.frameTimestampsInTime[0],t=(this.frameTimestampsInTime.length-1)/e;return t?1e3*t:60}},{key:"getFpsString",value:function(){return this.getFps().toFixed(1)}},{key:"getUpsString",value:function(){return this.getUps().toFixed(1)}}]),e}(),v=n(0);function h(e){var t=Object(a.useRef)(new p);return Object(a.useEffect)((function(){t.current.tick(0)}),[e.tick]),Object(v.jsxs)("div",{className:"text",children:[Object(v.jsxs)("div",{children:[e.windowState.innerWidth,"x",e.windowState.innerHeight]}),Object(v.jsx)(b,{}),Object(v.jsxs)("div",{children:["UPS: ",t.current.getFpsString()]})]})}function b(){var e=Object(a.useState)(0),t=Object(c.a)(e,2),n=t[0],r=t[1],i=Object(a.useRef)(new p);Object(a.useEffect)((function(){var e=setTimeout((function(){r((function(e){return e+1})),i.current.tick(0)}),5);return function(){return clearTimeout(e)}}),[n]);var o=Object(a.useMemo)((function(){return n>=0?i.current.getFpsString():""}),[n]);return Object(v.jsxs)("div",{children:["RPS: ",o]})}var f=n(11),O=n(12),j=n(55),S=n(10),y=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,null,[{key:"MinBy",value:function(e,t){var n,a=null,r=null,i=Object(S.a)(e);try{for(i.s();!(n=i.n()).done;){var o=n.value,c=t(o);(null===r||c<r)&&(a=o,r=c)}}catch(u){i.e(u)}finally{i.f()}return a}},{key:"MinByAndValue",value:function(e,t){var n,a=null,r=null,i=Object(S.a)(e);try{for(i.s();!(n=i.n()).done;){var o=n.value,c=t(o);(null===r||c<r)&&(a=o,r=c)}}catch(u){i.e(u)}finally{i.f()}return null===a||null===r?null:{obj:a,value:r}}},{key:"MaxBy",value:function(e,t){var n,a=null,r=null,i=Object(S.a)(e);try{for(i.s();!(n=i.n()).done;){var o=n.value,c=t(o);(null===r||c>r)&&(a=o,r=c)}}catch(u){i.e(u)}finally{i.f()}return a}},{key:"RandRange",value:function(e,t){return Math.floor(Math.random()*(t-e)+e)}},{key:"SortByKey",value:function(e,t){return e.sort((function(e,n){return t(e)-t(n)}))}},{key:"ReplaceAll",value:function(e,t){var n=new RegExp(Object.keys(t).join("|"),"gi");return e.replace(n,(function(e){return t[e.toLowerCase()]}))}},{key:"Debounce",value:function(e){var t,n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isImmediate:!1},i=function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];var u=function(){t=void 0,r.isImmediate||e.apply(n,o)},s=r.isImmediate&&void 0===t;void 0!==t&&clearTimeout(t),t=setTimeout(u,a),s&&e.apply(n,o)};return i}},{key:"FormatDate",value:function(e){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()];return"".concat(t," ").concat(e.getDate(),", ").concat(("00"+e.getHours()).substr(-2),":").concat(("00"+e.getMinutes()).substr(-2),":").concat(("00"+e.getSeconds()).substr(-2))}},{key:"FlattenByOne",value:function(e){var t,n=[],a=Object(S.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n=n.concat(r)}}catch(i){a.e(i)}finally{a.f()}return n}},{key:"PadString",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" ";return e+n+a.repeat(t-e.length)}}]),e}();function m(e){return Object.keys(e)}function g(e,t){return n=m(e).map(t),Object.fromEntries(n);var n}var x=function(e){Object(f.a)(n,e);var t=Object(O.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return n}(Object(j.a)(Error));Error;function E(e){var t=[[]],n={get:function(e,a,r){var i=e.path.concat([a.toString()]);return t[t.length-1]===e.path?t[t.length-1]=i:t.push(i),new Proxy({path:i},n)}};return e(new Proxy({path:t[0]},n)),t}function k(e){var t=E(e);return function(e){return t.map((function(t){var n,a=e,r=Object(S.a)(t);try{for(r.s();!(n=r.n()).done;){var i,o=n.value;a=null===(i=a)||void 0===i?void 0:i[o]}}catch(c){r.e(c)}finally{r.f()}return a}))}}var w,T=function(e){Object(f.a)(n,e);var t=Object(O.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return n}(Object(j.a)(Error));!function(e){e.NOOP="NOOP",e.PAN_NORTH="PAN_NORTH",e.PAN_SOUTH="PAN_SOUTH",e.PAN_WEST="PAN_WEST",e.PAN_EAST="PAN_EAST",e.TRAVEL_UPSTAIRS="TRAVEL_UPSTAIRS",e.TRAVEL_DOWNSTAIRS="TRAVEL_DOWNSTAIRS",e.TOGGLE_STRATEGIC_VIEW="TOGGLE_STRATEGIC_VIEW",e.TOGGLE_SIDEBAR="TOGGLE_SIDEBAR",e.TOGGLE_LEFT_SIDEBAR="TOGGLE_LEFT_SIDEBAR",e.TOGGLE_RIGHT_SIDEBAR="TOGGLE_RIGHT_SIDEBAR",e.TURN_OFF_SIDEBAR="TURN_OFF_SIDEBAR",e.EXIT="EXIT",e.HARD_REFRESH_PAGE="HARD_REFRESH_PAGE",e.MOVE_CURSOR_WEST="MOVE_CURSOR_WEST",e.MOVE_CURSOR_EAST="MOVE_CURSOR_EAST",e.MOVE_CURSOR_NORTH="MOVE_CURSOR_NORTH",e.MOVE_CURSOR_SOUTH="MOVE_CURSOR_SOUTH",e.MOVE_CURSOR_NORTHWEST="MOVE_CURSOR_NORTHWEST",e.MOVE_CURSOR_NORTHEAST="MOVE_CURSOR_NORTHEAST",e.MOVE_CURSOR_SOUTHWEST="MOVE_CURSOR_SOUTHWEST",e.MOVE_CURSOR_SOUTHEAST="MOVE_CURSOR_SOUTHEAST",e.MOVE_CURSOR_NORTHNORTH="MOVE_CURSOR_NORTHNORTH",e.MOVE_CURSOR_SOUTHSOUTH="MOVE_CURSOR_SOUTHSOUTH",e.INTERACT_WITH_NODE="INTERACT_WITH_NODE",e.DEALLOCATE_NODE="DEALLOCATE_NODE",e.ZOOM_RECENTER_AT_NODE="ZOOM_RECENTER_AT_NODE",e.MAYBE_RESET_BOOKMARKS_THIS_ERA="MAYBE_RESET_BOOKMARKS_THIS_ERA",e.MAYBE_PROGRESS_NEXT_ERA="MAYBE_PROGRESS_NEXT_ERA",e.UNDO="UNDO",e.REDO="REDO",e.TOGGLE_SHOW_PATHS="TOGGLE_SHOW_PATHS",e.TEMP_SHOW_PATHS="TEMP_SHOW_PATHS"}(w||(w={}));var _={"Ctrl-Backspace":w.MAYBE_RESET_BOOKMARKS_THIS_ERA,"Ctrl-z":w.UNDO,"Ctrl-y":w.REDO,"Ctrl-r":w.REDO,g:w.MAYBE_PROGRESS_NEXT_ERA,CapsLock:w.TOGGLE_SHOW_PATHS,LeftShift:w.TEMP_SHOW_PATHS,w:w.PAN_NORTH,a:w.PAN_WEST,s:w.PAN_SOUTH,d:w.PAN_EAST,b:w.TOGGLE_STRATEGIC_VIEW,t:w.TOGGLE_LEFT_SIDEBAR,y:w.TOGGLE_RIGHT_SIDEBAR,Escape:w.EXIT,j:w.MOVE_CURSOR_WEST,l:w.MOVE_CURSOR_EAST,u:w.MOVE_CURSOR_NORTHWEST,i:w.MOVE_CURSOR_NORTHEAST,n:w.MOVE_CURSOR_SOUTHWEST,m:w.MOVE_CURSOR_SOUTHEAST,k:w.MOVE_CURSOR_SOUTHWEST,ArrowUp:w.MOVE_CURSOR_NORTHEAST,ArrowLeft:w.MOVE_CURSOR_WEST,ArrowDown:w.MOVE_CURSOR_SOUTHWEST,ArrowRight:w.MOVE_CURSOR_EAST,RightShift:w.MOVE_CURSOR_NORTHWEST,RightControl:w.MOVE_CURSOR_SOUTHEAST," ":w.INTERACT_WITH_NODE,Backspace:w.DEALLOCATE_NODE,r:w.ZOOM_RECENTER_AT_NODE,"\\":w.ZOOM_RECENTER_AT_NODE,"<":w.TRAVEL_UPSTAIRS,">":w.TRAVEL_DOWNSTAIRS,"Ctrl-Shift-R":w.HARD_REFRESH_PAGE},M=m(w).reduce((function(e,t){return e[t]=!1,e}),{}),I=function(){return{activeIntent:M,newIntent:M,endedIntent:M}},R=function(e){Object(f.a)(n,e);var t=Object(O.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleKeydown=function(e){var t=a.state.keyIntentConfig,n=e.key;"Control"===n||"Shift"===n||"Meta"===n||"Alt"===n?1===e.location?n="Left"+n:2===e.location?n="Right"+n:3===e.location&&(n="Extra"+n):(e.shiftKey&&(n="Shift-"+n),e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n));var r=t[n];if(r){if(a.props.isTextBoxFocused)return void console.log("bypassing keyboard event processing because text box is focused");e.preventDefault()}else console.log("Unregistered key ",n,e);!1===e.repeat&&void 0!==r&&r!==w.NOOP&&(a.props.updaters.newIntent[r].enqueueUpdate((function(){return a.props.updaters.newIntent[r].enqueueUpdate((function(){return!1})),!0})),a.props.updaters.activeIntent[r].enqueueUpdate((function(){return!0})))},a.handleKeyup=function(e){var t=a.state.keyIntentConfig[e.key];void 0!==t&&t!==w.NOOP&&(a.props.updaters.activeIntent[t].enqueueUpdate((function(){return!1})),a.props.updaters.endedIntent[t].enqueueUpdate((function(){return a.props.updaters.endedIntent[t].enqueueUpdate((function(){return!1})),!0})))},a.state={keyIntentConfig:_},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeydown),document.addEventListener("keyup",this.handleKeyup)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeydown),document.removeEventListener("keyup",this.handleKeyup)}},{key:"render",value:function(){return Object(v.jsx)(v.Fragment,{children:" "})}}]),n}(r.a.Component),C=r.a.createContext([]),U=n(8),N=1e-7,A=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},n=arguments.length>1?arguments[1]:void 0;Object(l.a)(this,e),this._x=void 0,this._y=void 0,"number"===typeof t?(this._x=t,this._y=n):(this._x=t.x,this._y=t.y)}return Object(d.a)(e,[{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"half",get:function(){return new e({x:this.x/2,y:this.y/2})}},{key:"hash",value:function(){return this.toString()}},{key:"toString",value:function(){return"[".concat(this.x,", ").concat(this.y,"]")}},{key:"invert",value:function(){return new e({x:-this.x,y:-this.y})}},{key:"round",value:function(){return new e({x:Math.round(this.x),y:Math.round(this.y)})}},{key:"floor",value:function(){return new e({x:Math.floor(this.x),y:Math.floor(this.y)})}},{key:"taxicabDistance",value:function(e){return Math.abs(e.x-this.x)+Math.abs(e.y-this.y)}},{key:"diagonalDistance",value:function(e){return Math.max(Math.abs(e.x-this.x),Math.abs(e.y-this.y))}},{key:"distance",value:function(e){var t=Math.abs(e.x-this.x),n=Math.abs(e.y-this.y);return Math.sqrt(t*t+n*n)}},{key:"translate",value:function(t){return new e({x:this.x+t.x,y:this.y+t.y})}},{key:"subtract",value:function(t){return new e({x:this.x-t.x,y:this.y-t.y})}},{key:"add",value:function(t){return new e({x:this.x+t.x,y:this.y+t.y})}},{key:"addX",value:function(t){return new e({x:this.x+t,y:this.y})}},{key:"addY",value:function(t){return new e({x:this.x,y:this.y+t})}},{key:"subtractX",value:function(t){return new e({x:this.x-t,y:this.y})}},{key:"subtractY",value:function(t){return new e({x:this.x,y:this.y-t})}},{key:"clampX",value:function(t,n){var a=this.x;return a<t&&(a=t),a>n&&(a=n),new e({x:a,y:this.y})}},{key:"clampY",value:function(t,n){var a=this.y;return a<t&&(a=t),a>n&&(a=n),new e({x:this.x,y:a})}},{key:"scale",value:function(t,n){return new e({x:(this.x-t.x)*n.x+t.x,y:(this.y-t.y)*n.y+t.y})}},{key:"rotate",value:function(t,n){return n/=180/Math.PI,new e({x:Math.cos(n)*(this.x-t.x)-Math.sin(n)*(this.y-t.y)+t.x,y:Math.sin(n)*(this.x-t.x)+Math.cos(n)*(this.y-t.y)+t.y})}},{key:"equals",value:function(e){return void 0!==e&&null!==e&&(Math.abs(this.x-e.x)<N&&Math.abs(this.y-e.y)<N)}},{key:"multiply",value:function(t){return new e("number"===typeof t?{x:this.x*t,y:this.y*t}:{x:this.x*t.x,y:this.y*t.y})}},{key:"divide",value:function(t){return new e("number"===typeof t?{x:this.x/t,y:this.y/t}:{x:this.x/t.x,y:this.y/t.y})}},{key:"toJSON",value:function(){return{__type:"Vector2",x:this.x,y:this.y}}},{key:"transform",value:function(t,n){return new e({x:Math.floor((this.x-t.x)*n),y:Math.floor((this.y-t.y)*n)})}},{key:"normalize",value:function(){if(0===this.x&&0===this.y)return this;var t=Math.sqrt(this.x*this.x+this.y*this.y);return new e({x:this.x/t,y:this.y/t})}},{key:"withX",value:function(t){return new e({x:t,y:this.y})}},{key:"withY",value:function(t){return new e({x:this.x,y:t})}},{key:"invertX",value:function(){return new e({x:-this.x,y:this.y})}},{key:"lerp",value:function(e,t){return(t>1||t<0)&&console.error("Lerp t must be between 0 and 1."),0===t?this:1===t?e:this.scale({x:0,y:0},{x:1-t,y:1-t}).add(e.scale({x:0,y:0},{x:t,y:t}))}},{key:"lerp2D",value:function(e,t,n){return(t>1||t<0||n>1||n<0)&&console.error("Lerp t must be between 0 and 1."),this.scale({x:0,y:0},{x:1-t,y:1-n}).add(e.scale({x:0,y:0},{x:t,y:n}))}},{key:"coserp",value:function(e,t){return t=.5*(1+Math.cos(2*t*Math.PI)),this.lerp(e,t)}}],[{key:"IsVector2",value:function(t){return t instanceof e}},{key:"Random",value:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new e({x:y.RandRange(a,t),y:y.RandRange(r,n)})}},{key:"Deserialize",value:function(t){return t&&t.hasOwnProperty("x")&&t.hasOwnProperty("y")?new e({x:t.x,y:t.y}):(console.error("Failed deserializing point"),null)}},{key:"Serialize",value:function(e){return JSON.stringify(this.SerializeToObject(e))}},{key:"SerializeToObject",value:function(e){return{x:e.x,y:e.y}}}]),e}();A.Zero=new A(0,0),A.One=new A(1,1);var L=n(3),D=n(37),P=Object.fromEntries(Object.entries({backgroundBlue:2236962,nodePink:3355443,nodeLavender:4934475,nodeBlue:4473924,nodeAqua:16755370,gateTint:16777215,selectedTint:12303359,allocatedTint:4473924,nodeBorder:6710886,nullTint:16777215,tooltipBorderBlack:2236962,tooltipFillWhite:15658734,white:16777215,grayBlack:1907997,borderBlack:1118481,borderWhite:6710886,black:0,textWhite:8947848}).map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return[n,a]})));function G(e){return"#"+e.toString(16)}var z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(l.a)(this,e),this._values=void 0,this._values=new H;var n,a=Object(S.a)(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;this.put(r)}}catch(i){a.e(i)}finally{a.f()}}return Object(d.a)(e,[{key:"remove",value:function(e){this._values.remove(e)}},{key:"put",value:function(e){this._values.put(e,e)}},{key:"get",value:function(e){return void 0!==this._values.get(e)}},{key:"contains",value:function(e){return this._values.contains(e)}},{key:"values",value:function(){return this._values.values()}},{key:"clone",value:function(){var t=new e;return t._values=this._values.clone(),t}},{key:"size",value:function(){return this._values.size()}},{key:"equals",value:function(e){if(void 0===e||null===e)return!1;if(this.size()!==e.size())return!1;var t,n=Object(S.a)(this.values());try{for(n.s();!(t=n.n()).done;){var a=t.value;if(!e.contains(a))return!1}}catch(r){n.e(r)}finally{n.f()}return!0}}]),e}(),H=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(l.a)(this,e),this._values={};var n,a=Object(S.a)(t);try{for(a.s();!(n=a.n()).done;){var r=Object(c.a)(n.value,2),i=r[0],o=r[1];this.put(i,o)}}catch(u){a.e(u)}finally{a.f()}}return Object(d.a)(e,[{key:"put",value:function(e,t){this._values[e.hash()]=t}},{key:"remove",value:function(e){delete this._values[e.hash()]}},{key:"get",value:function(e){return this._values[e.hash()]}},{key:"contains",value:function(e){return void 0!==this.get(e)&&e.hash()in this._values}},{key:"values",value:function(){return Object.values(this._values)}},{key:"size",value:function(){return Object.keys(this._values).length}},{key:"clone",value:function(){var t=new e;return t._values=Object(L.a)({},this._values),t}}]),e}(),F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(l.a)(this,e),this._kvalues={};var n,a=Object(S.a)(t);try{for(a.s();!(n=a.n()).done;){var r=Object(c.a)(n.value,2),i=r[0],o=r[1];this.put(i,o)}}catch(u){a.e(u)}finally{a.f()}}return Object(d.a)(e,[{key:"put",value:function(e,t){this._kvalues[e.hash()]=[e,t]}},{key:"remove",value:function(e){delete this._kvalues[e.hash()]}},{key:"get",value:function(e){var t;return null===(t=this._kvalues[e.hash()])||void 0===t?void 0:t[1]}},{key:"contains",value:function(e){return void 0!==this.get(e)&&e.hash()in this._kvalues}},{key:"keys",value:function(){var e=this;return Object.keys(this._kvalues).map((function(t){return e._kvalues[t][0]}))}},{key:"entries",value:function(){var e=this;return Object.keys(this._kvalues).map((function(t){return e._kvalues[t]}))}},{key:"values",value:function(){var e=this;return Object.keys(this._kvalues).map((function(t){return e._kvalues[t][1]}))}},{key:"hashKeyset",value:function(){return Object.keys(this._kvalues).map((function(e){return q(e)})).reduce((function(e,t){return e+t})).toString()}},{key:"clone",value:function(){var t=new e;return t._kvalues=Object(L.a)({},this._kvalues),t}},{key:"size",value:function(){return Object.keys(this._kvalues).length}}],[{key:"SerializeToObject",value:function(e,t,n){return e.entries().map((function(e){var a=Object(c.a)(e,2),r=a[0],i=a[1];return[t?t(r):r,n?n(i):i]}))}},{key:"Deserialize",value:function(t,n,a){if(!t||!Array.isArray(t))return console.error("Failed deserializing keyed hash map"),null;try{return new e(t.map((function(e){if(!e||!Array.isArray(e)||2!==e.length)throw new T("Failed deserializing entry ".concat(JSON.stringify(e)));var t=e,r=Object(c.a)(t,2),i=r[0],o=r[1];return[n?n(i):i,a?a(o):o]})))}catch(r){if(r instanceof T)return console.error("Failed deserializing keyed hash map",r),null;throw r}}}]),e}();function q(e){for(var t=0,n=0;n<e.length;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function W(e){return new U.d(e.x,e.y)}var B=16711680,V=65280,X=255,Y=65536,Z=256;function J(e,t){var n=[e&B,t&B],a=[e&V,t&V],r=[e&X,t&X],i=Math.round(n[0]/Y*n[1]/B)*Y;return i+=Math.round(a[0]/Z*a[1]/V)*Z,i+=1*Math.round(r[0]/1*r[1]/X)}function K(e,t,n){if("object"===typeof e){if(e.hasOwnProperty("target"))return Q(e);if(e.hasOwnProperty("color")){var a=e;return Q({target:a.color,proportion:a.opacity,base:a.background})}throw new Error("missing parameter in interpolateColor: ".concat(e))}if(t)return Q({target:e,proportion:t,base:n});throw new Error("missing parameter in interpolateColor: ".concat(e," ").concat(t," ").concat(n))}function Q(e){var t=e.target,n=e.base,a=void 0===n?0:n,r=e.proportion,i=void 0===r?1:r,o=[t&B,a&B],c=[t&V,a&V],u=[t&X,a&X],s=Math.round(o[0]/Y*i+o[1]/Y*(1-i))*Y;return s+=Math.round(c[0]/Z*i+c[1]/Z*(1-i))*Z,s+=1*Math.round(u[0]/1*i+u[1]/1*(1-i))}var $=n(17);function ee(e){var t=[];return[function(e){t.push(e)},function(){if(0!==t.length){var n=Object($.a)(t);t=[],e((function(e){var t,a=e,r=Object(S.a)(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;a="function"===typeof i?i(a):i}}catch(o){r.e(o)}finally{r.f()}return a}))}}]}var te=n(4);function ne(e,t){var n={getUpdater:function(){return t}};return n.enqueueUpdate=t,null===e||void 0===e||"object"!==typeof e||Object.keys(e).forEach((function(a){if("enqueueUpdate"===a||"getUpdater"===a||"update"===a)throw Error("Invalid key in updaterGenerator: ".concat(a," conflicts with reserved keywords enqueueUpdate, update, getUpdater."));n[a]=ne(e[a],(function(e){t("function"===typeof e?function(t,n){var r=e(t[a],n);return t[a]===r?t:Object(L.a)(Object(L.a)({},t),{},Object(te.a)({},a,r))}:function(t,n){return Object(L.a)(Object(L.a)({},t),{},Object(te.a)({},a,e))})}))})),n}function ae(e,t){return ne(e,(function(e){t("function"===typeof e?function(t){return e(t,t)}:e)}))}var re=function(){function e(){Object(l.a)(this,e),this._values=[]}return Object(d.a)(e,[{key:"add",value:function(e){this._values.push(e)}},{key:"remove",value:function(e){var t=this._values.splice(this._values.findIndex((function(t){return t.instance===e})),1);return 0===t.length?void 0:t[0]}},{key:"contains",value:function(e){return this._values.findIndex((function(t){return t.instance===e}))>-1}},{key:"get",value:function(e){return this._values.find((function(t){return t.instance===e}))}},{key:"clone",value:function(){var t=new e;return t._values=Object($.a)(this._values),t}},{key:"forEach",value:function(e){this._values.forEach(e)}}]),e}(),ie=function(){function e(t){var n=this;Object(l.a)(this,e),this.container=void 0,this.state=void 0,this.stateUpdaters=void 0,this._staleProps=void 0,this._children=new re,this._childrenToConstruct=new re,this._childrenToDestruct=new re,this._forceUpdates=new re,this.markForceUpdate=function(e){var t,a;null===(t=n._staleProps.args)||void 0===t||null===(a=t.markForceUpdate)||void 0===a||a.call(t,n);var r=n._children.get(e);if(!r)throw new Error("Error, child ".concat(e," not found in ").concat(n));n._forceUpdates.add(r)},this._staleProps=t}return Object(d.a)(e,[{key:"addChild",value:function(e){this._children.add(e),this._childrenToConstruct.add(e)}},{key:"registerChild",value:function(e){this._children.add(e)}},{key:"removeChild",value:function(e){var t=this._children.remove(e);t&&this._childrenToDestruct.add(t)}},{key:"_didConstruct",value:function(e){var t,n=this;this._childrenToConstruct.forEach((function(t){t.instance||(t.instance=new t.childClass(t.propsFactory(e,n.state))),n.container.addChild(t.instance.container)})),this._childrenToConstruct=new re,this.renderSelf(e),null===(t=this.didMount)||void 0===t||t.call(this)}},{key:"useState",value:function(e,t){var n=function(t){e.state="function"===typeof t?t(e.state):t},a=ee(n),r=Object(c.a)(a,2),i=r[0],o=r[1],u=ae(t,i);return this.fireStateUpdaters||(this.fireStateUpdaters=o),this.stateUpdaters||(this.stateUpdaters=u),{state:t,setState:n,fireStateUpdaters:o,stateUpdaters:u}}},{key:"update",value:function(e){this._update(e)}},{key:"_update",value:function(e){var t,n,a,r=this,i=Object(L.a)({},this.state);if(null===(t=this.fireStateUpdaters)||void 0===t||t.call(this),null===(n=this.updateSelf)||void 0===n||n.call(this,e),this.shouldUpdate&&!this.shouldUpdate(this._staleProps,i,e,this.state)){var o=this._forceUpdates.clone();return this._forceUpdates=new re,void o.forEach((function(t){var n,a=t.instance,i=t.propsFactory;null===a||void 0===a||a._update(i(e,r.state)),a&&(null===(n=r.didForceUpdateChild)||void 0===n||n.call(r,a))}))}null===(a=this.updateChildren)||void 0===a||a.call(this,e),this._updateChildren(e),this.renderSelf(e),this._staleProps=e,new Promise((function(e){var t;return e(null===(t=r.didUpdate)||void 0===t?void 0:t.call(r))}))}},{key:"_updateChildren",value:function(e){var t=this;this._childrenToDestruct.forEach((function(e){var n,a;e.instance&&(null===(n=(a=e.instance).willUnmount)||void 0===n||n.call(a),t.container.removeChild(e.instance.container))})),this._childrenToDestruct=new re,this._children.forEach((function(n){var a=n.instance,r=n.propsFactory;null===a||void 0===a||a._update(r(e,t.state))})),this._childrenToConstruct.forEach((function(n){n.instance||(n.instance=new n.childClass(n.propsFactory(e,t.state))),t.container.addChild(n.instance.container)})),this._childrenToConstruct=new re}},{key:"willUnmount",value:function(){}},{key:"toString",value:function(){return"lifecyclehandler object"}}]),e}();function oe(e){return new Proxy(e,{construct:function(e,t){var n=new e(t[0]);return n._didConstruct(t[0]),n}})}new Proxy(ie,{construct:function(e,t,n){var a=Reflect.construct(e,t,n);return a._didConstruct.apply(a,Object($.a)(t)),a}});var ce,ue,se,le=function e(){Object(l.a)(this,e)};le.CHUNK_HALF_DIM=((le.CHUNK_DIM=9)-1)/2,le.DROP_NODES_CHANCE=0,function(e){e.Basic="Basic",e.Nothing="Nothing",e.EfficiencyGate="EfficiencyGate"}(ce||(ce={})),function(e){e.Mana0="Mana0",e.Mana1="Mana1",e.Mana2="Mana2"}(ue||(ue={})),function(e){e.Flat="Flat",e.Increased0="% increased",e.AfterIncreased0="added after % increased",e.Increased1="% increased multiplier",e.AfterIncreased1="added after % increased multiplier"}(se||(se={}));var de=oe(function(e){Object(f.a)(n,e);var t=Object(O.a)(n);function n(e){var a,r,i;Object(l.a)(this,n),(i=t.call(this,e)).container=void 0,i.state=void 0,i.sprite=void 0,i.halfwayCenterSprite=void 0,i.centerSprite=void 0,i.topHalfSprite=void 0,i.hitArea=void 0,i.tooltippableArea=void 0,i.state={numClicks:0,descriptionText:""},i.updateSelf(e),i.container=new U.b;var o=null===(a=e.args.pointNodeTexture.find((function(e){return e.cropFraction>=.99})))||void 0===a?void 0:a.texture;i.container.sortableChildren=!0,i.sprite=new U.g(o),i.sprite.anchor.x=.5,i.sprite.anchor.y=.5,i.sprite.zIndex=-2,i.container.addChild(i.sprite),i.topHalfSprite=new U.g(null===(r=e.args.pointNodeTexture.find((function(e){return e.cropFraction>=.499})))||void 0===r?void 0:r.texture),i.topHalfSprite.anchor.x=.5,i.topHalfSprite.anchor.y=.5,i.topHalfSprite.zIndex=-1,e.pointNodeGen.nodeType===ce.EfficiencyGate&&i.container.addChild(i.topHalfSprite);var c=new U.c;return c.beginFill(P.black),c.drawRect(0,0,i.topHalfSprite.width,i.topHalfSprite.height/2),c.pivot.x=i.topHalfSprite.width/2,c.pivot.y=i.topHalfSprite.height/2,c.zIndex=30,i.centerSprite=new U.g(o),i.centerSprite.anchor.x=.5,i.centerSprite.anchor.y=.5,i.centerSprite.scale=W(new A(.5,.5)),i.centerSprite.zIndex=1,i.centerSprite.alpha=0,i.halfwayCenterSprite=new U.g(o),i.halfwayCenterSprite.anchor.x=.5,i.halfwayCenterSprite.anchor.y=.5,i.halfwayCenterSprite.scale=W(new A(.75,.75)),i.halfwayCenterSprite.zIndex=0,i.halfwayCenterSprite.alpha=0,i.container.interactive=!0,i.container.buttonMode=!0,i.hitArea=new U.e(-ve.NODE_HITAREA_PX/2,-ve.NODE_HITAREA_PX/2,ve.NODE_HITAREA_PX,ve.NODE_HITAREA_PX),i.container.hitArea=i.hitArea,i}return Object(d.a)(n,[{key:"updateSelf",value:function(e){var t="Nothing (empty node)";e.pointNodeGen.nodeType===ce.EfficiencyGate?t="Unlocks at 300 Mana0 in 14 or fewer allocations":e.pointNodeGen.nodeType!==ce.Nothing&&(t="".concat(e.pointNodeGen.resourceAmount," ").concat(e.pointNodeGen.resourceModifier," ").concat(e.pointNodeGen.resourceType)),this.state.descriptionText=t}},{key:"renderSelf",value:function(e){var t,n,a;this.container.position=W(e.args.position),e.isSelected?(n=P.selectedTint,a=P.selectedTint):(n=P.nullTint,a=P.nullTint),e.isAllocated&&(n=P.allocatedTint);var r=0,i=0;e.pointNodeGen.nodeType===ce.Nothing?r=P.nodeBlue:e.pointNodeGen.nodeType===ce.EfficiencyGate?(r=P.nodeAqua,i=J(P.nodeAqua,P.gateTint)):e.pointNodeGen.resourceType===ue.Mana0&&(e.pointNodeGen.resourceModifier===se.Flat?r=P.nodePink:e.pointNodeGen.resourceModifier===se.Increased0&&(r=P.nodeLavender)),this.sprite.tint=J(r,n),this.centerSprite.tint=J(r,a),this.topHalfSprite.tint=J(i,n);var o=Math.floor(9*Math.random())/8-.001;this.topHalfSprite.texture=null===(t=e.args.pointNodeTexture.find((function(e){return e.cropFraction>=o})))||void 0===t?void 0:t.texture,e.selfPointNodeRef.pointNodeCoord.equals(A.Zero)&&(this.container.scale=W(new A(1.25,1.25)))}},{key:"shouldUpdate",value:function(e,t,n,a){var r,i=Object(S.a)(Object.keys(e));try{for(i.s();!(r=i.n()).done;){var o=r.value;if("delta"!==o&&"args"!==o&&"updaters"!==o){if(e[o]!==n[o])return console.log("node shouldUpdate differed in ".concat(o,", returning true")),!0;var c,u;if("selfPointNodeRef"!==o);else if((null===(c=e[o])||void 0===c?void 0:c.hash())!==(null===(u=n[o])||void 0===u?void 0:u.hash()))return console.log("node shouldUpdate differed in ".concat(o,", returning true")),!0}}}catch(s){i.e(s)}finally{i.f()}return!1}},{key:"didMount",value:function(){var e=this;this.container.addListener("pointerdown",(function(t){e._staleProps.args.markForceUpdate(e),e.state.numClicks++})),this.container.addListener("pointerover",(function(t){var n=t.data.getLocalPosition(e.container),a=new A(e.container.worldTransform.tx,e.container.worldTransform.ty);e._staleProps.tooltipUpdaters.enqueueUpdate((function(t){return Object(L.a)(Object(L.a)({},t),{},{visible:!0,text:e.state.descriptionText,position:a.add(n)})}))})),this.container.addListener("pointerout",(function(t){e._staleProps.tooltipUpdaters.enqueueUpdate((function(e){return Object(L.a)(Object(L.a)({},e),{},{visible:!1,text:""})}))})),this.container.addListener("pointermove",(function(t){var n=t.data.getLocalPosition(e.container),a=new A(e.container.worldTransform.tx,e.container.worldTransform.ty);e._staleProps.tooltipUpdaters.position.enqueueUpdate(a.add(n))}))}},{key:"toString",value:function(){return"PointNodeCompoent "+this._staleProps.selfPointNodeRef.toString()}}]),n}(ie)),pe=function(){function e(t){Object(l.a)(this,e),this.z=void 0,this.chunkCoord=void 0,this.pointNodeCoord=void 0,this.pointNodeId=void 0,this.z=t.z,this.chunkCoord=t.chunkCoord,this.pointNodeCoord=t.pointNodeCoord,this.pointNodeId=t.pointNodeId}return Object(d.a)(e,[{key:"hash",value:function(){return this.pointNodeId.toString()+this.z.toString()+this.chunkCoord.toString()+this.pointNodeCoord.toString()}},{key:"toString",value:function(){return this.z+","+this.chunkCoord.toString()+","+this.pointNodeCoord.toString()}}]),e}(),ve=function e(){Object(l.a)(this,e)};ve.SPACING_PX=36,ve.CHUNK_SPACING_PX=(le.CHUNK_DIM+0)*ve.SPACING_PX,ve.NODE_SIZE_PX=22,ve.NODE_HITAREA_PX=ve.NODE_SIZE_PX+4,ve.NODE_ROUNDED_PX=4;oe(function(e){Object(f.a)(n,e);var t=Object(O.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).container=void 0,a.state=void 0,a.children=void 0,a.state={},a.container=new U.b,a.children=new F,a.resyncChildren(e),a}return Object(d.a)(n,[{key:"renderSelf",value:function(e){this.container.position=W(e.position)}},{key:"shouldUpdate",value:function(e,t,n,a){var r,i=Object(S.a)(Object.keys(e));try{for(i.s();!(r=i.n()).done;){var o=r.value;if("delta"!==o&&"args"!==o&&"updaters"!==o){if("position"===o){if(e[o].equals(n[o]))continue;return console.log("chunk shouldUpdate differed in ".concat(o,", returning true")),!0}var c,u;if("selectedPointNode"!==o)if("selfChunkRef"!==o){if("allocatedPointNodeSubset"===o){if(e[o].equals(n[o]))continue;return console.log("chunk shouldUpdate differed in ".concat(o,", returning true")),!0}if(e[o]!==n[o])return console.log("chunk shouldUpdate differed in ".concat(o,", returning true")),!0}else{var s,l;if((null===(s=e[o])||void 0===s?void 0:s.hash())!==(null===(l=n[o])||void 0===l?void 0:l.hash()))return console.log("chunk shouldUpdate differed in ".concat(o,", returning true")),!0}else if((null===(c=e[o])||void 0===c?void 0:c.hash())!==(null===(u=n[o])||void 0===u?void 0:u.hash()))return console.log("chunk shouldUpdate differed in ".concat(o,", returning true")),!0}}}catch(d){i.e(d)}finally{i.f()}return!1}},{key:"resyncChildren",value:function(e){var t=this,n=this.children.clone();console.log("chunk component upsert children got here");var a,r=Object(S.a)(e.chunkGen.pointNodes.entries());try{var i=function(){var r=Object(c.a)(a.value,2),i=r[0],o=r[1],u=new pe({z:e.selfChunkRef.z,chunkCoord:e.selfChunkRef.chunkCoord,pointNodeCoord:i,pointNodeId:o.id}),s=function(e,n){var a;return{delta:e.delta,args:{pointNodeTexture:e.args.pointNodeTexture,markForceUpdate:t.markForceUpdate,position:u.pointNodeCoord.multiply(ve.SPACING_PX)},selfPointNodeRef:u,updaters:e.updaters,tooltipUpdaters:e.tooltipUpdaters,pointNodeGen:o,isSelected:(null===(a=e.selectedPointNode)||void 0===a?void 0:a.pointNodeId)===u.pointNodeId,isAllocated:e.allocatedPointNodeSubset.contains(u)}},l=u,d=t.children.get(l);d?n.remove(l):(d=new de(s(e,t.state)),t.children.put(u,d),t.addChild({childClass:de,instance:d,propsFactory:s}))};for(r.s();!(a=r.n()).done;)i()}catch(p){r.e(p)}finally{r.f()}console.log("chunk component to delete has ".concat(n.size()," children"));var o,u=Object(S.a)(n.entries());try{for(u.s();!(o=u.n()).done;){var s=Object(c.a)(o.value,2),l=s[0],d=s[1];this.children.remove(l),this.removeChild(d)}}catch(p){u.e(p)}finally{u.f()}}},{key:"updateChildren",value:function(e){this.resyncChildren(e)}},{key:"didForceUpdateChild",value:function(e){this.container.removeChild(e.container),this.container.addChild(e.container)}}]),n}(ie));var he=function(){function e(t){Object(l.a)(this,e),this._wasConstructed=!1,this._value=void 0,this._factory=void 0,this._factory=t}return Object(d.a)(e,[{key:"get",value:function(){return void 0!==this._value||!0===this._wasConstructed||(this._value=this._factory(),this._wasConstructed=!0),this._value}},{key:"wasConstructed",value:function(){return this._wasConstructed}}]),e}();var be,fe,Oe=function(){function e(t){Object(l.a)(this,e),this._values=void 0,this._factory=void 0,this._values=new F,this._factory=t}return Object(d.a)(e,[{key:"setFactory",value:function(e){return this._factory=e,this}},{key:"put",value:function(e,t){this._values.put(e,t)}},{key:"remove",value:function(e){this._values.remove(e)}},{key:"invalidate",value:function(e){this.remove(e)}},{key:"clear",value:function(){this._values=new F}},{key:"peek",value:function(e){return this._values.get(e)}},{key:"get",value:function(e){if(this._values.contains(e))return this._values.get(e);var t=this._factory(e);return this._values.put(e,t),t}},{key:"precompute",value:function(e){if(!this._values.contains(e)){var t=this._factory(e);this._values.put(e,t)}}},{key:"contains",value:function(e){return this._values.contains(e)}},{key:"values",value:function(){return this._values.values()}},{key:"keys",value:function(){return this._values.keys()}},{key:"entries",value:function(){return this._values.entries()}},{key:"size",value:function(){return this._values.size()}},{key:"clone",value:function(t){var n=new e(t||this._factory);return n._values=this._values.clone(),n}}]),e}(),je=oe(function(e){Object(f.a)(n,e);var t=Object(O.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).container=void 0,a.state=void 0,a.container=new U.b,a.container.sortableChildren=!0,a.state={},a}return Object(d.a)(n,[{key:"renderSelf",value:function(e){}}]),n}(ie)),Se=n(53),ye=n.n(Se);!function(e){e.TAKEN_OR_MARKED="TAKEN_OR_MARKED",e.AVAILABLE="AVAILABLE",e.UNREACHABLE="UNREACHABLE",e.HIDDEN="HIDDEN"}(be||(be={})),function(e){e.true="true",e.false="false"}(fe||(fe={}));var me,ge={true:{taken:!0},false:{taken:!1}},xe={true:{reachable:!0},false:{reachable:!1}};!function(e){e.CLOSED="CLOSED",e.TICKING="TICKING",e.OPEN="OPEN"}(me||(me={}));var Ee=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0,z:0},n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;Object(l.a)(this,e),this._x=void 0,this._y=void 0,this._z=void 0,"number"===typeof t?(this._x=t,this._y=n,this._z=a):(this._x=t.x,this._y=t.y,this._z=t.z)}return Object(d.a)(e,[{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"z",get:function(){return this._z}},{key:"hash",value:function(){return this.toString()}},{key:"toString",value:function(){return"[".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"round",value:function(){return new e({x:Math.round(this.x),y:Math.round(this.y),z:Math.round(this.z)})}},{key:"moduloPositive",value:function(t){return new e({x:(this.x%t+t)%t,y:(this.y%t+t)%t,z:(this.z%t+t)%t})}},{key:"subtract",value:function(t){return new e({x:this.x-t.x,y:this.y-t.y,z:this.z-t.z})}},{key:"add",value:function(t,n,a){return new e("number"===typeof t?{x:this.x+t,y:this.y+n,z:this.z+a}:{x:this.x+t.x,y:this.y+t.y,z:this.z+t.z})}},{key:"addX",value:function(t){return new e({x:this.x+t,y:this.y,z:this.z})}},{key:"addY",value:function(t){return new e({x:this.x,y:this.y+t,z:this.z})}},{key:"addZ",value:function(t){return new e({x:this.x,y:this.y,z:this.z+t})}},{key:"subtractX",value:function(t){return new e({x:this.x-t,y:this.y,z:this.z})}},{key:"subtractY",value:function(t){return new e({x:this.x,y:this.y-t,z:this.z})}},{key:"subtractZ",value:function(t){return new e({x:this.x,y:this.y,z:this.z-t})}},{key:"scale",value:function(t,n){return new e({x:(this.x-t.x)*n.x+t.x,y:(this.y-t.y)*n.y+t.y,z:(this.z-t.z)*n.z+t.z})}},{key:"equals",value:function(e){return void 0!==e&&null!==e&&(Math.abs(this.x-e.x)<N&&Math.abs(this.y-e.y)<N&&Math.abs(this.z-e.z)<N)}},{key:"notEquals",value:function(e){return!this.equals(e)}},{key:"multiply",value:function(t){return new e("number"===typeof t?{x:this.x*t,y:this.y*t,z:this.z*t}:{x:this.x*t.x,y:this.y*t.y,z:this.z*t.z})}},{key:"divide",value:function(t){return new e("number"===typeof t?{x:this.x/t,y:this.y/t,z:this.z/t}:{x:this.x/t.x,y:this.y/t.y,z:this.z/t.z})}},{key:"toJSON",value:function(){return{__type:"Vector3",x:this.x,y:this.y,z:this.z}}},{key:"pairXY",value:function(){return new A({x:this.x,y:this.y})}},{key:"toVector2",value:function(){return this.pairXY()}},{key:"withX",value:function(t){return new e({x:t,y:this.y,z:this.z})}},{key:"withY",value:function(t){return new e({x:this.x,y:t,z:this.z})}},{key:"withZ",value:function(t){return new e({x:this.x,y:this.y,z:t})}}],[{key:"IsVector3",value:function(t){return t instanceof e}},{key:"FromVector2",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new e(t.x,t.y,n)}},{key:"Deserialize",value:function(t){return t&&t.hasOwnProperty("x")&&t.hasOwnProperty("y")&&t.hasOwnProperty("z")?new e({x:t.x,y:t.y,z:t.z}):(console.error("Failed deserializing vector3"),null)}},{key:"Serialize",value:function(e){return JSON.stringify(this.SerializeToObject(e))}},{key:"SerializeToObject",value:function(e){return{x:e.x,y:e.y,z:e.z}}}]),e}();Ee.Zero=new Ee(0,0,0),Ee.One=new Ee(1,1,1);var ke=n(15);function we(e){for(var t=e.randInt,n=e.weights,a=e.behaviors,r=t/ke.a,i=Object(ke.b)(t),o=r*Object.values(n).reduce((function(e,t){return e+t})),u=0,s=Object.entries(n);u<s.length;u++){var l=Object(c.a)(s[u],2),d=l[0],p=l[1];if(o<=p)return a[d](i);o-=p}throw Error()}function Te(e){var t,n=e.randInt,a=e.weights,r=n/ke.a*Object.values(a).reduce((function(e,t){return e+t})),i=Object(S.a)(Object.entries(a));try{for(i.s();!(t=i.n()).done;){var o=Object(c.a)(t.value,2),u=o[0],s=o[1];if(r<=s)return u;r-=s}}catch(l){i.e(l)}finally{i.f()}throw Error()}function _e(e){var t=e.randInt,n=e.min,a=e.max,r=e.increment,i=void 0===r?1:r,o=e.inclusive,c=void 0===o||o,u=t/ke.a,s=Math.ceil((a-n)/i);return n+i*s===a&&!0===c&&(s+=1),n+Math.floor(u*s)*i}var Me,Ie,Re,Ce,Ue,Ne=function(){function e(t){Object(l.a)(this,e),this.config=void 0,this.config=t}return Object(d.a)(e,[{key:"create",value:function(e){var t=Object(ke.b)(e.seed+e.location.x+e.location.y+Object(ke.b)(e.seed+e.location.x+e.location.z))/ke.a,n={shortTextTarget:"\ud83d\udd12",shortTextTimer:""};if(!e.location.equals(Ee.Zero))return Ae(e.location.toVector2())<=4?t<.2?n:void 0:t<.47?n:void 0}}]),e}();function Ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A.Zero;if(!t.equals(A.Zero))return Ae(e.subtract(t));var n=e.x,a=e.y,r=0,i=Math.min(n,a,r);return n-=i,a-=i,r-=i,Math.max(n,a,r)}!function(e){e.RED0="RED0",e.RED1="RED1",e.RED2="RED2",e.DEL0="DEL0",e.DEL1="DEL1",e.DEL2="DEL2"}(Ce||(Ce={})),function(e){e.FLAT="FLAT",e.INCREASED="INCREASED"}(Ue||(Ue={}));var Le,De,Pe,Ge,ze,He={ROOT:{EMPTY:150,NO_SPEND:100,SPEND:0},STARTER_AREA_ROOT:{EMPTY:30,NO_SPEND:100,SPEND:0},DECISION_1:{SINGLE:500,DOUBLE:0},SINGLE_COLORS:(Me={},Object(te.a)(Me,Ce.RED0,100),Object(te.a)(Me,Ce.RED1,100),Object(te.a)(Me,Ce.RED2,100),Object(te.a)(Me,Ce.DEL0,10),Object(te.a)(Me,Ce.DEL1,10),Object(te.a)(Me,Ce.DEL2,10),Me),SINGLE_MODIFIERS:(Ie={},Object(te.a)(Ie,Ue.FLAT,150),Object(te.a)(Ie,Ue.INCREASED,100),Ie),STARTER_AREA_SINGLE_MODIFIERS:(Re={},Object(te.a)(Re,Ue.FLAT,400),Object(te.a)(Re,Ue.INCREASED,100),Re)},Fe=function(){function e(t){Object(l.a)(this,e),this.config=void 0,this.clusterCenterData=void 0,this.config=t,this.clusterCenterData=new H}return Object(d.a)(e,[{key:"createSingle",value:function(e){var t=Te({randInt:e.randInt,weights:He.SINGLE_COLORS}),n=Te({randInt:Object(ke.b)(e.randInt),weights:Ae(e.location.pairXY())<=4?He.STARTER_AREA_SINGLE_MODIFIERS:He.SINGLE_MODIFIERS}),a=0;return a=n===Ue.FLAT?function(e){for(var t=e.randInt,n=e.formula,a=e.plus,r=void 0===a?0:a,i=parseInt(n.split("d")[0]),o=parseInt(n.split("d")[1]),c=0,u=0;u<i;u++)c+=_e({randInt:Object(ke.b)(t+u),min:1,max:o,inclusive:!0});return c+r}({randInt:Object(ke.b)(e.randInt+1),formula:"2d6",plus:8}):_e({randInt:Object(ke.b)(e.randInt+2),min:4,max:7,increment:.5,inclusive:!0}),{attribute:Ce[t],amount:a,modifier:Ue[n]}}},{key:"createNoSpend",value:function(e){var t=this,n=e.location;return we({randInt:e.randInt,weights:He.DECISION_1,behaviors:{SINGLE:function(e){return{lines:[t.createSingle({randInt:e,location:n})]}},DOUBLE:function(e){return{lines:[t.createSingle({randInt:e,location:n}),t.createSingle({randInt:Object(ke.b)(e),location:n})]}}}})}},{key:"create",value:function(e){var t,n=this,a=e.seed,r=e.location;if(r.equals(Ee.Zero))return{lines:[]};var i,o=r.moduloPositive(3).pairXY();return(t=o.equals(new A(1,2))||o.equals(new A(2,1))?r:r.divide(3).round().multiply(3)).equals(Ee.Zero)&&(t=r),we({randInt:Object(ke.b)(a+(i=t,i.x+i.y+Object(ke.b)(i.x+i.z))),weights:Ae(e.location.pairXY())<=4?He.STARTER_AREA_ROOT:He.ROOT,behaviors:{EMPTY:function(e){return{lines:[]}},NO_SPEND:function(e){return n.createNoSpend({randInt:e,location:t})},SPEND:function(e){var a,r=n.createNoSpend({randInt:e,location:t}),i=Te({randInt:e,weights:(a={},Object(te.a)(a,Ce.RED0,100),Object(te.a)(a,Ce.RED1,100),Object(te.a)(a,Ce.RED2,100),Object(te.a)(a,Ce.DEL0,0),Object(te.a)(a,Ce.DEL1,0),Object(te.a)(a,Ce.DEL2,0),a)});return Object(L.a)(Object(L.a)({},r),{},{condition:{type:"SPEND",amount:12,attribute:Ce[i]}})}}})}}]),e}();var qe=(Le={},Object(te.a)(Le,Ce.RED0,"\ud83d\udd34"),Object(te.a)(Le,Ce.RED1,"\ud83d\udfe2"),Object(te.a)(Le,Ce.RED2,"\ud83d\udd35"),Object(te.a)(Le,Ce.DEL0,"\u2694\ufe0f"),Object(te.a)(Le,Ce.DEL1,"\ud83d\udee1"),Object(te.a)(Le,Ce.DEL2,"\u2728"),Le),We=[Ce.RED0,Ce.RED1,Ce.RED2,Ce.DEL0,Ce.DEL1,Ce.DEL2],Be=(De={"":8947848},Object(te.a)(De,Ce.RED0,16711680),Object(te.a)(De,Ce.RED1,65280),Object(te.a)(De,Ce.RED2,255),Object(te.a)(De,Ce.DEL0,5934984),Object(te.a)(De,Ce.DEL1,16761856),Object(te.a)(De,Ce.DEL2,16777027),De),Ve=(Pe={},Object(te.a)(Pe,Ce.RED0,"Red"),Object(te.a)(Pe,Ce.RED1,"Green"),Object(te.a)(Pe,Ce.RED2,"Blue"),Object(te.a)(Pe,Ce.DEL0,"Offense"),Object(te.a)(Pe,Ce.DEL1,"Defense"),Object(te.a)(Pe,Ce.DEL2,"Magic"),Pe),Xe={Red:Ce.RED0,Green:Ce.RED1,Blue:Ce.RED2,Offense:Ce.DEL0,Defense:Ce.DEL1,Magic:Ce.DEL2},Ye=(Ge={},Object(te.a)(Ge,Ue.FLAT,"+"),Object(te.a)(Ge,Ue.INCREASED,"%"),Ge),Ze=(ze={},Object(te.a)(ze,Ue.FLAT,"flat"),Object(te.a)(ze,Ue.INCREASED,"increased"),ze),Je={flat:Ue.FLAT,increased:Ue.INCREASED};function Ke(e){var t=Ve[e.attribute],n=qe[e.attribute];return e.modifier===Ue.FLAT?"+".concat(e.amount," ").concat(n," (").concat(t,")"):"".concat(e.amount,"% increased ").concat(n," (").concat(t,")")}var Qe=function(){return{orientation:"original",innerWidth:window.innerWidth,innerHeight:window.innerHeight}};function $e(e){return new A({x:Math.min(2560,((null===e||void 0===e?void 0:e.x)||1/0)-24),y:Math.min(1440,((null===e||void 0===e?void 0:e.y)||1/0)-24)})}var et,tt=function(){return{allocationStatusMap:new F([[Ee.Zero,ge.true]]),bookmarkedStatusMap:new F,exploredStatusMap:new F([[Ee.Zero,{explored:!0}]]),currentEra:{type:"B",index:0},deallocationPoints:{provided:hn[0],remaining:hn[0]}}},nt=function(e){return JSON.stringify(function(e){return Object(L.a)(Object(L.a)({},e),{},{allocationStatusMap:F.SerializeToObject(e.allocationStatusMap,Ee.SerializeToObject),bookmarkedStatusMap:F.SerializeToObject(e.bookmarkedStatusMap,Ee.SerializeToObject),exploredStatusMap:F.SerializeToObject(e.exploredStatusMap,Ee.SerializeToObject)})}(e))},at=function(e){return function(e){if(!e||!e.hasOwnProperty("allocationStatusMap")||!e.hasOwnProperty("bookmarkedStatusMap")||!e.hasOwnProperty("exploredStatusMap")||!e.hasOwnProperty("deallocationPoints")||!e.hasOwnProperty("currentEra"))return console.error("Failed deserializing PlayerSaveState: ",e),null;var t=F.Deserialize(e.allocationStatusMap,(function(e){var t=Ee.Deserialize(e);if(!t)throw new T("Failed deserializing vector3 ".concat(JSON.stringify(e)));return t}));if(!t)return console.error("Failed deserializing PlayerSaveState.allocationStatusMap: ",e),null;var n=F.Deserialize(e.bookmarkedStatusMap,(function(e){var t=Ee.Deserialize(e);if(!t)throw new T("Failed deserializing vector3 ".concat(JSON.stringify(e)));return t}));if(!n)return console.error("Failed deserializing PlayerSaveState.bookmarkedStatusMap: ",e),null;var a=F.Deserialize(e.exploredStatusMap,(function(e){var t=Ee.Deserialize(e);if(!t)throw new T("Failed deserializing vector3 ".concat(JSON.stringify(e)));return t}));return a?Object(L.a)(Object(L.a)({},e),{},{allocationStatusMap:t,bookmarkedStatusMap:n,exploredStatusMap:a}):(console.error("Failed deserializing PlayerSaveState.exploredStatusMap: ",e),null)}(JSON.parse(e))},rt="PlayerSaveState",it=function(){var e=window.localStorage.getItem(rt);return e&&at(e)||null},ot=tt,ct=function(){var e=it();return e||(console.log("Failed to load PlayerSaveState"),tt())},ut=function(e){var t=nt(e);window.localStorage.setItem(rt,t)},st=function(){window.localStorage.setItem(rt,"")};function lt(e){var t={};return t.EAST=e.addX(1),t.WEST=e.addX(-1),t.NORTHWEST=e.addY(1),t.SOUTHEAST=e.addY(-1),t.NORTHEAST=e.add(1,1,0),t.SOUTHWEST=e.add(-1,-1,0),t}function dt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;t=Array.isArray(e)?e:[e];var i=new z,o=new z;t.forEach((function(e){return i.put(e)}));for(var c=[t],u=1;u<=n&&0!==c[u-1].length;u++){c.push([]);var s,l=Object(S.a)(c[u-1]);try{for(l.s();!(s=l.n()).done;)for(var d=s.value,p=Object.values(lt(d)),v=0,h=p;v<h.length;v++){var b=h[v];b&&(i.get(b)||(i.put(b),(null===r||void 0===r?void 0:r.contains(b))?o.put(b):c[u].push(b)))}}catch(j){l.e(j)}finally{l.f()}}for(var f=[],O=a||0;O<=n&&O<=c.length;O++)c[O]&&c[O].length>0&&(f=f.concat(c[O]));return f=f.concat(o.values())}!function(e){e.NORTHWEST="NORTHWEST",e.SOUTHWEST="SOUTHWEST",e.NORTHEAST="NORTHEAST",e.SOUTHEAST="SOUTHEAST",e.EAST="EAST",e.WEST="WEST",e.UP="UP",e.DOWN="DOWN"}(et||(et={}));var pt="WorldGenState",vt=function(){function e(t){Object(l.a)(this,e),this.config=void 0,this.config=t}return Object(d.a)(e,[{key:"create",value:function(e){var t=e.seed,n=new Ne({}),a=new Oe((function(e){return n.create({seed:t,location:e})})),r=new Fe({}),i=new Oe((function(e){return r.create({seed:t,location:e})}));return{seed:t,lockMap:a,nodeContentsMap:i}}},{key:"tryLoad",value:function(e){var t=this.load();return t?this.create(t):this.create(e)}},{key:"store",value:function(e){var t=this.serialize(e);window.localStorage.setItem(pt,t)}},{key:"load",value:function(){var e=window.localStorage.getItem(pt);return e&&this.deserialize(e)||null}},{key:"deserialize",value:function(e){return this.deserializeFromObject(JSON.parse(e))}},{key:"deserializeFromObject",value:function(e){return e&&e.hasOwnProperty("seed")?Object(L.a)({},e):null}},{key:"serialize",value:function(e){return JSON.stringify(this.serializeToObject(e))}},{key:"serializeToObject",value:function(e){return{seed:e.seed}}},{key:"clear",value:function(){window.localStorage.setItem(pt,"")}}]),e}();n(252);function ht(e){var t=e.gameState,n=t.tick,r=Object(a.useState)(+new Date),i=Object(c.a)(r,2),o=i[0],u=i[1],s=Object(a.useState)([]),l=Object(c.a)(s,2),d=l[0],p=l[1],h=Object(a.useMemo)((function(){return $e(new A(t.windowState.innerWidth,t.windowState.innerHeight))}),[t.windowState.innerWidth,t.windowState.innerHeight]),b=Object(a.useMemo)((function(){return h.x>1920?new A(268,232):new A(194,168)}),[h]),f=Object(a.useMemo)((function(){var e=Math.floor(h.x*Rn/b.x-.5),t=Math.floor(h.y*Rn/b.y);return new A(e,t)}),[h,b]);Object(a.useEffect)((function(){var e=new Date,t=+e-o;if(t>30){var a="Tick ".concat(n," took ").concat(t,"ms at ").concat(e.toTimeString().split(" ")[0]);console.log(a),p((function(e){return[a].concat(Object($.a)(e))}))}u(+new Date)}),[n,o,u,p]);var O=Object(a.useCallback)((function(){console.log("tried triggered update from debug tab"),e.updaters.debug.retriggerVirtualGridDims.enqueueUpdate((function(e){return function(){console.log("force triggered update from debug tab")}}))}),[e.updaters]),j=Object(a.useCallback)((function(){var t;null===(t=e.updaters.debug.debugShowScrollbars)||void 0===t||t.enqueueUpdate((function(e){return!e}))}),[e.updaters]),S=Object(a.useCallback)((function(){e.updaters.debug.rerenderGameAreaGrid.enqueueUpdate((function(e){return function(){console.log("force triggered react rerender from debug tab")}}))}),[e.updaters]),y=Object(a.useCallback)((function(){e.updaters.debug.enableScrollJump.enqueueUpdate((function(){return!1}))}),[e.updaters]),m=Object(a.useCallback)((function(){e.updaters.debug.enableScrollJump.enqueueUpdate((function(){return!0}))}),[e.updaters]),g=Object(a.useCallback)((function(){e.updaters.debug.getForceJumpOffset.enqueueUpdate((function(e){return function(){return console.log("force triggered virtual jump only"),new A(1,2)}}))}),[e.updaters]),x=Object(a.useCallback)((function(){e.updaters.debug.getOffsetX.enqueueUpdate((function(e){var t=e()||0;return function(){return t+1}}))}),[e.updaters]),E=Object(a.useCallback)((function(){e.updaters.debug.isFlipCursored.enqueueUpdate((function(e){var t=e()||!1;return function(){return!t}}))}),[e.updaters]),k=Object(a.useCallback)((function(){e.updaters.playerUI.isTextBoxFocused.enqueueUpdate((function(e){var t=!e;return console.log({isTextBoxFocused:t}),t}))}),[e.updaters]),w=Object(a.useCallback)((function(){Jt.store(e.gameState.playerUI)}),[e.gameState]),T=Object(a.useCallback)((function(){var t=Jt.load();t&&e.updaters.playerUI.enqueueUpdate((function(){return t}))}),[e.updaters]),_=Object(a.useCallback)((function(){Jt.clear(),new vt({}).clear(),st(),e.updaters.justDisabledSave.enqueueUpdate(!0)}),[e.updaters]),M=Object(a.useCallback)((function(){st(),e.updaters.playerSave.enqueueUpdate((function(e){return ot()})),e.updaters.justDisabledSave.enqueueUpdate(!0)}),[e.updaters]),I=Object(a.useCallback)((function(){e.updaters.playerSave.currentEra.type.enqueueUpdate((function(e){return"A"===e?"B":"A"}))}),[e.updaters]);return e.hidden?Object(v.jsx)(v.Fragment,{children:" "}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:" debug tab "}),Object(v.jsxs)("div",{className:"tab-content-body",children:[Object(v.jsx)("br",{}),Object(v.jsx)("div",{children:"Recent slow renders:"}),d.slice(0,5).map((function(e,t){return Object(v.jsx)("div",{children:e},t)})),Object(v.jsx)("br",{})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{children:" virtual grid location "}),Object(v.jsxs)("div",{children:["( ",t.playerUI.virtualGridLocation.x," ,"," ",t.playerUI.virtualGridLocation.y," )"]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{children:" virtual grid dims "}),Object(v.jsxs)("div",{children:["( ",f.x," , ",f.y," )"]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{children:" buttons "}),Object(v.jsxs)("div",{className:"tab-content-body",children:[Object(v.jsx)("br",{}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{onClick:j,children:"Toggle scrollbars"})}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{onClick:O,children:"Trigger virtual grid dims rerender"})}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{onClick:S,children:"Trigger only virtual game area grid react rerender"})}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{onClick:y,children:"Disable scroll jump trigger"})}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{onClick:m,children:"Reenable scroll jump trigger"})}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{onClick:g,children:"Force virtual grid jump only"})}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{onClick:x,children:"add weird x offset to grid"})}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{onClick:E,children:"weird flip cursored state on all nodes"})}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{onClick:k,children:"toggle text box focused"})}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{onClick:w,children:"save state to local storage"})}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{onClick:T,children:"load state from local storage"})}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{onClick:_,children:"clear local storage and disable saving"})}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{onClick:M,children:"clear save"})}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{onClick:I,children:"toggle era"})})]})]})}var bt=r.a.memo(ft);function ft(e){var t=e.gameState,n=e.updaters,r=Object(a.useState)(!1),i=Object(c.a)(r,2),o=i[0],u=i[1],s=Object(a.useState)(""),l=Object(c.a)(s,2),d=l[0],p=l[1],h=Object(a.useCallback)((function(){n.playerUI.isTextBoxFocused.enqueueUpdate(!0)}),[n]),b=Object(a.useCallback)((function(){n.playerUI.isTextBoxFocused.enqueueUpdate(!1)}),[n]),f=Object(a.useCallback)((function(){n.playerUI.strategicSearch.highlight1.enqueueUpdate((function(){return{value:d}}))}),[n,d]),O=Object(a.useCallback)((function(){p(""),n.playerUI.strategicSearch.highlight1.enqueueUpdate((function(){return{value:""}}))}),[n]),j=Object(a.useCallback)((function(e,t){n.playerUI.strategicSearch.colors.enabled.enqueueUpdate((function(t){return e}))}),[n]);return t.playerUI.isPixiHidden?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:"Strategic view is not open!"}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{children:"Click (hotkey: b) to toggle strategic view."})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{children:[o?"Custom":"Basic"," search"]}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{className:"tab-content-body",children:[Object(v.jsxs)("div",{children:["Colors enabled?",Object(v.jsx)(St,{labels:["Always","Only unallocated","No"],values:["Yes","Only unallocated","No"],defaultValue:t.playerUI.strategicSearch.colors.enabled,onChange:j})]}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{children:["Symbols: ",Object(v.jsx)(Ot,{updateTextInputValue:p,attribute:Ce.RED0}),Object(v.jsx)(Ot,{updateTextInputValue:p,attribute:Ce.RED1}),Object(v.jsx)(Ot,{updateTextInputValue:p,attribute:Ce.RED2}),Object(v.jsx)(Ot,{updateTextInputValue:p,attribute:Ce.DEL0}),Object(v.jsx)(Ot,{updateTextInputValue:p,attribute:Ce.DEL1}),Object(v.jsx)(Ot,{updateTextInputValue:p,attribute:Ce.DEL2}),Object(v.jsx)(jt,{updateTextInputValue:p,icon:"*",insertedText:"[*] "}),Object(v.jsx)("br",{}),Object(v.jsx)(jt,{updateTextInputValue:p,id:Ue.FLAT,icon:Ye[Ue.FLAT],insertedText:"["+Ze[Ue.FLAT]+"] "}),Object(v.jsx)(jt,{updateTextInputValue:p,id:Ue.INCREASED,icon:Ye[Ue.INCREASED],insertedText:"["+Ze[Ue.INCREASED]+"] "}),Object(v.jsx)(jt,{updateTextInputValue:p,id:"!taken",icon:"Unallocated",insertedText:"![taken] "}),Object(v.jsx)(jt,{updateTextInputValue:p,id:"!locked",icon:"Unlocked",insertedText:"![locked] "}),Object(v.jsx)(jt,{updateTextInputValue:p,id:"locked",icon:"Locked",insertedText:"[locked] "})]}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{children:["Highlight:"," ",Object(v.jsx)("input",{type:"text",onFocus:h,onChange:function(e){p(e.target.value)},onBlur:b,value:d}),Object(v.jsx)("button",{onClick:f,children:"\ud83d\udd0e"}),Object(v.jsx)("button",{onClick:O,children:"\ud83d\udeab"})]}),o?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{children:["Highlight 2: ",Object(v.jsx)("input",{type:"text"}),Object(v.jsx)("button",{children:"Apply"}),Object(v.jsx)("button",{children:"Cancel"})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{children:"Filter:"}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{children:["Show if: ",Object(v.jsx)("input",{type:"text"}),Object(v.jsx)("button",{children:"Apply"}),Object(v.jsx)("button",{children:"Cancel"})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{children:"Color:"}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{children:["Grayscale by: ",Object(v.jsx)("input",{type:"text"}),Object(v.jsx)("button",{children:"Apply"}),Object(v.jsx)("button",{children:"Cancel"})]}),Object(v.jsxs)("div",{children:["Color by: ",Object(v.jsx)("input",{type:"text"}),Object(v.jsx)("button",{children:"Apply"}),Object(v.jsx)("button",{children:"Cancel"})]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{children:"Shape:"}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{children:["Shape = | if: ",Object(v.jsx)("input",{type:"text"}),Object(v.jsx)("button",{children:"Apply"}),Object(v.jsx)("button",{children:"Cancel"})]}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{children:[Object(v.jsx)("input",{type:"text"}),Object(v.jsx)("button",{children:"Save config"})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("input",{type:"text"}),Object(v.jsx)("button",{children:"Load config"})]}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{children:"Reset to defaults"})}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{onClick:function(){u(!1)},children:"Use basic search"})})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("br",{}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{onClick:function(){u(!0)},children:"Use custom search"})})]})]})]})}function Ot(e){return Object(v.jsx)(jt,{updateTextInputValue:e.updateTextInputValue,insertedText:"["+Ve[e.attribute]+"] ",icon:qe[e.attribute]})}function jt(e){return Object(v.jsx)("button",{onMouseDown:function(e){e.preventDefault()},onPointerDown:function(e){e.preventDefault()},onClick:function(t){t.preventDefault(),e.updateTextInputValue((function(t){return t+e.insertedText}))},children:e.icon})}function St(e){var t=e.labels,n=e.values,r=e.defaultValue,i=e.onChange,o=r?n.indexOf(r):-1,u=Object(a.useState)(o),s=Object(c.a)(u,2),l=s[0],d=s[1],p=Math.min(t.length,n.length),h=Array(p).fill(0).map((function(e,a){return Object(v.jsx)("button",{disabled:a===l,onClick:function(e){d(a),i(n[a],e)},children:t[a]},a)}));return Object(v.jsx)(v.Fragment,{children:h})}function yt(e){return{playerSave:{allocationStatusMap:(t=e).playerSave.allocationStatusMap,bookmarkedStatusMap:t.playerSave.bookmarkedStatusMap,currentEra:t.playerSave.currentEra,deallocationPoints:t.playerSave.deallocationPoints},computed:{reachableStatusMap:t.computed.reachableStatusMap,fogOfWarStatusMap:t.computed.fogOfWarStatusMap,accessibleStatusMap:t.computed.accessibleStatusMap},worldGen:{lockMap:t.worldGen.lockMap}};var t}var mt=k(yt),gt=function(){function e(t){Object(l.a)(this,e),this.updaters=void 0,this.updaters=t}return Object(d.a)(e,[{key:"enqueueAction",value:function(e){var t=e.nodeLocation;this.updaters.enqueueUpdate((function(e,n){if("A"===n.playerSave.currentEra.type){var a;if(!0===(null===(a=e.playerSave.bookmarkedStatusMap.get(t))||void 0===a?void 0:a.bookmarked)){var r=e.playerSave.bookmarkedStatusMap.clone();r.remove(t);var i=Object(L.a)(Object(L.a)({},e.playerSave),{},{bookmarkedStatusMap:r});return Object(L.a)(Object(L.a)({},e),{},{playerSave:i})}return e}if("B"===n.playerSave.currentEra.type){var o,c=null;if(!0===(null===(o=e.playerSave.allocationStatusMap.get(t))||void 0===o?void 0:o.taken)){var u=e.playerSave.allocationStatusMap.clone();u.remove(t);var s=Object(L.a)({},e.playerSave.deallocationPoints);s.remaining-=1;var l=Object(L.a)(Object(L.a)({},e.playerSave),{},{allocationStatusMap:u,deallocationPoints:s});c=c||Object(L.a)({},e),c=Object(L.a)(Object(L.a)({},c),{},{playerSave:l})}var d=null;if(Object.values(lt(t)).filter((function(e){var t,a,r,i;return!0===(null===(t=n.computed.reachableStatusMap)||void 0===t||null===(a=t.get(e))||void 0===a?void 0:a.reachable)&&!0!==(null===(r=n.playerSave.allocationStatusMap)||void 0===r||null===(i=r.get(e))||void 0===i?void 0:i.taken)})).forEach((function(a){var r,i;0===Object.values(lt(a)).filter((function(e){var a;return!0===(null===(a=n.playerSave.allocationStatusMap.get(e))||void 0===a?void 0:a.taken)&&e.notEquals(t)})).length&&(!0===(null===(r=e.computed.reachableStatusMap)||void 0===r||null===(i=r.get(a))||void 0===i?void 0:i.reachable)&&(d=d||e.computed.reachableStatusMap.clone()).remove(a))})),d){var p=Object(L.a)(Object(L.a)({},e.computed),{},{reachableStatusMap:d});c=c||Object(L.a)({},e),c=Object(L.a)(Object(L.a)({},c),{},{computed:p})}return c||e}throw new x}))}},{key:"run",value:function(t,n){var a=e.checkAction(t,n);return a&&this.enqueueAction(t),a}}],[{key:"checkAction",value:function(e,t){var n=e.nodeLocation;if("A"===t.playerSave.currentEra.type){var a;if(!0===(null===(a=t.playerSave.allocationStatusMap.get(e.nodeLocation))||void 0===a?void 0:a.taken))return console.log("can't do that, can't unbookmark a taken node",e),!1;var r=t.playerSave.bookmarkedStatusMap.get(n);return!0===(null===r||void 0===r?void 0:r.bookmarked)||(console.log("can't do that, can't unbookmark something if it's not bookmarked"),!1)}if("B"!==t.playerSave.currentEra.type)throw new x;var i=function(){if(t.playerSave.deallocationPoints.remaining<=0)return console.log("can't do that, out of deallocation points"),{v:!1};var e=t.playerSave.allocationStatusMap.get(n);if(!0!==(null===e||void 0===e?void 0:e.taken))return console.log("can't do that, can't deallocate something if it's not allocated"),{v:!1};var a=Object.values(lt(n)).filter((function(e){var n;return!0===(null===(n=t.playerSave.allocationStatusMap.get(e))||void 0===n?void 0:n.taken)}));if(a.length<=1)return{v:!0};for(var r=a[0],i=new z(a.slice(1)),o=new z,c=[r];c.length>0;){var u=c.shift();if(u&&!o.get(u)){if(o.put(u),i.remove(u),0===i.size())return{v:!0};Object.values(lt(u)).filter((function(e){var a;return!0===(null===(a=t.playerSave.allocationStatusMap.get(e))||void 0===a?void 0:a.taken)&&e.notEquals(n)})).forEach((function(e){return c.push(e)}))}}return i.size()>0?(console.log("can't do that, tree would be disconnected"),{v:!1}):{v:!0}}();if("object"===typeof i)return i.v}}]),e}(),xt="The starting node.";function Et(e){var t,n=e.location,a=e.gameState.computed,r=a.fogOfWarStatusMap,i=a.reachableStatusMap,o=a.accessibleStatusMap,c=e.gameState.playerSave,u=c.allocationStatusMap,s=c.bookmarkedStatusMap,l=c.currentEra,d=e.gameState.worldGen,p=d.lockMap,h=d.nodeContentsMap,b=(null===r||void 0===r?void 0:r.get(n))||"obscured",f=null===i||void 0===i?void 0:i.get(n),O=u.get(n),j=s.get(n)||{bookmarked:!1},S=(null===o||void 0===o?void 0:o.get(n))||{accessible:!1},y=(null===O||void 0===O?void 0:O.taken)||"A"===l.type&&(null===j||void 0===j?void 0:j.bookmarked)?be.TAKEN_OR_MARKED:(null===f||void 0===f?void 0:f.reachable)?be.AVAILABLE:"revealed"===b?be.UNREACHABLE:be.HIDDEN,m=n.hash(),g=p.get(n),x=null===(t=e.gameState.computed.lockStatusMap)||void 0===t?void 0:t.get(n),E=!!g&&x!==me.OPEN,k=h.get(n),w="";n.equals(Ee.Zero)?w="\ud83d\udea9":k.lines[0]?(w+=Ye[k.lines[0].modifier],w+=qe[k.lines[0].attribute]):w="",k.lines[1]&&k.lines[0].attribute!==k.lines[1].attribute&&(w+=qe[k.lines[1].attribute]);var T="";k.condition&&(T="-"+qe[k.condition.attribute]);var _=Object(v.jsxs)(v.Fragment,{children:[" ",y.toString()]});E?y===be.AVAILABLE?_=Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:"LOCKED"}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{children:"Locks are currently WIP!"})]}):y===be.UNREACHABLE&&(_=Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{children:["LOCKED, ",y.toString()]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{children:"Locks are currently WIP!"})]})):y===be.AVAILABLE?_=Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:y.toString()}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{children:"Click to allocate."})]}):n.equals(Ee.Zero)&&(_=Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:y.toString()}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{children:xt})]}));var M=Object(v.jsx)("div",{children:_});return k.lines.length&&S.accessible&&(M=Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:_}),Object(v.jsx)("br",{}),kt(k)]})),{nodeLocation:n,shortText:T?Object(v.jsxs)(v.Fragment,{children:[w,Object(v.jsx)("br",{}),T]}):Object(v.jsx)(v.Fragment,{children:w}),toolTipText:M,nodeContents:k,fullText:Object(v.jsx)(v.Fragment,{children:" "}),status:y,lockData:g?Object(L.a)(Object(L.a)({},g),{},{status:x}):void 0,id:m,statuses:{bookmarkedStatus:j,accessibleStatus:S,fogOfWarStatus:b}}}function kt(e){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:e.lines[0]&&Ke(e.lines[0])}),Object(v.jsx)("div",{children:e.lines[1]&&Ke(e.lines[1])}),Object(v.jsx)("div",{children:e.condition&&(t=e.condition,"SPEND: ".concat(t.amount," ").concat(Ve[t.attribute]))})]});var t}var wt=r.a.memo(Tt);function Tt(e){var t,n,r,i,o,c,u,s,l,d,p,h,b,f=e.gameState,O=f.playerUI.cursoredNodeLocation,j=Object(a.useMemo)((function(){return un(f)}),sn(f)),S=Object(a.useMemo)((function(){return yt(f)}),mt(f)),y=Object(a.useCallback)((function(t){t.preventDefault(),O&&e.actions.allocateNode.run({nodeLocation:O,newStatus:ge.true},j)}),[e.actions.allocateNode,O,j]),m=Object(a.useMemo)((function(){if(O)return dn.checkAction({nodeLocation:O,newStatus:{taken:!0}},j)}),[O,j]),g=Object(a.useCallback)((function(t){t.preventDefault(),O&&e.actions.deallocateNode.run({nodeLocation:O},S)}),[e.actions.deallocateNode,O,S]),x=Object(a.useMemo)((function(){if(O)return gt.checkAction({nodeLocation:O},S)}),[O,S]),E=Object(a.useCallback)((function(t){t.preventDefault(),O&&(e.updaters.playerUI.virtualGridLocation.enqueueUpdate((function(e){return O})),e.updaters.playerUI.triggerScrollRecenterCb.enqueueUpdate((function(){return function(){console.log("zoomed to location: ",{location:O})}})))}),[e.updaters,O]);if(null===O)return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:"Nothing selected!"}),Object(v.jsx)("div",{children:Object(v.jsx)("br",{})}),Object(v.jsx)("div",{children:"Hover and click the"}),Object(v.jsx)("div",{children:" question mark tooltip to"}),Object(v.jsx)("div",{children:"select a node."})]});var k=new A(O.x-O.y/2,O.y*Math.sqrt(3)/2);k=new A(Math.round(100*k.x)/100,Math.round(100*k.y)/100);var w=(null===(t=f.playerSave.allocationStatusMap)||void 0===t||null===(n=t.get(O))||void 0===n?void 0:n.taken)||!1,T=(null===(r=f.playerSave.bookmarkedStatusMap)||void 0===r||null===(i=r.get(O))||void 0===i?void 0:i.bookmarked)||!1,_=(null===(o=f.playerSave.exploredStatusMap)||void 0===o||null===(c=o.get(O))||void 0===c?void 0:c.explored)||!1,M=(null===(u=f.computed.reachableStatusMap)||void 0===u||null===(s=u.get(O))||void 0===s?void 0:s.reachable)||!1,I=(null===(l=f.computed.fogOfWarStatusMap)||void 0===l?void 0:l.get(O))||"obscured",R=(null===(d=f.computed.accessibleStatusMap)||void 0===d||null===(p=d.get(O))||void 0===p?void 0:p.accessible)||!1,C=I&&(null===(h=f.worldGen.lockMap)||void 0===h?void 0:h.get(O))||null,U=(null===(b=f.computed.lockStatusMap)||void 0===b?void 0:b.get(O))||null,N=!!C&&U!==me.OPEN,L="";L=O.equals(Ee.Zero)?xt:I?N?"A locked node.":"An allocatable node.":"Unknown.";var D="revealed"===I&&f.worldGen.nodeContentsMap.get(O)||null,P=(null===D||void 0===D?void 0:D.lines[0])?kt(D):"empty";return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"tab-content-body",children:[Object(v.jsxs)("div",{children:["Location: ( ",k.x," , ",k.y," ) , z-layer = ",O.z]}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{children:Object(v.jsxs)("button",{onClick:E,children:["Recenter on here (hotkey: r, ","\\",")"]})}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{children:["Description: ",L]}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{children:["Taken?: ",w.toString()]}),Object(v.jsxs)("div",{children:["Reachable?: ",M.toString()]}),Object(v.jsxs)("div",{children:["Visible?: ",I.toString()]}),Object(v.jsxs)("div",{children:["Bookmarked?: ",T.toString()]}),Object(v.jsxs)("div",{children:["Explored?: ",_.toString()]}),Object(v.jsxs)("div",{children:["Accessible?: ",R.toString()]}),I?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{children:["Locked?: ",N.toString()]}),Object(v.jsxs)("div",{children:["Can be allocated?: ",(!!m).toString()]}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{children:["Contents: ",P]}),Object(v.jsx)("br",{}),Object(v.jsx)("button",{disabled:!m,onClick:y,children:"Allocate (hotkey: spacebar)"}),Object(v.jsx)("button",{disabled:!x,onClick:g,children:"Deallocate (hotkey: backspace)"})]}):Object(v.jsx)(v.Fragment,{children:" "})]})})}function _t(e){var t=Object(a.useMemo)((function(){return Mt(e.gameState)}),It(e.gameState));return Object(v.jsx)(Rt,{gameState:t,updaters:e.updaters})}function Mt(e){return{playerSave:{allocationStatusMap:(t=e).playerSave.allocationStatusMap,bookmarkedStatusMap:t.playerSave.bookmarkedStatusMap,currentEra:t.playerSave.currentEra},worldGen:{nodeContentsMap:t.worldGen.nodeContentsMap}};var t}var It=k(Mt),Rt=r.a.memo(Ct);function Ct(e){var t=e.gameState,n=Object(a.useState)(!1),r=Object(c.a)(n,2),i=r[0],o=r[1],u=function(e,t){var n=Object.entries(e).map((function(n){var a=Object(c.a)(n,2),r=a[0],i=a[1];return[r,t(i,r,e)]}));return Object.fromEntries(n)}(Ut({gameState:t}),(function(e,t){var n=e.modifiers,a=e.total,r=Ve[t],o=qe[t];return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("details",{className:"details",open:i,children:[Object(v.jsxs)("summary",{children:[" ",o," (",r,"):"]}),Object(v.jsxs)("div",{className:"details-body",children:[Object(v.jsxs)("div",{children:["+: ",n[Ue.FLAT]]}),Object(v.jsxs)("div",{children:["%: ",n[Ue.INCREASED]]}),Object(v.jsxs)("div",{className:"final-total",children:["Total: ",a]})]})]})})}));return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:"Current stats"}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{onClick:function(){o(!0)},children:"Open all"})," ",Object(v.jsx)("button",{onClick:function(){o(!1)},children:"Close all"})]}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{className:"tab-content-body",children:[u[Ce.RED0],u[Ce.RED1],u[Ce.RED2],u[Ce.DEL0],u[Ce.DEL1],u[Ce.DEL2]]})]})}function Ut(e){var t=e.gameState;return g(Ce,(function(e){var n=g(Ue,(function(n){var a=t.playerSave.allocationStatusMap.entries().filter((function(e){var t=Object(c.a)(e,2);t[0];return!0===t[1].taken})).map((function(e){return e[0]}));"A"===t.playerSave.currentEra.type&&(a=a.concat(t.playerSave.bookmarkedStatusMap.entries().filter((function(e){var t=Object(c.a)(e,2);t[0];return!0===t[1].bookmarked})).map((function(e){return e[0]}))));var r=a.map((function(a){var r,i,o,c,u=t.worldGen.nodeContentsMap.get(a);return(null===(r=u.lines[0])||void 0===r?void 0:r.attribute)===e&&(null===(i=u.lines[0])||void 0===i?void 0:i.modifier)===n?u.lines[0].amount:(null===(o=u.lines[1])||void 0===o?void 0:o.attribute)===e&&(null===(c=u.lines[1])||void 0===c?void 0:c.modifier)===n?u.lines[1].amount:0})).reduce((function(e,t){return e+t}));return[n,r]})),a=Math.round(n[Ue.FLAT]*(1+.01*n[Ue.INCREASED]));return[e,{modifiers:n,total:a}]}))}function Nt(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:"How to play the game"}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{className:"tab-content-body",children:[Object(v.jsx)("div",{children:"CONTROLS"}),Object(v.jsx)("br",{}),Object(v.jsx)(At,{children:"Use hotkey: t, y to open and close the tabs."}),Object(v.jsx)(At,{children:"Use hotkey: b to toggle strategic view."}),Object(v.jsx)(At,{children:'Move the tabs around using "send left/right" buttons.'}),Object(v.jsx)(At,{children:"Open the Stats tab."}),Object(v.jsx)(At,{children:"Open the Quests tab."}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{children:"GAME"}),Object(v.jsx)("br",{}),Object(v.jsx)(At,{children:"Hover over some nodes."}),Object(v.jsx)(At,{children:"Left click on an available node to allocate it."}),Object(v.jsx)(At,{children:"Left click on any other node to view detailed info."}),Object(v.jsx)(At,{children:"Scroll around to see what other nodes are visible."}),Object(v.jsx)(At,{children:"Use keyboard controls (hotkeys: ijklmun) to move around the map, and (hotkeys: wasd) to pan around."}),Object(v.jsx)(At,{children:"Click (hotkey: r, \\) to recenter the view on your selected node."}),Object(v.jsx)(At,{children:"Close the selected node tab."}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{children:"STRATEGIC VIEW"}),Object(v.jsx)("br",{}),Object(v.jsx)(At,{children:"Open the strategic view tab while strategic view is open."}),Object(v.jsx)(At,{children:"Toggle colors."}),Object(v.jsx)(At,{children:"Try adding an attribute to the search bar by clicking a symbol."}),Object(v.jsx)(At,{children:"Click search to highlight those attributes."}),Object(v.jsx)(At,{children:"Click cancel to reset the search."})]})]})}function At(e){return Object(v.jsxs)("div",{children:[Object(v.jsx)("input",{type:"checkbox"})," ",e.children]})}function Lt(e){var t=Object(a.useMemo)((function(){return Mt(e.gameState)}),It(e.gameState));return Object(v.jsx)(Pt,{gameState:t})}var Dt,Pt=r.a.memo(Gt);function Gt(e){var t,n,a,r,i=Ut({gameState:e.gameState});We.map((function(e){return{attribute:e,stats:i[e]}})).forEach((function(e){var a=e.attribute,r=e.stats.total;(void 0===n||r>n)&&(t=a,n=r)})),We.map((function(e){return{attribute:e,stats:i[e]}})).forEach((function(e){var n=e.attribute,i=e.stats.total;n!==t&&(void 0===r||i>r)&&(a=n,r=i)}));var o=n>=1e3&&r>=400;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:"Quests info"}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{className:"tab-content-body",children:[Object(v.jsx)("div",{children:"Ultimate goal:"}),Object(v.jsxs)("ol",{children:[Object(v.jsxs)("li",{children:[Object(v.jsx)("div",{children:"1000 of any attribute:"}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{children:["Progress: ",Object(v.jsx)("meter",{value:n,min:0,max:1e3})," ",n+" "+qe[t]+" / 1000"]}),Object(v.jsx)("br",{})]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("div",{children:"400 of any other attribute:"}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{children:["Progress: ",Object(v.jsx)("meter",{value:r,min:0,max:400})," ",r+" "+qe[a]+" / 400"]}),Object(v.jsx)("br",{}),!!o&&Object(v.jsx)("div",{children:"YOU WIN!!!"})]})]}),Object(v.jsx)("div",{children:"Other goals: WIP"})]})]})}function zt(e){var t,n=e.tabName,a=(t={},Object(te.a)(t,Dt.EMPTY,Object(v.jsx)(Ft,{})),Object(te.a)(t,Dt.SELECTED_NODE,Object(v.jsx)(wt,{gameState:e.gameState,updaters:e.updaters,actions:e.actions})),Object(te.a)(t,Dt.STATS,Object(v.jsx)(_t,{gameState:e.gameState,updaters:e.updaters})),Object(te.a)(t,Dt.QUESTS,Object(v.jsx)(Lt,{gameState:e.gameState})),Object(te.a)(t,Dt.STRATEGIC_VIEW,Object(v.jsx)(bt,{gameState:e.gameState,updaters:e.updaters})),Object(te.a)(t,Dt.DEBUG,Object(v.jsx)(ht,{gameState:e.gameState,updaters:e.updaters,hidden:n!==Dt.DEBUG})),Object(te.a)(t,Dt.HELP,Object(v.jsx)(Nt,{})),t);return Object(v.jsx)(Ht,{tabComponents:a,tabName:n})}function Ht(e){var t=e.tabName,n=Object.keys(Dt);return Object(v.jsx)(v.Fragment,{children:n.map((function(n){return Object(v.jsx)("div",{hidden:n!==t,children:e.tabComponents[n]},n)}))})}!function(e){e.EMPTY="EMPTY",e.SELECTED_NODE="SELECTED_NODE",e.STATS="STATS",e.QUESTS="QUESTS",e.DEBUG="DEBUG",e.HELP="HELP",e.STRATEGIC_VIEW="STRATEGIC_VIEW"}(Dt||(Dt={}));var Ft=r.a.memo(qt);function qt(e){return console.log("got here empty tab content"),Object(v.jsx)("div",{children:"Nothing here!"})}var Wt={left:[Dt.HELP],right:[Dt.SELECTED_NODE,Dt.STATS,Dt.QUESTS,Dt.DEBUG,Dt.STRATEGIC_VIEW]},Bt=function(){return{triggerScrollRecenterCb:function(){},tabs:{left:{tabs:Wt.left,activeIndex:0},right:{tabs:Wt.right,activeIndex:0}},strategicSearch:{colors:{enabled:"Only unallocated"},highlight1:{value:""}},isPixiHidden:!0,virtualGridLocation:Ee.Zero,cursoredNodeLocation:null,isSidebarOpen:!1,isLeftSidebarOpen:!0,isRightSidebarOpen:!1,isTextBoxFocused:!1}},Vt=function(e){return JSON.stringify(function(e){return Object(L.a)(Object(L.a)({},e),{},{triggerScrollRecenterCb:void 0,virtualGridLocation:Ee.SerializeToObject(e.virtualGridLocation)})}(e))},Xt=function(e){return function(e){if(!e||!e.hasOwnProperty("isPixiHidden")||!e.hasOwnProperty("virtualGridLocation")||!e.hasOwnProperty("cursoredNodeLocation")||!e.hasOwnProperty("isSidebarOpen")||!e.hasOwnProperty("isLeftSidebarOpen")||!e.hasOwnProperty("isRightSidebarOpen")||!e.hasOwnProperty("isTextBoxFocused")||!e.hasOwnProperty("tabs")||!e.hasOwnProperty("strategicSearch"))return console.error("Failed deserializing PlayerUIState: ",e),null;var t=e.strategicSearch;if(!t||!t.hasOwnProperty("colors")||!t.hasOwnProperty("highlight1"))return console.error("Failed deserializing PlayerUIState: ",e),null;var n=Ee.Deserialize(e.virtualGridLocation);if(!n)return console.error("Failed deserializing PlayerUIState: ",e),null;var a=Ee.Deserialize(e.cursoredNodeLocation);return Object(L.a)(Object(L.a)({},e),{},{virtualGridLocation:n,cursoredNodeLocation:a,triggerScrollRecenterCb:function(){}})}(JSON.parse(e))},Yt="PlayerUIState",Zt=function(){var e=window.localStorage.getItem(Yt);return e&&Xt(e)||null},Jt={new:Bt,serialize:Vt,deserialize:Xt,tryLoad:function(){var e=Zt();return e||(console.log("Failed to load PlayerUIState"),Bt())},load:Zt,store:function(e){var t=Vt(e);window.localStorage.setItem(Yt,t)},clear:function(){window.localStorage.setItem(Yt,"")}};function Kt(e){var t=e.gameState,n=Object(a.useCallback)((function(){t.justDisabledSave?console.log("skipping save because it was just disabled!"):(Jt.store(t.playerUI),ut(t.playerSave),new vt({}).store(t.worldGen))}),[t.playerUI,t.justDisabledSave,t.worldGen,t.playerSave]);return Object(a.useEffect)((function(){t.intent.newIntent.HARD_REFRESH_PAGE&&(Jt.clear(),new vt({}).clear(),st(),window.location.reload())}),[t.intent.newIntent.HARD_REFRESH_PAGE]),Object(a.useEffect)((function(){return window.onbeforeunload=n,function(){window.onbeforeunload=null}})),Object(v.jsx)(v.Fragment,{children:" "})}function Qt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=e||en,n=new vt({}),a={tick:0,worldGen:n.tryLoad({seed:t}),playerSave:ct(),playerUI:Jt.tryLoad(),computed:{lockStatusMap:null,fogOfWarStatusMap:null,reachableStatusMap:null,accessibleStatusMap:null},intent:I(),windowState:Qe(),debug:{retriggerVirtualGridDims:function(){},debugShowScrollbars:!1,rerenderGameAreaGrid:function(){},enableScrollJump:!0,getForceJumpOffset:function(){},getOffsetX:function(){},isFlipCursored:function(){}},justDisabledSave:!1};return nn(a),a}var $t,en=103043,tn=function(){function e(t){Object(l.a)(this,e),this.config=void 0,this.config=t}return Object(d.a)(e,[{key:"loadOrCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return Qt(e)}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=e||en,n=new vt({}),a={tick:0,worldGen:n.create({seed:t}),playerSave:tt(),playerUI:Jt.new(),computed:{lockStatusMap:null,fogOfWarStatusMap:null,reachableStatusMap:null,accessibleStatusMap:null},intent:I(),windowState:Qe(),debug:{retriggerVirtualGridDims:function(){},debugShowScrollbars:!1,rerenderGameAreaGrid:function(){},enableScrollJump:!0,getForceJumpOffset:function(){},getOffsetX:function(){},isFlipCursored:function(){}},justDisabledSave:!1};return nn(a),a}}]),e}();function nn(e){return e.computed.lockStatusMap=new H,e.computed.fogOfWarStatusMap=new H,e.computed.reachableStatusMap=new H,e.computed.accessibleStatusMap=new H,e.computed.lockStatusMap=an(e.computed.lockStatusMap,e),e.computed.accessibleStatusMap=rn({result:e.computed.accessibleStatusMap,prev:e.computed.accessibleStatusMap,prevGameState:e}),e.computed.fogOfWarStatusMap=function(e,t){if(!e)return e;var n=null,a=[];"A"===t.playerSave.currentEra.type&&(a=a.concat(t.playerSave.allocationStatusMap.entries().filter((function(e){var t=Object(c.a)(e,2);t[0];return!0===t[1].taken})).map((function(e){return e[0]}))));return(a=a.concat(t.playerSave.exploredStatusMap.entries().filter((function(e){var t=Object(c.a)(e,2);t[0];return!0===t[1].explored})).map((function(e){return e[0]})))).forEach((function(a){n=cn({result:n,prev:n||e,prevGameState:t,nodeLocation:a})})),n||e}(e.computed.fogOfWarStatusMap,e),e.computed.reachableStatusMap=function(e,t){if(!e)return e;var n=null;return t.playerSave.allocationStatusMap.entries().filter((function(e){var t=Object(c.a)(e,2);t[0];return!0===t[1].taken})).map((function(e){return e[0]})).forEach((function(a){n=on({result:n,prev:e,prevGameState:t,nodeLocation:a})})),n||e}(e.computed.reachableStatusMap,e),e}function an(e,t){if(!e)return e;var n,a=null,r=Object(S.a)(t.worldGen.lockMap.entries());try{for(r.s();!(n=r.n()).done;){var i=Object(c.a)(n.value,2),o=i[0];if(i[1]){var u=me.TICKING;e.get(o)!==u&&(a=a||e.clone()).put(o,u)}}}catch(s){r.e(s)}finally{r.f()}return a||e}function rn(e){var t=e.prev,n=e.prevGameState,a=e.result,r={contains:function(e){var t,a=n.worldGen.lockMap.get(e),r=null===(t=n.computed.lockStatusMap)||void 0===t?void 0:t.get(e);return!(!a||r===me.OPEN)}};return dt(Ee.Zero,vn[n.playerSave.currentEra.index],0,r).forEach((function(e){var n;!0!==(null===(n=t.get(e))||void 0===n?void 0:n.accessible)&&(a=a||t.clone()).put(e,{accessible:!0})})),a}function on(e){var t=e.prev,n=e.prevGameState,a=e.nodeLocation,r=e.result;return dt(a,1).forEach((function(e){var a,i;"revealed"===(null===(a=n.computed.fogOfWarStatusMap)||void 0===a?void 0:a.get(e))&&!0!==(null===(i=t.get(e))||void 0===i?void 0:i.reachable)&&(r=r||t.clone()).put(e,xe.true)})),r}function cn(e){var t=e.prev,n=e.prevGameState,a=e.nodeLocation,r=e.result;"revealed"!==(r||t).get(a)&&(r=r||t.clone()).put(a,"revealed"),dt(a,1).forEach((function(e){var a,i;!0===(null===(a=n.computed.accessibleStatusMap)||void 0===a||null===(i=a.get(e))||void 0===i?void 0:i.accessible)&&"revealed"!==(r||t).get(e)&&(r=r||t.clone()).put(e,"revealed")}));var i={contains:function(e){var t,a,r,i=n.worldGen.lockMap.get(e),o=null===(t=n.computed.lockStatusMap)||void 0===t?void 0:t.get(e),c=!!i&&o!==me.OPEN,u=!!(null===(a=n.computed.accessibleStatusMap)||void 0===a||null===(r=a.get(e))||void 0===r?void 0:r.accessible);return!(!c&&u)}};return dt(a,ln,0,i).forEach((function(e){var a,i;!0===(null===(a=n.computed.accessibleStatusMap)||void 0===a||null===(i=a.get(e))||void 0===i?void 0:i.accessible)&&"revealed"!==((r||t).get(e)||"obscured")&&(r=r||t.clone()).put(e,"revealed")})),dt(a,ln+1,ln+1,i).forEach((function(e){var a,o;!0===(null===(a=n.computed.accessibleStatusMap)||void 0===a||null===(o=a.get(e))||void 0===o?void 0:o.accessible)&&(i.contains(e)?"revealed"!==((r||t).get(e)||"obscured")&&(r=r||t.clone()).put(e,"revealed"):"obscured"===((r||t).get(e)||"obscured")&&(r=r||t.clone()).put(e,"hinted"))})),r}function un(e){return{playerSave:{allocationStatusMap:(t=e).playerSave.allocationStatusMap,bookmarkedStatusMap:t.playerSave.bookmarkedStatusMap,currentEra:t.playerSave.currentEra},computed:{reachableStatusMap:t.computed.reachableStatusMap,fogOfWarStatusMap:t.computed.fogOfWarStatusMap,accessibleStatusMap:t.computed.accessibleStatusMap},worldGen:{lockMap:t.worldGen.lockMap}};var t}var sn=k(un),ln=1/0,dn=function(){function e(t){Object(l.a)(this,e),this.updaters=void 0,this.updaters=t}return Object(d.a)(e,[{key:"enqueueAction",value:function(e){var t,n,a,r=e.nodeLocation;this.updaters.playerSave.allocationStatusMap.enqueueUpdate((function(e,t){if("B"===t.playerSave.currentEra.type){var n;if(!0!==(null===(n=e.get(r))||void 0===n?void 0:n.taken)){var a=e.clone();return a.put(r,{taken:!0}),a}return e}return e})),null===(t=this.updaters.computed.lockStatusMap)||void 0===t||t.enqueueUpdate((function(e,t){return"B"===t.playerSave.currentEra.type?an(e,t):e})),null===(n=this.updaters.computed.reachableStatusMap)||void 0===n||n.enqueueUpdate((function(e,t){return"B"===t.playerSave.currentEra.type&&e&&on({result:null,prev:e,prevGameState:t,nodeLocation:r})||e})),this.updaters.playerSave.bookmarkedStatusMap.enqueueUpdate((function(e,t){if("A"===t.playerSave.currentEra.type){var n,a=!!(null===(n=e.get(r))||void 0===n?void 0:n.bookmarked),i=e.clone();return a?(i.remove(r),i):(i.put(r,{bookmarked:!0}),i)}return e})),this.updaters.playerSave.exploredStatusMap.enqueueUpdate((function(e,t){if("A"===t.playerSave.currentEra.type){var n;if(!0!==(null===(n=e.get(r))||void 0===n?void 0:n.explored)){var a=e.clone();return a.put(r,{explored:!0}),a}return e}return e})),null===(a=this.updaters.computed.fogOfWarStatusMap)||void 0===a||a.enqueueUpdate((function(e,t){return"A"===t.playerSave.currentEra.type&&e&&cn({result:null,prev:e,prevGameState:t,nodeLocation:r})||e}))}},{key:"run",value:function(t,n){var a=e.checkAction(t,n);return a&&this.enqueueAction(t),a}}],[{key:"checkAction",value:function(e,t){var n,a,r,i,o,c,u,s;if("B"===t.playerSave.currentEra.type){if(!e.newStatus.taken)return console.log("unsupported action: ",e),!1}else if("A"===t.playerSave.currentEra.type&&!e.newStatus.taken)return console.log("unsupported action: ",e),!1;if("B"===t.playerSave.currentEra.type&&!0===(null===(n=t.playerSave.allocationStatusMap.get(e.nodeLocation))||void 0===n?void 0:n.taken))return console.log("can't do that, already taken",e),!1;if("A"===t.playerSave.currentEra.type&&!0===(null===(a=t.playerSave.allocationStatusMap.get(e.nodeLocation))||void 0===a?void 0:a.taken))return console.log("can't do that, can't bookmark or unbookmark a taken node",e),!1;if(t.worldGen.lockMap.get(e.nodeLocation))return console.log("can't do that, is locked",e),!1;if("revealed"!==(null===(r=t.computed.fogOfWarStatusMap)||void 0===r?void 0:r.get(e.nodeLocation)))return console.log("can't do that, is not visible",e),!1;if(!0!==(null===(i=t.computed.accessibleStatusMap)||void 0===i||null===(o=i.get(e.nodeLocation))||void 0===o?void 0:o.accessible))return console.log("can't do that, is not accessible",e),!1;if("B"===t.playerSave.currentEra.type&&!0!==(null===(u=t.computed.reachableStatusMap)||void 0===u||null===(s=u.get(e.nodeLocation))||void 0===s?void 0:s.reachable))return console.log("can't do that, is not reachable",e),!1;return!("B"===t.playerSave.currentEra.type&&t.playerSave.allocationStatusMap.size()>=pn[t.playerSave.currentEra.index]||"A"===t.playerSave.currentEra.type&&t.playerSave.bookmarkedStatusMap.size()>=pn[t.playerSave.currentEra.index]&&!0!==(null===(c=t.playerSave.bookmarkedStatusMap.get(e.nodeLocation))||void 0===c?void 0:c.bookmarked))||(console.log("can't do that, no available SP right now"),!1)}}]),e}(),pn=($t={},Object(te.a)($t,-1,1),Object(te.a)($t,0,11),Object(te.a)($t,1,31),Object(te.a)($t,2,61),Object(te.a)($t,3,91),Object(te.a)($t,4,121),$t),vn={0:4,1:15,2:35,3:55,4:75},hn={0:10,1:12,2:18,3:28,4:38},bn=r.a.memo(fn);function fn(e){var t=e.hexGridPx,n=e.borderWidth,r=e.hexCenterRadius,i=e.appSize,o=e.COLORS;return Object(a.useEffect)((function(){document.documentElement.style.setProperty("--grid-width"," ".concat(t.x,"px")),document.documentElement.style.setProperty("--grid-height"," ".concat(t.y,"px")),document.documentElement.style.setProperty("--hex-center-radius"," ".concat(r,"px")),document.documentElement.style.setProperty("--border-width"," ".concat(n,"px"))}),[t,r,n]),Object(a.useEffect)((function(){document.documentElement.style.setProperty("--background-black",G(o.backgroundBlue)),document.documentElement.style.setProperty("--deemphasized-black",G(o.grayBlack)),document.documentElement.style.setProperty("--active-purple",G(o.nodePink)),document.documentElement.style.setProperty("--border-unimportant-black",G(o.borderBlack)),document.documentElement.style.setProperty("--border-important-white",G(o.borderWhite)),document.documentElement.style.setProperty("--text-readable-white",G(o.textWhite))}),[o]),Object(a.useEffect)((function(){document.documentElement.style.setProperty("--app-size-width"," ".concat(i.x,"px")),document.documentElement.style.setProperty("--app-size-height"," ".concat(i.y,"px"))}),[i]),Object(v.jsx)(v.Fragment,{children:e.children})}n(137),n(79),n(253);var On=r.a.memo(jn);function jn(e){var t=e.id,n=e.currentEra,r=e.onUpdateStatus,i=e.nodeData,o=e.isCursored,c=e.onUpdateCursored,u=(e.debugIsCursored,i.nodeLocation),s=Object(a.useCallback)((function(e){e.stopPropagation(),e.preventDefault(),r({nodeLocation:u,newStatus:{taken:!0},action:"allocate"})||c(o?null:u)}),[r,u,o,c]),l=Object(a.useCallback)((function(e){e.stopPropagation(),e.preventDefault(),c(o?null:u)}),[o,c,u]);return Object(v.jsx)(Sn,{currentEra:n,id:t,onClickCenter:s,nodeData:i,onClickQuestionMark:l,isCursored:o},t)}var Sn=r.a.memo(yn);function yn(e){var t,n,r=e.id,i=e.currentEra,o=e.onClickCenter,u=e.onClickQuestionMark,l=e.nodeData,d=e.isCursored,p=(e.debugIsCursored,l.status),h=!!l.lockData,b="A"===i.type&&l.statuses.accessibleStatus.accessible&&"hinted"===l.statuses.fogOfWarStatus,f=p===be.HIDDEN&&!b,O=Object(a.useState)(!1),j=Object(c.a)(O,2),S=j[0],y=j[1],m=function(e){console.log("got pointer enter on ".concat(r)),y(!0)},g=function(e){console.log("got pointer leave on ".concat(r)),y(!1)};return Object(v.jsxs)("div",{className:"hex-block hex-full-block",id:r,children:[Object(v.jsx)("div",{className:s()("hex-center",p===be.TAKEN_OR_MARKED?"node-allocated":"node-unallocated",p===be.AVAILABLE&&"B"===i.type?"border-important":"border-unimportant",p===be.AVAILABLE&&"B"===i.type?"node-available":"",l.statuses.bookmarkedStatus.bookmarked?"marked-square":"",b?"hex-center-size-small":"hex-center-size-medium"),onClick:o,onDoubleClick:function(){console.log("double clicked")},onPointerEnter:m,onPointerLeave:g,hidden:f,children:Object(v.jsx)("div",{className:s()("hex-center-text-wrapper",b?"hex-center-size-small":"hex-center-size-medium"),children:Object(v.jsx)("div",{className:"tiny-text",hidden:b,children:l.shortText})})}),h?Object(v.jsxs)("div",{className:"hex-center-lock",hidden:p===be.HIDDEN,onClick:o,onDoubleClick:function(){console.log("double clicked")},onPointerEnter:m,onPointerLeave:g,children:[Object(v.jsx)("div",{className:"hex-center-lock-left",children:Object(v.jsx)("div",{className:"tiny-text",children:null===(t=l.lockData)||void 0===t?void 0:t.shortTextTarget})}),Object(v.jsx)("div",{className:"hex-center-lock-right",children:Object(v.jsx)("div",{className:"tiny-text",children:null===(n=l.lockData)||void 0===n?void 0:n.shortTextTimer})})]}):null,Object(v.jsx)("div",{className:"empty-positioned node-tooltip-wrapper",children:Object(v.jsx)("div",{className:"absolute-positioned node-tooltip",hidden:!S,children:l.toolTipText})}),Object(v.jsx)("div",{className:"empty-positioned",children:Object(v.jsx)("div",{className:"hover-only-2 absolute-positioned",children:Object(v.jsx)("div",{className:"question",hidden:f,onClick:u,children:"?"})})}),Object(v.jsx)("div",{className:"empty-positioned selection-cursor-wrapper",children:Object(v.jsx)("div",{className:"absolute-positioned selection-cursor",hidden:!d})})]},r)}function mn(e){return{playerUI:{cursoredNodeLocation:(t=e).playerUI.cursoredNodeLocation},playerSave:{allocationStatusMap:t.playerSave.allocationStatusMap,bookmarkedStatusMap:t.playerSave.bookmarkedStatusMap,currentEra:t.playerSave.currentEra},worldGen:{nodeContentsMap:t.worldGen.nodeContentsMap,lockMap:t.worldGen.lockMap},computed:{fogOfWarStatusMap:t.computed.fogOfWarStatusMap,reachableStatusMap:t.computed.reachableStatusMap,lockStatusMap:t.computed.lockStatusMap,accessibleStatusMap:t.computed.accessibleStatusMap}};var t}var gn=k(mn),xn=r.a.memo(En);function En(e){var t,n=e.gameState,r=e.virtualGridDims,i=e.virtualCoordsToLocation,o=e.updateNodeStatusByLocationCb,c=e.cursoredVirtualNode,u=e.setCursoredLocation,s=e.debug,l=+new Date;null===s||void 0===s||s.rerenderGameAreaGrid();var d=(null===s||void 0===s||null===(t=s.isFlipCursored)||void 0===t?void 0:t.call(s))||!1,p=Object(a.useMemo)((function(){return new Oe((function(e){return Et({location:e,gameState:n})}))}),[n]),h=Object(v.jsx)(v.Fragment,{children:Array(r.y).fill(0).map((function(e,t){return Object(v.jsx)(kn,{rowIdx:t,children:Array(r.x).fill(0).map((function(e,a){var r=new A(a,t),s=i(r),l=p.get(s),h=!!c&&c.equals(r),b=l.id||"loading".concat(a);return Object(v.jsx)(On,{id:b,currentEra:n.playerSave.currentEra,nodeData:l,onUpdateStatus:o,isCursored:h,debugIsCursored:d?!h:h,onUpdateCursored:u},b)}))},i(new A(0,t)).y.toString())}))}),b=+new Date,f=b-l;return console.log("Game area grid elapsed ".concat(f,"ms at ").concat(b)),h}var kn=r.a.memo(wn);function wn(e){var t=e.rowIdx,n=e.children,a=!!(t%2);return Object(v.jsxs)("div",{className:"hex-block-row",children:[a&&Object(v.jsx)("div",{className:"hex-block hex-half-block"}),n,!a&&Object(v.jsx)("div",{className:"hex-block hex-half-block"})]})}var Tn=r.a.memo(_n);function _n(e){var t=e.hexGridPx,n=e.virtualGridDims,r=e.appSize,i=e.updaters,o=e.triggerScrollRecenterCb,u=e.keyboardScrollDirection,l=e.debug,d=Object(a.useRef)(null),p=Object(a.useState)(new A(0,0)),h=Object(c.a)(p,2),b=h[0],f=h[1];Object(a.useEffect)((function(){if(d.current){o();var e=function(e){var t=e.virtualGridDims,n=e.hexGridPx,a=t.divide(2).floor(),r=(a.y+.5)*n.y,i=(a.x+.5)*n.x;return a.y%2===1&&(i+=.5*n.x),new A(i,r)}({virtualGridDims:n,hexGridPx:t});d.current.scrollTop=e.y-r.y/2,d.current.scrollLeft=e.x-r.x/2}}),[r,n,t,o]),Object(a.useEffect)((function(){if(b){var e=d.current;e&&e.scrollTo(e.scrollLeft-b.x*t.x,e.scrollTop-b.y*t.y)}}),[b,t]);var O=Object(a.useCallback)((function(e){var t=new A(e.direction.x,-1*e.direction.y);e.direction.x===e.direction.y&&(t=new A(0,-1*e.direction.y));var n=new A(t.x,0).add(new A(-.5,-1).multiply(t.y));i.playerUI.virtualGridLocation.enqueueUpdate((function(e){return e.add(Ee.FromVector2(t,0))})),f(n)}),[i]),j=l.getForceJumpOffset;Object(a.useEffect)((function(){var e=null===j||void 0===j?void 0:j();e&&i.playerUI.virtualGridLocation.enqueueUpdate((function(t){return t.addX(e.x).add(new Ee(-1,-2,0).multiply(e.y/2))}))}),[i,j]);var S=l.enableScrollJump,y=Object(a.useCallback)((function(e){if(S){var a={x:0,y:0},i=e.target,o=i.scrollTop,c=i.scrollLeft;i.scrollTop<.9*t.y&&(o+=2*t.y,a.y-=1),i.scrollTop>(n.y-.9)*t.y-r.y&&(o-=2*t.y,a.y+=1),i.scrollLeft<.9*t.x&&(c+=2*t.x,a.x-=1),i.scrollLeft>(n.x-.9)*t.x-r.x&&(c-=2*t.x,a.x+=1),i.scrollTop===o&&i.scrollLeft===c||O({direction:new A(a.x,a.y)})}}),[r,O,t,n,S]);return Object(a.useEffect)((function(){if(!u.equals(A.Zero)){var e=null,t=function(){var t=d.current;if(t){var n=A.Zero;if(null===e)n=u.multiply(8),e=+new Date;else{var a=+new Date-e;a>40&&console.log("WAS SLOW - "+a.toString()),n=u.multiply(a),e=+new Date}n=n.multiply(.75),t.scrollTo(t.scrollLeft+n.x,t.scrollTop-n.y)}},n=setInterval(t,8);return t(),function(){return clearInterval(n)}}}),[u]),Object(v.jsx)("div",{ref:d,className:s()({"game-area":!0,"hidden-scrollbars":!(null===l||void 0===l?void 0:l.debugShowScrollbars)}),hidden:e.hidden,onScroll:y,children:Object(v.jsx)("div",{className:"virtual-game-area",children:e.children})})}var Mn=r.a.memo(In);function In(e){var t=e.gameState,n=e.hexGridPx,r=e.appSize,i=e.virtualGridDims,o=Object(a.useCallback)((function(e){return function(e){var t=e.virtualCoords,n=e.virtualGridLocation,a=e.virtualGridDims.divide(2).floor(),r=t.subtract(a),i=A.Zero;return i=(i=r.y%2===0?new A(-1,-2).multiply(r.y/2):a.y%2===0?new A(0,-1).add(new A(-1,-2).multiply((r.y-1)/2)):new A(-1,-1).add(new A(-1,-2).multiply((r.y-1)/2))).addX(r.x),n.add(Ee.FromVector2(i,0))}({virtualCoords:e,virtualGridDims:i,virtualGridLocation:t.playerUI.virtualGridLocation})}),[t.playerUI.virtualGridLocation,i]),c=Object(a.useCallback)((function(e){return function(e){var t=e.location,n=e.virtualGridLocation,a=e.virtualGridDims.divide(2).floor(),r=t.subtract(n),i=A.Zero;return 0!==r.z?null:(i=(i=r.y%2===0?new A(-1,-2).multiply(r.y/2):a.y%2===0?new A(-1,-1).add(new A(-1,-2).multiply((r.y-1)/2)):new A(0,-1).add(new A(-1,-2).multiply((r.y-1)/2))).addX(r.x),a.add(i))}({location:e,virtualGridDims:i,virtualGridLocation:t.playerUI.virtualGridLocation})}),[t.playerUI.virtualGridLocation,i]),u=Object(a.useCallback)((function(n){return"allocate"===n.action?e.actions.allocateNode.run(n,t):e.actions.deallocateNode.run(n,t)}),[e.actions].concat(Object($.a)(sn(t)))),s=Object(a.useCallback)((function(e){var t=e.virtualCoords,n=o(t);u(Object(L.a)({nodeLocation:n},e))}),[o,u]),l=Object(a.useCallback)((function(t){e.updaters.playerUI.cursoredNodeLocation.enqueueUpdate((function(e){return t})),t&&(e.updaters.playerUI.isSidebarOpen.enqueueUpdate((function(){return!0})),e.updaters.playerUI.isLeftSidebarOpen.enqueueUpdate((function(){return!0})),e.updaters.playerUI.isRightSidebarOpen.enqueueUpdate((function(){return!0})))}),[e.updaters]),d=Object(a.useMemo)((function(){return t.playerUI.cursoredNodeLocation?c(t.playerUI.cursoredNodeLocation):null}),[t.playerUI.cursoredNodeLocation,c]),p=Object(a.useCallback)((function(){e.updaters.playerUI.virtualGridLocation.enqueueUpdate((function(e,t){var n=t.playerUI.cursoredNodeLocation,a=e;return t.playerUI.isPixiHidden?n&&(Math.abs(n.y-a.y)>=2||Math.abs(n.x-n.y/2-(a.x-a.y/2))>=4)?n:e:n&&(Math.abs(n.y-a.y)>=16||Math.abs(n.x-n.y/2-(a.x-a.y/2))>=32)?n:e}))}),[e.updaters]);Object(a.useEffect)((function(){var t=o(i.divide(2).floor());e.gameState.intent.newIntent.MOVE_CURSOR_EAST&&(e.updaters.playerUI.cursoredNodeLocation.enqueueUpdate((function(e){return(null===e||void 0===e?void 0:e.addX(1))||t})),p()),e.gameState.intent.newIntent.MOVE_CURSOR_WEST&&(e.updaters.playerUI.cursoredNodeLocation.enqueueUpdate((function(e){return(null===e||void 0===e?void 0:e.addX(-1))||t})),p()),e.gameState.intent.newIntent.MOVE_CURSOR_NORTHEAST&&(e.updaters.playerUI.cursoredNodeLocation.enqueueUpdate((function(e){return(null===e||void 0===e?void 0:e.add({x:1,y:1,z:0}))||t})),p()),e.gameState.intent.newIntent.MOVE_CURSOR_NORTHWEST&&(e.updaters.playerUI.cursoredNodeLocation.enqueueUpdate((function(e){return(null===e||void 0===e?void 0:e.addY(1))||t})),p()),e.gameState.intent.newIntent.MOVE_CURSOR_SOUTHEAST&&(e.updaters.playerUI.cursoredNodeLocation.enqueueUpdate((function(e){return(null===e||void 0===e?void 0:e.addY(-1))||t})),p()),e.gameState.intent.newIntent.MOVE_CURSOR_SOUTHWEST&&(e.updaters.playerUI.cursoredNodeLocation.enqueueUpdate((function(e){return(null===e||void 0===e?void 0:e.add({x:-1,y:-1,z:0}))||t})),p()),e.gameState.intent.newIntent.MOVE_CURSOR_SOUTH&&(e.updaters.playerUI.cursoredNodeLocation.enqueueUpdate((function(e){return e&&e.y%2===0?null===e||void 0===e?void 0:e.add({x:0,y:-1,z:0}):e&&e.y%2!==0?null===e||void 0===e?void 0:e.add({x:-1,y:-1,z:0}):t})),p()),e.gameState.intent.newIntent.MOVE_CURSOR_NORTH&&(e.updaters.playerUI.cursoredNodeLocation.enqueueUpdate((function(e){return e&&e.y%2===0?null===e||void 0===e?void 0:e.add({x:1,y:1,z:0}):e&&e.y%2!==0?null===e||void 0===e?void 0:e.add({x:0,y:1,z:0}):t})),p()),e.gameState.intent.newIntent.MOVE_CURSOR_NORTHNORTH&&(e.updaters.playerUI.cursoredNodeLocation.enqueueUpdate((function(e){return(null===e||void 0===e?void 0:e.add({x:1,y:2,z:0}))||t})),p()),e.gameState.intent.newIntent.MOVE_CURSOR_SOUTHSOUTH&&(e.updaters.playerUI.cursoredNodeLocation.enqueueUpdate((function(e){return(null===e||void 0===e?void 0:e.add({x:-1,y:-2,z:0}))||t})),p()),e.gameState.intent.newIntent.INTERACT_WITH_NODE&&d&&s({virtualCoords:d,newStatus:{taken:!0},action:"allocate"}),e.gameState.intent.newIntent.DEALLOCATE_NODE&&d&&s({virtualCoords:d,newStatus:{taken:!0},action:"deallocate"})}),[e.gameState.intent.newIntent.INTERACT_WITH_NODE,e.gameState.intent.newIntent.MOVE_CURSOR_EAST,e.gameState.intent.newIntent.MOVE_CURSOR_NORTH,e.gameState.intent.newIntent.MOVE_CURSOR_NORTHNORTH,e.gameState.intent.newIntent.MOVE_CURSOR_NORTHEAST,e.gameState.intent.newIntent.MOVE_CURSOR_NORTHWEST,e.gameState.intent.newIntent.MOVE_CURSOR_SOUTH,e.gameState.intent.newIntent.MOVE_CURSOR_SOUTHSOUTH,e.gameState.intent.newIntent.MOVE_CURSOR_SOUTHEAST,e.gameState.intent.newIntent.MOVE_CURSOR_SOUTHWEST,e.gameState.intent.newIntent.MOVE_CURSOR_WEST,e.gameState.intent.newIntent.DEALLOCATE_NODE,e.updaters,o,i,d,s,p]),Object(a.useEffect)((function(){if(e.gameState.intent.newIntent.ZOOM_RECENTER_AT_NODE){var n=t.playerUI.cursoredNodeLocation;n&&(e.updaters.playerUI.virtualGridLocation.enqueueUpdate((function(e){return n})),e.updaters.playerUI.triggerScrollRecenterCb.enqueueUpdate((function(){return function(){console.log("zoomed to location: ",{location:n})}})))}}),[e.gameState.intent.newIntent.ZOOM_RECENTER_AT_NODE,t.playerUI.cursoredNodeLocation,e.updaters]);var h=Object(a.useMemo)((function(){var t=A.Zero;return e.gameState.intent.activeIntent.PAN_EAST&&(t=t.addX(1)),e.gameState.intent.activeIntent.PAN_WEST&&(t=t.addX(-1)),e.gameState.intent.activeIntent.PAN_NORTH&&(t=t.addY(1)),e.gameState.intent.activeIntent.PAN_SOUTH&&(t=t.addY(-1)),t}),[e.gameState.intent.activeIntent.PAN_EAST,e.gameState.intent.activeIntent.PAN_WEST,e.gameState.intent.activeIntent.PAN_NORTH,e.gameState.intent.activeIntent.PAN_SOUTH]),b=Object(a.useMemo)((function(){return{debugShowScrollbars:t.debug.debugShowScrollbars,enableScrollJump:t.debug.enableScrollJump,getForceJumpOffset:t.debug.getForceJumpOffset}}),[t.debug.debugShowScrollbars,t.debug.enableScrollJump,t.debug.getForceJumpOffset]),f=Object(a.useMemo)((function(){return{rerenderGameAreaGrid:t.debug.rerenderGameAreaGrid,getOffsetX:t.debug.getOffsetX,isFlipCursored:t.debug.isFlipCursored}}),[t.debug.rerenderGameAreaGrid,t.debug.getOffsetX,t.debug.isFlipCursored]),O=Object(a.useMemo)((function(){return mn(t)}),gn(t));return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(Tn,{hidden:!t.playerUI.isPixiHidden,appSize:r,triggerScrollRecenterCb:t.playerUI.triggerScrollRecenterCb,updaters:e.updaters,hexGridPx:n,virtualGridDims:i,keyboardScrollDirection:h,debug:b,children:Object(v.jsx)(xn,{gameState:O,virtualGridDims:i,virtualCoordsToLocation:o,updateNodeStatusByLocationCb:u,cursoredVirtualNode:d,setCursoredLocation:l,debug:f})})})}var Rn=2;function Cn(e){return{playerUI:{virtualGridLocation:(t=e).playerUI.virtualGridLocation,cursoredNodeLocation:t.playerUI.cursoredNodeLocation,isPixiHidden:t.playerUI.isPixiHidden,triggerScrollRecenterCb:t.playerUI.triggerScrollRecenterCb},playerSave:{allocationStatusMap:t.playerSave.allocationStatusMap,bookmarkedStatusMap:t.playerSave.bookmarkedStatusMap,currentEra:t.playerSave.currentEra,deallocationPoints:t.playerSave.deallocationPoints},worldGen:{nodeContentsMap:t.worldGen.nodeContentsMap,lockMap:t.worldGen.lockMap},computed:{fogOfWarStatusMap:t.computed.fogOfWarStatusMap,reachableStatusMap:t.computed.reachableStatusMap,lockStatusMap:t.computed.lockStatusMap,accessibleStatusMap:t.computed.accessibleStatusMap},intent:t.intent,debug:{debugShowScrollbars:t.debug.debugShowScrollbars,rerenderGameAreaGrid:t.debug.rerenderGameAreaGrid,enableScrollJump:t.debug.enableScrollJump,getForceJumpOffset:t.debug.getForceJumpOffset,getOffsetX:t.debug.getOffsetX,isFlipCursored:t.debug.isFlipCursored}};var t}var Un=k(Cn);function Nn(e){var t=Math.max(e.x,e.y);return t>2160?"x-large":t>1536?"large":t>1080?"medium":t>800?"small":"x-small"}function An(e){var t=e.gameState,n=Object(a.useMemo)((function(){return $e(new A(t.windowState.innerWidth,t.windowState.innerHeight))}),[t.windowState.innerWidth,t.windowState.innerHeight]),r=Object(a.useMemo)((function(){return Nn(n)}),[n]),i=Object(a.useMemo)((function(){if("x-large"===r)return new A(268,232);if("large"===r)return new A(194,168);if("medium"===r)return new A(120,104);if("small"===r)return new A(97,84);if("x-small"===r)return new A(75,65);throw new x}),[r]),o=Object(a.useMemo)((function(){if("x-large"===r)return 64;if("large"===r)return 48;if("medium"===r)return 32;if("small"===r)return 26;if("x-small"===r)return 20;throw new x}),[r]),c=Object(a.useMemo)((function(){if("x-large"===r)return 2;if("large"===r)return 2;if("medium"===r)return 2;if("small"===r)return 1;if("x-small"===r)return 1;throw new x}),[r]),u=t.debug.retriggerVirtualGridDims,s=Object(a.useMemo)((function(){u();var e=Math.floor(n.x*Rn/i.x-.5),t=Math.floor(n.y*Rn/i.y);return new A(e,t)}),[n,u,i]),l=Object(a.useMemo)((function(){return Cn(t)}),Un(t)),d=Object(a.useMemo)((function(){return{allocateNode:new dn(e.updaters),deallocateNode:new gt(e.updaters)}}),[e.updaters]);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(bn,{appSize:n,hexCenterRadius:o,hexGridPx:i,borderWidth:c,COLORS:P}),Object(v.jsx)(Mn,{appSize:n,virtualGridDims:s,hexGridPx:i,gameState:l,updaters:e.updaters,actions:d})]})}function Ln(e){return{playerUI:{virtualGridLocation:(t=e).playerUI.virtualGridLocation,cursoredNodeLocation:t.playerUI.cursoredNodeLocation,strategicSearch:t.playerUI.strategicSearch,isPixiHidden:t.playerUI.isPixiHidden},playerSave:{allocationStatusMap:t.playerSave.allocationStatusMap,bookmarkedStatusMap:t.playerSave.bookmarkedStatusMap,currentEra:t.playerSave.currentEra},intent:{newIntent:{PAN_EAST:t.intent.newIntent.PAN_EAST,PAN_NORTH:t.intent.newIntent.PAN_NORTH,PAN_SOUTH:t.intent.newIntent.PAN_SOUTH,PAN_WEST:t.intent.newIntent.PAN_WEST}},computed:{fogOfWarStatusMap:t.computed.fogOfWarStatusMap,reachableStatusMap:t.computed.reachableStatusMap,accessibleStatusMap:t.computed.accessibleStatusMap,lockStatusMap:t.computed.lockStatusMap},worldGen:{nodeContentsMap:t.worldGen.nodeContentsMap,lockMap:t.worldGen.lockMap}};var t}var Dn=k(Ln);function Pn(e){return"x-small"===e?new A(15,13):"small"===e?new A(22,19):"medium"===e||"large"===e?new A(30,26):new A(45,39)}var Gn=new A(48,24),zn=oe(function(e){Object(f.a)(n,e);var t=Object(O.a)(n);function n(e){var a;Object(l.a)(this,n),(a=t.call(this,e)).container=void 0,a.state=void 0,a.hexGrid=new F,a.state=a.useState(Object(D.a)(a),{phases:{}}).state,a.updateSelf(e),a.container=new U.b;for(var r=Pn(Nn(e.appSize)),i=-Gn.y;i<=Gn.y;i++)for(var o=-Gn.x+Math.floor(i/2);o<=Gn.x+Math.floor(i/2);o++){var c=new U.g;c.tint=P.nodePink,c.position=W(e.appSize.divide(2).add(new A(r.x*o-r.x/2*i,-r.y*i))),a.container.addChild(c),a.hexGrid.put(new A(o,i),{node:c,animation:null,cursor:null,cursorAnimation:null})}return a}return Object(d.a)(n,[{key:"updateSelf",value:function(e){var t=this;e.gameState.playerUI.strategicSearch!==this._staleProps.gameState.playerUI.strategicSearch&&this.stateUpdaters.phases.enqueueUpdate((function(e){for(var t=Object(L.a)({},e),n=0,a=Object.keys(t);n<a.length;n++){var r=a[n];t[parseInt(r)]=0}return t}));var n,a=Object(S.a)(this.hexGrid.values());try{var r=function(){var e=n.value,a=e.node,r=e.animation;if(r){var i=((t.state.phases[r.periodSecs]||r.phase||0)+1/Wn*1*1/r.periodSecs)%1,o=1-Math.abs(2*i-1),c=1-(o<.5?o*o*2:1-2*(1-o)*(1-o));a.tint=K({target:r.max,base:r.min,proportion:c}),r.phase=i,t.stateUpdaters.phases.enqueueUpdate((function(e){var t=Object(L.a)({},e);return t[r.periodSecs]=i,t}))}if(e.cursor&&e.cursorAnimation){var u=e.cursorAnimation,s=((u.phase||0)+1/Wn*1*1/u.periodSecs)%1,l=1-Math.abs(2*s-1),d=1-l*l;e.cursor.tint=K({target:u.max,base:u.min,proportion:d}),u.phase=s}};for(a.s();!(n=a.n()).done;)r()}catch(i){a.e(i)}finally{a.f()}e.gameState.intent!==this._staleProps.gameState.intent&&(e.gameState.playerUI.isPixiHidden||(e.gameState.intent.newIntent.PAN_EAST&&e.updaters.playerUI.virtualGridLocation.enqueueUpdate((function(e){return e.addX(4)})),e.gameState.intent.newIntent.PAN_WEST&&e.updaters.playerUI.virtualGridLocation.enqueueUpdate((function(e){return e.addX(-4)})),e.gameState.intent.newIntent.PAN_NORTH&&e.updaters.playerUI.virtualGridLocation.enqueueUpdate((function(e){return e.addX(2).addY(4)})),e.gameState.intent.newIntent.PAN_SOUTH&&e.updaters.playerUI.virtualGridLocation.enqueueUpdate((function(e){return e.addX(-2).addY(-4)}))))}},{key:"renderSelf",value:function(e){var t=this,n=e.gameState,a=n.playerSave.currentEra;this.container.position=W(e.args.position);var r,i=Pn(Nn(e.appSize)),o=Object(S.a)(this.hexGrid.entries());try{var u=function(){var o,u,s,l,d,p=Object(c.a)(r.value,2),v=p[0],h=p[1],b=h.node,f=e.appSize.divide(2).add(new A(i.x*v.x-i.x/2*v.y,-i.y*v.y)),O=void 0,j=n.playerUI.virtualGridLocation.add(Ee.FromVector2(v)),y=(null===(o=n.computed.fogOfWarStatusMap)||void 0===o?void 0:o.get(j))||"obscured",m=n.playerSave.allocationStatusMap.get(j)||ge.false,g=n.playerSave.bookmarkedStatusMap.get(j)||{bookmarked:!1},x=(null===(u=n.computed.reachableStatusMap)||void 0===u?void 0:u.get(j))||xe.false,E=(null===(s=n.computed.accessibleStatusMap)||void 0===s?void 0:s.get(j))||{accessible:!1},k=n.worldGen.lockMap.get(j),w=null===(l=n.computed.lockStatusMap)||void 0===l?void 0:l.get(j),T=!!k&&w!==me.OPEN,_=!0;m.taken||"A"===a.type&&g.bookmarked?(b.visible=!0,O=P.borderBlack):x.reachable&&!T&&"B"===a.type?(b.visible=!0,O=P.nodeLavender):"revealed"===y?(b.visible=!0,_=!0,O=P.nodePink):"A"===a.type&&"hinted"===y&&E.accessible?(b.visible=!0,_=!1,O=P.nodePink):(b.visible=!1,_=!1,O=P.nodePink),b.visible?(b.interactive=!0,b.buttonMode=!0,b.removeAllListeners(),b.on("pointerdown",(function(){console.log("pointerdown in strategic hex grid pixi",{nodeLocation:j}),e.updaters.playerUI.cursoredNodeLocation.enqueueUpdate((function(e){return console.log("enqueue update in pointerdown in strategic hex grid",{prev:e,nodeLocation:j}),e&&e.equals(j)?null:j}))}))):(b.interactive=!1,b.buttonMode=!1);var M=e.args.textures.get();"A"===a.type&&"hinted"===y&&E.accessible?(b.texture=M.dot,b.position=W(f),b.position.x-=M.dot.width/2,b.position.y-=M.dot.height/2):T?(b.texture=M.rect,b.position=W(f),b.position.x-=M.rect.width/2,b.position.y-=M.rect.height/2):g.bookmarked?(b.texture=M.square,b.position=W(f),b.position.x-=M.square.width/2,b.position.y-=M.square.height/2):(b.texture=M.circle,b.position=W(f),b.position.x-=M.circle.width/2,b.position.y-=M.circle.height/2);var I=n.worldGen.nodeContentsMap.get(j);if(_&&("Yes"===n.playerUI.strategicSearch.colors.enabled||"Only unallocated"===n.playerUI.strategicSearch.colors.enabled&&!m.taken)){var R=ye()(function(e){if(0===e.lines.length)return Be[""];var t=Be[e.lines[0].attribute];return 1===e.lines.length?t:K({color:t,opacity:.5,background:Be[e.lines[1].attribute]})}(I)).lch(),C=ye()(O).lch();O=ye.a.lch(C[0],.5*(C[1]+R[1]),R[2]).num()}if(function(e){var t=e.nodeContents,n=e.nodeTakenStatus,a=e.isLocked,r=e.query;if(!r)return!1;var i=r.highlight1.value.split(" ").filter((function(e){return!!e})).map((function(e){return"["===e[0]&&"]"===e[e.length-1]?e.slice(1,e.length-1):e}));if(0===i.length)return!1;var o,c=null,u=Object(S.a)(i);try{for(u.s();!(o=u.n()).done;){var s,l,d,p,v=o.value,h=Xe[v],b=Je[v];if(h){if((null===(s=t.lines)||void 0===s||null===(l=s[0])||void 0===l?void 0:l.attribute)!==h&&(null===(d=t.lines)||void 0===d||null===(p=d[1])||void 0===p?void 0:p.attribute)!==h){c=h;break}}else if(b){var f,O,j,y;if((null===(f=t.lines)||void 0===f||null===(O=f[0])||void 0===O?void 0:O.modifier)!==b&&(null===(j=t.lines)||void 0===j||null===(y=j[1])||void 0===y?void 0:y.modifier)!==b){c=b;break}}else if("*"===v){var m,g,x,E;if(!(null===(m=t.lines)||void 0===m||null===(g=m[0])||void 0===g?void 0:g.attribute)&&!(null===(x=t.lines)||void 0===x||null===(E=x[1])||void 0===E?void 0:E.attribute)){c=v;break}}else if("![taken]"===v){if(n.taken){c=v;break}}else if("[taken]"===v||"taken"===v){if(!n.taken){c=v;break}}else if("![locked]"===v){if(a){c=v;break}}else{if("[locked]"!==v&&"locked"!==v)return console.error("unparsed term: ",v),!1;if(!a){c=v;break}}}}catch(k){u.e(k)}finally{u.f()}if(c)return!1;return!0}({nodeContents:I,nodeTakenStatus:m,isLocked:T,query:n.playerUI.strategicSearch})&&_){var N={max:K({color:O,opacity:.75,background:P.white}),min:O,periodSecs:2,mode:"start-max ease-in-out",phase:h.animation?h.animation.phase:0};h.animation=N}else b.tint=O,h.animation=null;if(null===(d=e.gameState.playerUI.cursoredNodeLocation)||void 0===d?void 0:d.equals(j)){if(!h.cursor){var L=new U.g;L.texture=M.verticalLine,L.tint=P.borderWhite,t.container.addChild(L),h.cursor=L,h.cursorAnimation={max:P.borderWhite,min:K({color:P.borderWhite,opacity:.25,background:P.backgroundBlue}),periodSecs:1,mode:"start-max ease-in",phase:0}}}else h.cursor&&t.container.removeChild(h.cursor),h.cursor=null;h.cursor&&(h.cursor.position=W(f),h.cursor.position.x-=i.x/2,h.cursor.position.x+=M.verticalLine.width/3,h.cursor.position.y-=M.verticalLine.height/2)};for(o.s();!(r=o.n()).done;)u()}catch(s){o.e(s)}finally{o.f()}}},{key:"shouldUpdate",value:function(e,t,n,a){var r,i=Object(S.a)(Object.keys(e));try{for(i.s();!(r=i.n()).done;){var o=r.value;if("delta"!==o&&"args"!==o&&"updaters"!==o)if("gameState"!==o){if(e[o]!==n[o])return console.log("hexgrid shouldUpdate differed in ".concat(o,", returning true")),!0}else for(var c=e[o],u=n[o],s=Dn(c),l=Dn(u),d=0;d<s.length;d++)if(l[d]!==s[d])return console.log("hexgrid substate differed in ".concat(d," : ").concat(E(Ln)[d].join("."),", returning true for shouldupdate")),!0}}catch(p){i.e(p)}finally{i.f()}return!1}}]),n}(ie));var Hn=16777215;var Fn=oe(function(e){Object(f.a)(n,e);var t=Object(O.a)(n);function n(e){var a;Object(l.a)(this,n),(a=t.call(this,e)).container=void 0,a.state=void 0,a.stateUpdaters=void 0,a.fireStateUpdaters=void 0,a.fixedCameraStage=void 0,a.actionStage=void 0,a.backdropStage=void 0,a.strategicHexGrid=void 0,a.backdrop=void 0,a.onWheel=function(e){},a.onScroll=function(e){},a.container=new U.b,a.container.sortableChildren=!0,a.state=a.useState(Object(D.a)(a),{pointNodeTexture:new he((function(){return function(e){for(var t=[],n=0;n<=8;n++){var a=n/8,r=new U.c;r.beginFill(P.white),r.drawRoundedRect(-ve.NODE_SIZE_PX/2,-ve.NODE_SIZE_PX/2,ve.NODE_SIZE_PX,ve.NODE_SIZE_PX,ve.NODE_ROUNDED_PX);var i=new U.c;i.beginFill(P.black),i.drawRect(-ve.NODE_SIZE_PX/2,-ve.NODE_SIZE_PX/2,ve.NODE_SIZE_PX,ve.NODE_SIZE_PX*a),r.mask=i;var o=e.generateTexture(r,U.f.LINEAR,1);t.push({cropFraction:a,texture:o})}return t}(e.args.renderer)})),simpleTexture:new he((function(){return function(e,t){console.log("generating textures...",{uiScale:t});var n=new U.c,a="x-small"===t?8:"small"===t?12:"medium"===t||"large"===t?16:24;n.beginFill(Hn),n.drawCircle(0,0,a/2);var r=new U.c,i="x-small"===t?10:"small"===t?14:"medium"===t||"large"===t?18:30,o="x-small"===t?3:"small"===t?4:"medium"===t||"large"===t?5:8;r.beginFill(Hn),r.drawRect(0,0,o,i);var c=new U.c,u="x-small"===t?1:"small"===t?2:"medium"===t||"large"===t?3:4,s="x-small"===t?3:"small"===t||"medium"===t||"large"===t?6:8;c.beginFill(Hn),c.drawRect(0,0,u,i),c.drawRect(0,0,s,u),c.drawRect(0,i-u,s,u);var l=new U.c;l.beginFill(Hn),l.drawRect(0,0,a,a);var d=new U.c;return d.beginFill(Hn),d.drawCircle(0,0,a/4),{circle:e.generateTexture(n,U.f.LINEAR,1),rect:e.generateTexture(r,U.f.LINEAR,1),square:e.generateTexture(l,U.f.LINEAR,1),verticalLine:e.generateTexture(c,U.f.LINEAR,1),dot:e.generateTexture(d,U.f.LINEAR,1)}}(e.args.renderer,Nn(a._staleProps.appSize))})),tick:0,playerCurrentZ:0,tooltip:{visible:!1,position:void 0,text:""}}).state;var r=function(e,t){return{args:{renderer:e.args.renderer,markForceUpdate:a.markForceUpdate},delta:e.delta,gameState:e.gameState,appSize:e.appSize,tick:t.tick,tooltip:Object(L.a)({},t.tooltip)}};a.fixedCameraStage=new je(r(e,a.state)),a.addChild({childClass:je,instance:a.fixedCameraStage,propsFactory:r}),a.actionStage=new U.g,a.actionStage.zIndex=0,a.actionStage.sortableChildren=!0,a.container.addChild(a.actionStage);var i=function(e,t){var n=e.gameState;return{delta:e.delta,args:{position:A.Zero,textures:t.simpleTexture},updaters:e.updaters,appSize:e.appSize,gameState:Ln(n)}};return a.strategicHexGrid=new zn(i(e,a.state)),a.addChild({childClass:zn,instance:a.strategicHexGrid,propsFactory:i}),a.backdropStage=new U.g,a.backdropStage.zIndex=-1,a.backdropStage.sortableChildren=!0,a.container.addChild(a.backdropStage),a.backdrop=new U.c,a.backdropStage.addChild(a.backdrop),a.backdrop.beginFill(P.backgroundBlue,1),a.backdrop.interactive=!0,a.backdrop.drawRect(0,0,e.appSize.x,e.appSize.y),a}return Object(d.a)(n,[{key:"updateSelf",value:function(e){this.stateUpdaters.tick.enqueueUpdate((function(e){return e+1}))}},{key:"renderSelf",value:function(e){this.backdrop.width=e.appSize.x,this.backdrop.height=e.appSize.y}},{key:"didMount",value:function(){var e=this._staleProps.args.canvasElement;e.addEventListener("wheel",this.onWheel),e.addEventListener("scroll",this.onScroll)}},{key:"didUpdate",value:function(){}},{key:"willUnmount",value:function(){var e=this._staleProps.args.canvasElement;e.removeEventListener("wheel",this.onWheel),e.removeEventListener("scroll",this.onScroll)}}]),n}(ie)),qn=new A(800,600),Wn=60,Bn=function(){function e(t){var n;Object(l.a)(this,e),this.app=void 0,this.state=void 0,this.props=void 0,this.staleProps=void 0,this.rootComponent=null,this.onTick=void 0,null===t||void 0===t||null===(n=t.args)||void 0===n||n.isSecondConstructorCall;var a=qn;this.state={appSize:a,originalAppSize:a},this.app=new U.a({width:this.state.appSize.x,height:this.state.appSize.y,antialias:!0,transparent:!0,resolution:window.devicePixelRatio||1,autoDensity:!0,powerPreference:"low-power",backgroundColor:P.white})}return Object(d.a)(e,[{key:"pause",value:function(){this.app.ticker.remove(this.onTick)}},{key:"destroy",value:function(){this.app.destroy(!0,{children:!0,texture:!0,baseTexture:!0})}},{key:"willMount",value:function(){this.state.appSize=$e(new A(this.props.gameState.windowState.innerWidth,this.props.gameState.windowState.innerHeight))}},{key:"didMount",value:function(){var e=this;this.onTick=function(t){return e.baseGameLoop(t)},this.onTick=this.onTick.bind(this),this.app.ticker.add(this.onTick),this.state.appSize=$e(new A(this.props.gameState.windowState.innerWidth,this.props.gameState.windowState.innerHeight))}},{key:"register",value:function(e){e.appendChild(this.app.view)}},{key:"updateSelf",value:function(e,t){e!==t?(e.gameState.windowState.innerWidth===(null===t||void 0===t?void 0:t.gameState.windowState.innerWidth)&&e.gameState.windowState.innerHeight===(null===t||void 0===t?void 0:t.gameState.windowState.innerHeight)||(this.state.appSize=$e(new A(e.gameState.windowState.innerWidth,e.gameState.windowState.innerHeight))),e.updaters.tick.enqueueUpdate((function(e){return e+1}))):e.updaters.tick.enqueueUpdate((function(e){return e+1}))}},{key:"rerender",value:function(e){this.rootComponent&&this.props===e||(this.props=e,this.rootComponent||(this.willMount(),this.rootComponent=new Fn({args:{renderer:this.app.renderer,markForceUpdate:function(){},canvasElement:this.app.view},updaters:this.props.updaters,delta:0,gameState:this.props.gameState,appSize:this.state.appSize}),this.app.stage.addChild(this.rootComponent.container),this.renderSelf(this.props),this.didMount()))}},{key:"renderSelf",value:function(e){this.app.renderer.resize(this.state.appSize.x,this.state.appSize.y)}},{key:"baseGameLoop",value:function(e){var t;if(this.props.gameState.playerUI.isPixiHidden&&this.props.gameState.tick%60!==0)return this.props.updaters.tick.enqueueUpdate((function(e){return e+1})),void this.props.args.fireBatch();this.updateSelf(this.props,this.staleProps),null===(t=this.rootComponent)||void 0===t||t.update({args:{renderer:this.app.renderer,markForceUpdate:function(){},canvasElement:this.app.view},updaters:this.props.updaters,delta:e,gameState:this.props.gameState,appSize:this.state.appSize}),this.renderSelf(this.props),this.staleProps=this.props,this.props.args.fireBatch()}}]),e}(),Vn=new he((function(){return new Bn}));function Xn(e){var t=Object(a.useContext)(C),n=Object(c.a)(t,3),r=n[0],i=n[1],o=n[2],u=Object(a.useState)(Vn.get()),s=Object(c.a)(u,1)[0],l=Object(a.useRef)(null);return Object(a.useEffect)((function(){for(var e=l.current.childNodes.length-1;e>=0;e--)l.current.removeChild(l.current.childNodes[e]);l.current.appendChild(s.app.view)}),[s]),Object(a.useEffect)((function(){s.rerender({args:{fireBatch:o,isSecondConstructorCall:!1},updaters:i,gameState:r})}),[s,o,i,r]),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{ref:l,hidden:e.hidden,style:{}})})}var Yn=function(e){Object(f.a)(n,e);var t=Object(O.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleWindowResize=function(e){var t={innerWidth:window.innerWidth,innerHeight:window.innerHeight};a.props.updaters.enqueueUpdate((function(e){return Object(L.a)(Object(L.a)({},e),t)}))},a.state={},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleWindowResize),window.addEventListener("orientationchange",this.handleWindowResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("orientationchange",this.handleWindowResize)}},{key:"render",value:function(){return Object(v.jsx)(v.Fragment,{children:" "})}}]),n}(r.a.Component);function Zn(e){return{playerSave:{currentEra:e.playerSave.currentEra}}}var Jn=k(Zn),Kn=function(){function e(t){Object(l.a)(this,e),this.updaters=void 0,this.updaters=t}return Object(d.a)(e,[{key:"enqueueAction",value:function(e){this.updaters.playerSave.currentEra.enqueueUpdate((function(e){return Object(L.a)(Object(L.a)({},e),{},{type:"B",index:e.index+1})})),this.updaters.computed.accessibleStatusMap.enqueueUpdate((function(e,t){if(!e)return e;var n=null;return(n=rn({result:n,prev:e,prevGameState:t}))||e})),this.updaters.playerSave.bookmarkedStatusMap.enqueueUpdate((function(e,t){return"A"===t.playerSave.currentEra.type?new F:e})),this.updaters.computed.fogOfWarStatusMap.enqueueUpdate((function(e,t){if(!e)return e;var n=null,a=t.playerSave.allocationStatusMap.entries().filter((function(e){var t=Object(c.a)(e,2);t[0];return!0===t[1].taken})).map((function(e){return e[0]}));return(a=a.concat(t.playerSave.exploredStatusMap.entries().filter((function(e){var t=Object(c.a)(e,2);t[0];return!0===t[1].explored})).map((function(e){return e[0]})))).forEach((function(a){n=cn({result:n,prev:e,prevGameState:t,nodeLocation:a})})),n||e})),this.updaters.computed.reachableStatusMap.enqueueUpdate((function(e,t){if(!e)return e;var n=null;return t.playerSave.allocationStatusMap.entries().filter((function(e){var t=Object(c.a)(e,2);t[0];return!0===t[1].taken})).map((function(e){return e[0]})).forEach((function(a){n=on({result:n,prev:e,prevGameState:t,nodeLocation:a})})),n||e}))}},{key:"run",value:function(t,n){var a=e.checkAction(t,n);return a&&this.enqueueAction(t),a}}],[{key:"checkAction",value:function(e,t){if("B"===t.playerSave.currentEra.type){var n=t.playerSave.currentEra.index;if(!vn[n+1])return!1}return!0}}]),e}();n(254);k((function(e){return{playerSave:{allocationStatusMap:(t=e).playerSave.allocationStatusMap,bookmarkedStatusMap:t.playerSave.bookmarkedStatusMap,currentEra:t.playerSave.currentEra},intent:{newIntent:{MAYBE_PROGRESS_NEXT_ERA:t.intent.newIntent.MAYBE_PROGRESS_NEXT_ERA}}};var t}));function Qn(e){var t=e.gameState,n=e.updaters,r=Object(a.useState)(!0),i=Object(c.a)(r,2),o=i[0],u=i[1];Object(a.useEffect)((function(){var e=setTimeout((function(){u(!0)}),3e3);return function(){return clearTimeout(e)}}),[o]);var s=Object(a.useMemo)((function(){return{progressNextEra:new Kn(n)}}),[n]),l=Object(a.useMemo)((function(){return Zn(t)}),Jn(t)),d=Object(a.useMemo)((function(){return Kn.checkAction({},l)}),[l]),p=Object(a.useCallback)((function(e){u(!0),s.progressNextEra.run({},l)}),[s,l]);Object(a.useEffect)((function(){t.intent.newIntent.MAYBE_PROGRESS_NEXT_ERA&&u((function(e){return!e&&(p(),!0)}))}),[t.intent.newIntent.MAYBE_PROGRESS_NEXT_ERA,p]);var h=pn[t.playerSave.currentEra.index]-pn[t.playerSave.currentEra.index-1],b=h-("A"===t.playerSave.currentEra.type?t.playerSave.bookmarkedStatusMap.size():t.playerSave.allocationStatusMap.size()-pn[t.playerSave.currentEra.index-1]),f="A"===t.playerSave.currentEra.type?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:"Explore the grid"}),Object(v.jsx)("div",{children:"and plan out"}),Object(v.jsx)("div",{children:"the next phase."})]}):"B"===t.playerSave.currentEra.type?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:"Exploit the"}),Object(v.jsx)("div",{children:"resources and"}),Object(v.jsx)("div",{children:"complete quests."})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:"Choose how to"}),Object(v.jsx)("div",{children:"expand the hidden"}),Object(v.jsx)("div",{children:"area to explore."})]}),O="A"===t.playerSave.currentEra.type?"Explore":"B"===t.playerSave.currentEra.type?"Exploit":"Expand",j="A"===t.playerSave.currentEra.type?"Exploration":"Allocation";return Object(v.jsxs)("div",{className:"hud-top-zone",children:[Object(v.jsxs)("div",{className:"hud-text-box",children:[j[0],"P: ",b,"/",h,Object(v.jsx)("div",{className:"hover-only empty-positioned",children:Object(v.jsxs)("div",{className:"absolute-positioned hud-text-box-tooltip",children:[Object(v.jsxs)("div",{children:[j," points"]}),Object(v.jsx)("div",{children:"(remaining/total)."})]})})]}),Object(v.jsxs)("div",{className:"hud-text-box",children:["DP:"," ","B"===t.playerSave.currentEra.type?t.playerSave.deallocationPoints.remaining+"/"+t.playerSave.deallocationPoints.provided:"--",Object(v.jsx)("div",{className:"hover-only empty-positioned",children:Object(v.jsxs)("div",{className:"absolute-positioned hud-text-box-tooltip",children:[Object(v.jsx)("div",{children:"Deallocation points"}),Object(v.jsx)("div",{children:"(remaining/total)."})]})})]}),Object(v.jsxs)("div",{className:"hud-text-box",children:["Era: ",t.playerSave.currentEra.index,"-",O,Object(v.jsx)("div",{className:"hover-only empty-positioned",children:Object(v.jsxs)("div",{className:"absolute-positioned hud-text-box-tooltip",children:[Object(v.jsx)("div",{children:"Era (number-type)."}),Object(v.jsx)("br",{}),f]})})]}),Object(v.jsx)("button",{className:"hud-top-button button-1",disabled:o||!d,onClick:p,children:"Next era (hotkey: g)"}),Object(v.jsx)("button",{className:"hud-top-button button-2",onClick:function(){u((function(e){return!e}))},children:o?"\ud83d\udd13":"\ud83d\udd12"})]})}n(255),n(256);function $n(e){var t=e.children,n=e.hidden,a=e.placement;return Object(v.jsx)("div",{className:"left"===a?"layout left-sidebar":"layout right-sidebar",hidden:n,children:Object(v.jsx)(v.Fragment,{children:t})})}n(257);var ea=r.a.memo(ta);function ta(e){var t=e.value,n=e.labels,a=e.onChange;return Object(v.jsx)("div",{className:"tab-label-container",children:n.map((function(e,n){return Object(v.jsx)(na,{onClick:a,value:n,active:t===n,children:e},n)}))})}var na=r.a.memo(aa);function aa(e){var t=e.onClick,n=e.value,r=e.active,i=e.children,o=Object(a.useCallback)((function(){t(n)}),[t,n]);return Object(v.jsx)("div",{className:r?"tab-label active":"tab-label inactive",children:Object(v.jsx)("div",{onClick:o,children:i})})}var ra=[Dt.EMPTY];Dt.SELECTED_NODE,Dt.STATS,Dt.QUESTS,Dt.DEBUG,Dt.HELP,Dt.STRATEGIC_VIEW;function ia(e){var t=e.gameState,n=e.updaters,r=Object(a.useCallback)((function(){n.playerUI.isSidebarOpen.enqueueUpdate((function(){return!1})),n.playerUI.isLeftSidebarOpen.enqueueUpdate((function(){return!1}))}),[n]),i=Object(a.useCallback)((function(){n.playerUI.isSidebarOpen.enqueueUpdate((function(){return!0})),n.playerUI.isLeftSidebarOpen.enqueueUpdate((function(){return!0}))}),[n]),o=Object(a.useCallback)((function(){n.playerUI.isSidebarOpen.enqueueUpdate((function(){return!1})),n.playerUI.isRightSidebarOpen.enqueueUpdate((function(){return!1}))}),[n]),c=Object(a.useCallback)((function(){n.playerUI.isSidebarOpen.enqueueUpdate((function(){return!0})),n.playerUI.isRightSidebarOpen.enqueueUpdate((function(){return!0}))}),[n]),u=t.playerUI.tabs,s=n.playerUI.tabs,l=u.left.tabs,d=u.right.tabs,p=u.left.activeIndex,h=u.right.activeIndex,b=s.left.tabs.enqueueUpdate,f=s.right.tabs.enqueueUpdate,O=s.left.activeIndex.enqueueUpdate,j=s.right.activeIndex.enqueueUpdate,S=Object(a.useCallback)((function(){if(0!==d.length){var e=d[h];if(void 0!==e){var t=d.slice(0,h).concat(d.slice(h+1));f(t),j(Math.max(0,Math.min(h,t.length-1)));var n=[].concat(Object($.a)(l),[e]);b(n),O(n.length-1),i()}}}),[l,b,d,f,O,h,j,i]),y=Object(a.useCallback)((function(){if(0!==l.length){var e=l[p];if(void 0!==e){var t=l.slice(0,p).concat(l.slice(p+1));b(t),O(Math.max(Math.min(p,t.length-1),0));var n=[].concat(Object($.a)(d),[e]);f(n),j(n.length-1),c()}}}),[l,b,d,f,p,O,j,c]),m=Object(a.useMemo)((function(){return 0===l.length?Dt.EMPTY:l[p]}),[l,p]),g=Object(a.useMemo)((function(){return 0===d.length?Dt.EMPTY:d[h]}),[d,h]),x=Object(a.useMemo)((function(){return{allocateNode:new dn(e.updaters),deallocateNode:new gt(e.updaters)}}),[e.updaters]);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)($n,{hidden:!t.playerUI.isLeftSidebarOpen,placement:"left",children:[Object(v.jsxs)("div",{className:"sidebar-header",children:[Object(v.jsx)("div",{className:"sidebar-header-button",onClick:y,children:"\u27a1\ufe0f\ufe0f Send right"}),Object(v.jsx)("div",{className:"sidebar-header-gap"}),Object(v.jsx)("div",{className:"sidebar-header-button",onClick:function(){r()},children:"\u274e Close"})]}),Object(v.jsx)(ea,{value:p||0,labels:l.length?l:ra,onChange:O}),Object(v.jsx)(zt,{gameState:t,updaters:n,tabName:m,actions:x})]}),Object(v.jsxs)($n,{hidden:!t.playerUI.isRightSidebarOpen,placement:"right",children:[Object(v.jsxs)("div",{className:"sidebar-header",children:[Object(v.jsx)("div",{className:"sidebar-header-button",onClick:S,children:"\u2b05\ufe0f Send left"}),Object(v.jsx)("div",{className:"sidebar-header-gap"}),Object(v.jsx)("div",{className:"sidebar-header-button",onClick:function(){o()},children:"\u274e Close"})]}),Object(v.jsx)(ea,{value:h||0,labels:d.length?d:ra,onChange:j}),Object(v.jsx)(zt,{gameState:t,updaters:n,tabName:g,actions:x})]})]})}var oa=new he((function(){return new tn({}).loadOrCreate(+new Date)}));var ca=function(){var e=Object(a.useState)((function(){return oa.get()})),t=Object(c.a)(e,2),n=t[0],r=t[1],i=Object(a.useMemo)((function(){return ee(r)}),[r]),o=Object(c.a)(i,2),u=o[0],l=o[1],d=Object(a.useMemo)((function(){return ae(oa.get(),u)}),[u]),p=Object(a.useMemo)((function(){return[n,d,l]}),[n,d,l]);return Object(a.useEffect)((function(){console.log("maybe toggling strategic view"),n.intent.newIntent.TOGGLE_STRATEGIC_VIEW&&d.playerUI.isPixiHidden.enqueueUpdate((function(e){return!e}))}),[n.intent.newIntent.TOGGLE_STRATEGIC_VIEW,d]),Object(a.useEffect)((function(){n.intent.newIntent.TOGGLE_SIDEBAR&&d.playerUI.isSidebarOpen.enqueueUpdate((function(e){return!e}))}),[n.intent.newIntent.TOGGLE_SIDEBAR,d]),Object(a.useEffect)((function(){n.intent.newIntent.TOGGLE_LEFT_SIDEBAR&&d.playerUI.isLeftSidebarOpen.enqueueUpdate((function(e){return!e}))}),[n.intent.newIntent.TOGGLE_LEFT_SIDEBAR,d]),Object(a.useEffect)((function(){n.intent.newIntent.TOGGLE_RIGHT_SIDEBAR&&d.playerUI.isRightSidebarOpen.enqueueUpdate((function(e){return!e}))}),[n.intent.newIntent.TOGGLE_RIGHT_SIDEBAR,d]),Object(a.useEffect)((function(){n.intent.newIntent.TURN_OFF_SIDEBAR&&(d.playerUI.isLeftSidebarOpen.enqueueUpdate((function(e){return!1})),d.playerUI.isRightSidebarOpen.enqueueUpdate((function(e){return!1})))}),[n.intent.newIntent.TURN_OFF_SIDEBAR,d]),Object(a.useEffect)((function(){n.intent.newIntent.EXIT&&(d.playerUI.isLeftSidebarOpen.enqueueUpdate((function(e){return!1})),d.playerUI.isRightSidebarOpen.enqueueUpdate((function(e){return!1})),d.playerUI.cursoredNodeLocation.enqueueUpdate((function(e){return null})))}),[n.intent.newIntent.EXIT,d]),Object(v.jsxs)("div",{className:s()({App:!0}),children:[Object(v.jsxs)("div",{className:"entire-area",children:[Object(v.jsx)(C.Provider,{value:p,children:Object(v.jsx)(Xn,{hidden:n.playerUI.isPixiHidden})}),Object(v.jsx)(An,{gameState:n,updaters:d})]}),Object(v.jsx)("div",{className:"debug-overlay",children:Object(v.jsx)(h,{tick:n.tick,windowState:n.windowState})}),Object(v.jsx)(Qn,{gameState:n,updaters:d}),Object(v.jsxs)("div",{className:"button-zone",children:[Object(v.jsx)("button",{className:"button-pixi-toggle",style:{},onClick:function(){d.playerUI.isPixiHidden.enqueueUpdate((function(e){return!e}))},children:"Toggle detailed view (hotkey: b)"}),Object(v.jsx)("span",{children:" "}),Object(v.jsx)("button",{onClick:function(){d.playerUI.isSidebarOpen.enqueueUpdate((function(e){return!e})),d.playerUI.isLeftSidebarOpen.enqueueUpdate((function(e){return!e})),d.playerUI.isRightSidebarOpen.enqueueUpdate((function(e){return!e}))},children:"Toggle sidebars (hotkeys: t, y)"})]}),Object(v.jsx)(ia,{gameState:n,updaters:d}),Object(v.jsx)(R,{isTextBoxFocused:n.playerUI.isTextBoxFocused,updaters:d.intent}),Object(v.jsx)(Yn,{updaters:d.windowState}),Object(v.jsx)(Kt,{gameState:n})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(ca,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},79:function(e,t,n){}},[[258,1,2]]]);
//# sourceMappingURL=main.2f9bd5a6.chunk.js.map