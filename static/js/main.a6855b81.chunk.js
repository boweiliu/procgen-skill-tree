(this["webpackJsonpprocgen-skill-tree"]=this["webpackJsonpprocgen-skill-tree"]||[]).push([[0],{13:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAlCAYAAABcZvm2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAWNJREFUeNrsV8sNwjAMbUqBBWACxB2pQ8AKcGALTsAJuDEFB1gBhuDAuWICmICPQh01pXWdJqEFcaglRGRbfonjPLuMc+5QwhjLGEJfZusjxZOL9akZKye9G98vPMfvsAx4qBfKwfzBL9s6uUHpI6U/u7+BKGkNb/H6umtk7MczF0HyfKS4zo/k/4AgTV8DOizrqX8oECgC+MGa8lGJp9sJDiAB8nyqYoglvJOPbP97IqoATGxWVZeXJlMQwYHA3piF8wJIblOVNBBxe3TPMLoHIKtxrbS7AAbBrA4Y5NaPAXf8LjN6wKZ0RaZOnlAFZnuXInVR4FTE6eYp0olPhhshtXsAwY3PquoAJNkIY33U7HTs7hYBwV24ItUKqDwgKF3VzAZ6k8HF+B1BMF8xRJbeJoqMXHZAAQ1kwoluURCdzepEugGEImBrIADB7I4lyfbJLlw92FKE6b5hVd+ktv4vAQYASMWxvlAAvcsAAAAASUVORK5CYII="},15:function(t,e,i){t.exports=i(32)},20:function(t,e,i){},21:function(t,e,i){},22:function(t,e,i){},32:function(t,e,i){"use strict";i.r(e);var n=i(0),a=i.n(n),r=i(11),s=i.n(r),o=(i(20),i(21),i(22),i(3)),h=i(4),c=i(1),d=i(14),g=function(){for(var t={Q:!1,W:!1,E:!1,R:!1,T:!1,Y:!1,U:!1,I:!1,O:!1,P:!1,A:!1,S:!1,D:!1,F:!1,G:!1,H:!1,J:!1,K:!1,L:!1,Z:!1,X:!1,C:!1,V:!1,B:!1,N:!1,M:!1,Up:!1,Down:!1,Left:!1,Right:!1,Shift:!1,Spacebar:!1,Enter:!1},e=0,i=Object.keys(t);e<i.length;e++){t[i[e]]=!0}return t}(),p=function(){function t(){var e=this;Object(o.a)(this,t),this.down={Q:!1,W:!1,E:!1,R:!1,T:!1,Y:!1,U:!1,I:!1,O:!1,P:!1,A:!1,S:!1,D:!1,F:!1,G:!1,H:!1,J:!1,K:!1,L:!1,Z:!1,X:!1,C:!1,V:!1,B:!1,N:!1,M:!1,Up:!1,Down:!1,Left:!1,Right:!1,Shift:!1,Spacebar:!1,Enter:!1},this.justDown={Q:!1,W:!1,E:!1,R:!1,T:!1,Y:!1,U:!1,I:!1,O:!1,P:!1,A:!1,S:!1,D:!1,F:!1,G:!1,H:!1,J:!1,K:!1,L:!1,Z:!1,X:!1,C:!1,V:!1,B:!1,N:!1,M:!1,Up:!1,Down:!1,Left:!1,Right:!1,Shift:!1,Spacebar:!1,Enter:!1},this.justUp={Q:!1,W:!1,E:!1,R:!1,T:!1,Y:!1,U:!1,I:!1,O:!1,P:!1,A:!1,S:!1,D:!1,F:!1,G:!1,H:!1,J:!1,K:!1,L:!1,Z:!1,X:!1,C:!1,V:!1,B:!1,N:!1,M:!1,Up:!1,Down:!1,Left:!1,Right:!1,Shift:!1,Spacebar:!1,Enter:!1},this._queuedEvents=[],document.addEventListener("keydown",(function(t){return e.keyDown(t)}),!1),document.addEventListener("keyup",(function(t){return e.keyUp(t)}),!1),window.addEventListener("blur",(function(){e.clear()}),!1)}return Object(h.a)(t,[{key:"clear",value:function(){this.down={Q:!1,W:!1,E:!1,R:!1,T:!1,Y:!1,U:!1,I:!1,O:!1,P:!1,A:!1,S:!1,D:!1,F:!1,G:!1,H:!1,J:!1,K:!1,L:!1,Z:!1,X:!1,C:!1,V:!1,B:!1,N:!1,M:!1,Up:!1,Down:!1,Left:!1,Right:!1,Shift:!1,Spacebar:!1,Enter:!1},this.justDown={Q:!1,W:!1,E:!1,R:!1,T:!1,Y:!1,U:!1,I:!1,O:!1,P:!1,A:!1,S:!1,D:!1,F:!1,G:!1,H:!1,J:!1,K:!1,L:!1,Z:!1,X:!1,C:!1,V:!1,B:!1,N:!1,M:!1,Up:!1,Down:!1,Left:!1,Right:!1,Shift:!1,Spacebar:!1,Enter:!1},this.justUp={Q:!1,W:!1,E:!1,R:!1,T:!1,Y:!1,U:!1,I:!1,O:!1,P:!1,A:!1,S:!1,D:!1,F:!1,G:!1,H:!1,J:!1,K:!1,L:!1,Z:!1,X:!1,C:!1,V:!1,B:!1,N:!1,M:!1,Up:!1,Down:!1,Left:!1,Right:!1,Shift:!1,Spacebar:!1,Enter:!1},this._queuedEvents=[]}},{key:"keyUp",value:function(t){this._queuedEvents.push({event:t,isDown:!1})}},{key:"keyDown",value:function(t){this._queuedEvents.push({event:t,isDown:!0})}},{key:"formatKeyString",value:function(t){return" "===t?"Spacebar":1===t.length?t.toUpperCase():"Arrow"===t.slice(0,5)?t.slice(5):t[0].toUpperCase()+t.slice(1)}},{key:"eventToKey",value:function(t){var e=t.key;if(e=this.formatKeyString(e))return e;var i=t.keyCode||t.which;switch(i){case 13:e="Enter";break;case 16:e="Shift";break;case 37:e="Left";break;case 38:e="Up";break;case 39:e="Right";break;case 40:e="Down";break;default:e=String.fromCharCode(i)}return this.formatKeyString(e)}},{key:"update",value:function(){for(var t=0,e=Object.keys(this.justDown);t<e.length;t++){var i=e[t];this.justDown[i]=!1,this.justUp[i]=!1}var n,a=Object(d.a)(this._queuedEvents);try{for(a.s();!(n=a.n()).done;){var r=n.value,s=this.eventToKey(r.event);g[s]||console.log("got unrecognized keypress: [",s,"]",r),r.isDown?(this.down[s]||(this.justDown[s]=!0),this.down[s]=!0):(this.down[s]&&(this.justUp[s]=!0),this.down[s]=!1)}}catch(o){a.e(o)}finally{a.f()}this._queuedEvents=[]}}]),t}(),u=function(){function t(){Object(o.a)(this,t),this.frameTimestampsInTicks=[],this.frameTimestampsInTime=[],this.frameTimestampsInTicks.push(0)}return Object(h.a)(t,[{key:"tick",value:function(t){var e=this.frameTimestampsInTicks[this.frameTimestampsInTicks.length-1];this.frameTimestampsInTicks.push(e+t),this.frameTimestampsInTicks.length>120&&(this.frameTimestampsInTicks=this.frameTimestampsInTicks.slice(60)),this.frameTimestampsInTime.push((new Date).getTime()),this.frameTimestampsInTime.length>120&&(this.frameTimestampsInTime=this.frameTimestampsInTime.slice(60))}},{key:"getUps",value:function(){var t=this.frameTimestampsInTicks[this.frameTimestampsInTicks.length-1]-this.frameTimestampsInTicks[0],e=(this.frameTimestampsInTicks.length-1)/t;return e?60*e:60}},{key:"getFps",value:function(){var t=this.frameTimestampsInTime[this.frameTimestampsInTime.length-1]-this.frameTimestampsInTime[0],e=(this.frameTimestampsInTime.length-1)/t;return e?1e3*e:60}},{key:"getFpsString",value:function(){return this.getFps().toFixed(1)}},{key:"getUpsString",value:function(){return this.getUps().toFixed(1)}}]),t}(),l=function t(e){var i=this;Object(o.a)(this,t),this.sourceContainer=void 0,this.targetContainer=void 0,this.targetStartingX=void 0,this.targetStartingY=void 0,this.mouseStartingX=void 0,this.mouseStartingY=void 0,this.data=void 0,this.isDragging=!1,this.onDragStart=function(t){i.data=t.data,i.targetStartingX=i.targetContainer.x,i.targetStartingY=i.targetContainer.y;var e=i.data.getLocalPosition(i.sourceContainer);i.mouseStartingX=e.x,i.mouseStartingY=e.y,console.log(i),i.isDragging=!0},this.onDragEnd=function(){i.isDragging=!1},this.onDragMove=function(){if(i.isDragging){var t=i.data.getLocalPosition(i.sourceContainer);i.targetContainer.x=i.targetStartingX+(t.x-i.mouseStartingX),i.targetContainer.y=i.targetStartingY+(t.y-i.mouseStartingY)}};var n=e.source,a=e.target;n.interactive=!0,this.sourceContainer=n,this.targetContainer=a,n.addListener("pointerdown",this.onDragStart),n.addListener("pointerup",this.onDragEnd),n.addListener("pointerupoutside",this.onDragEnd),n.addListener("pointermove",this.onDragMove)};var f=i(13),m=i.n(f);var w={originalWidth:800,originalHeight:800},v=function(){function t(e,i){var n,a=this;Object(o.a)(this,t),this.app=void 0,this.stage=void 0,this.fixedCameraStage=void 0,this.actionStage=void 0,this.backdropStage=void 0,this.config=void 0,this.fpsTracker=void 0,this.onResize=[],this.config=Object.assign({},w,e),this.app=i||new c.a({width:this.config.originalWidth,height:this.config.originalHeight,antialias:!0,transparent:!0,resolution:window.devicePixelRatio||1,autoDensity:!0,powerPreference:"low-power",backgroundColor:16777215}),this.stage=this.app.stage,this.stage.sortableChildren=!0,this.fixedCameraStage=new c.d,this.fixedCameraStage.zIndex=1,this.fixedCameraStage.sortableChildren=!0,this.stage.addChild(this.fixedCameraStage),this.actionStage=new c.d,this.actionStage.zIndex=0,this.actionStage.sortableChildren=!0,this.stage.addChild(this.actionStage),this.backdropStage=new c.d,this.backdropStage.zIndex=-1,this.backdropStage.sortableChildren=!0,this.stage.addChild(this.backdropStage),n={source:this.backdropStage,target:this.actionStage},new l(n);var r=new p;this.app.ticker.add((function(t){r.update(),r.down.Right&&(a.actionStage.x-=10*t),r.down.Left&&(a.actionStage.x+=10*t),r.down.Up&&(a.actionStage.y+=10*t),r.down.Down&&(a.actionStage.y-=10*t)})),this.fpsTracker=new u,this.app.ticker.add((function(t){a.fpsTracker.tick(t)}))}return Object(h.a)(t,[{key:"register",value:function(t){t.appendChild(this.app.view)}},{key:"resize",value:function(t,e){this.app.renderer.resize(t-16,e-16),this.actionStage.pivot.x=-.5*(this.app.screen.width-this.config.originalWidth),this.actionStage.pivot.y=-.5*(this.app.screen.height-this.config.originalHeight),this.onResize.map((function(t){return t()}))}},{key:"drawStart",value:function(){var t=this,e=new c.e("",{fontFamily:"PixelMix",fontSize:12});this.app.ticker.add((function(){e.text=t.fpsTracker.getFpsString()+" FPS\n"+t.fpsTracker.getUpsString()+" UPS\n"+t.app.screen.width+"x"+t.app.screen.height})),e.x=this.app.screen.width,this.onResize.push((function(){e.x=t.app.screen.width})),e.y=0,e.anchor.x=1,this.fixedCameraStage.addChild(e);var i=new c.c;this.backdropStage.addChild(i),i.beginFill(11259375,1),i.interactive=!0,i.drawRect(0,0,this.app.screen.width,this.app.screen.height),this.onResize.push((function(){i.width=t.app.screen.width,i.height=t.app.screen.height}));var n=new c.c;n.lineStyle(2,10066329),n.drawCircle(0,0,6),n.x=this.app.screen.width/2,n.y=this.app.screen.height/2,this.onResize.push((function(){n.x=t.app.screen.width/2,n.y=t.app.screen.height/2})),n.interactive=!0,this.fixedCameraStage.addChild(n),function(t){var e=new c.b,i=c.f.from(m.a);window.alert("doing bunny stuff");for(var n=0;n<25;n++){var a=new c.d(i);a.anchor.set(.5),a.x=n%5*40,a.y=40*Math.floor(n/5),e.addChild(a),a.interactive=!0}var r=new c.c;r.lineStyle(2,0),r.beginFill(0,0);var s=e.getBounds();r.drawRect(s.x,s.y,s.width,s.height),e.addChild(r),e.x=t.x,e.y=t.y;var o=e.getLocalBounds();e.pivot.x=o.x+o.width/2,e.pivot.y=o.y+o.height/2,t.ticker.add((function(t){e.rotation-=.01*t})),t.parent.addChild(e),t.parent}({parent:this.actionStage,ticker:this.app.ticker,x:this.app.screen.width/2,y:this.app.screen.height/2})}}]),t}(),S=new v({originalWidth:window.innerWidth-16,originalHeight:window.innerHeight-16});function k(t){var e=Object(n.useRef)(null);return Object(n.useEffect)((function(){e.current.appendChild(S.app.view),e.current.appendChild(S.app.view),console.log(e.current),S.drawStart()}),[]),window.onresize=function(){S.resize(window.innerWidth,window.innerHeight)},a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{ref:e}),a.a.createElement("button",{onClick:function(){}},"draw circle"),a.a.createElement("button",{onClick:function(){e.current.removeChild(S.app.view),S=new v({originalWidth:window.innerWidth-16,originalHeight:window.innerHeight-16}),e.current.appendChild(S.app.view),S.drawStart()}},"[DEBUG] reset and rerender"))}var T=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(k,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.a6855b81.chunk.js.map