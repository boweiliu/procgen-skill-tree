{"version":3,"sources":["bunny.png","lib/util/epsilon_math.ts","lib/util/misc.ts","lib/util/geometry/vector2.ts","lib/util/geometry/line.ts","lib/util/geometry/rect.ts","lib/util/data_structures/pair.ts","pixi/RenderRects.ts","lib/pixi/keyboard.ts","pixi/Application.ts","components/PixiComponent.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","epsGreaterThan","x","y","epsLessThan","Util","list","fn","lowestT","lowestValue","item","value","obj","highestT","highestValue","low","high","Math","floor","random","array","key","sort","a","b","str","mapObj","re","RegExp","Object","keys","join","replace","matched","toLowerCase","func","timeoutId","waitMilliseconds","options","isImmediate","result","args","doLater","undefined","apply","shouldCallNow","clearTimeout","setTimeout","d","monthName","getMonth","getDate","getHours","substr","getMinutes","getSeconds","arr","concat","string","length","intersperse","character","repeat","Vector2","propsOrX","_x","_y","this","toString","round","p","abs","max","dx","dy","sqrt","newY","about","amount","origin","angle","PI","cos","sin","other","__type","trans","scale","newX","t","console","error","add","tx","ty","lerp","highX","highY","lowX","lowY","RandRange","hasOwnProperty","JSON","stringify","Zero","One","Line","props","x1","x2","y1","y2","_x1","_x2","_y1","_y2","serialized","start","end","cx","cy","ex","theta","atan2","rotate","equals","orientedByX","orientedByY","summedLength","min","filter","l","isDegenerate","transform","reviver","newEnd","newStart","graphics","color","lineStyle","moveTo","lineTo","p1","p2","p3","p4","s","lineIntersection","mag","split","map","Number","Rect","_width","_height","width","height","withY","withX","topLeft","FromPoints","bottomRight","topRight","bottomLeft","center","centerX","centerY","right","bottom","point","size","dimensions","edgesOnlyIsAnIntersection","intersection","getIntersection","smaller","xmin","xmax1","xmax2","xmax","ymin","ymax1","ymax2","ymax","translate","o","w","h","shrink","botRight","r","Pair","first","second","_first","_second","hash","RenderRects","stage","containerRect","config","containerHeightProportion","aspectRatio1","aspectRatio3","downscaleRatio12","downscaleRatio23","circleSize","circleOnColor","circleOffColor","circleHoverColor","circleFillColor","borderOffColor","borderOnColor","borderThickness","centerToEdgeBorderRatio2","centerToEdgeBorderRatio3","cornerCompression1","cornerCompression2","cornerCompression3","debugHasRectBorder","debugRandomOn","assign","hasBorder","newHeight","newRect","withScale","drawRect","layer2","nestRectPair","aspectRatio2","layer3","original","downscaleRatio","newAspectRatio","centerToEdgeBorderRatio","longSide","shortSide","offset","newWidth","leftCenter","rightCenter","FromCenter","topCenter","bottomCenter","rect","cornerCompressionRatio","corners","midpoints","left","top","Pixi","addChild","drawLine","drawCorners","values","drawCircleAt","beginFill","drawCircle","endFill","KeyInfoMap","m","Q","W","E","R","T","Y","U","I","O","P","A","S","D","F","G","H","J","K","L","Z","X","C","V","B","N","M","Up","Down","Left","Right","Shift","Spacebar","Enter","KeyboardState","down","justDown","justUp","_queuedEvents","document","addEventListener","e","keyDown","keyUp","window","clear","push","event","isDown","toUpperCase","slice","formatKeyString","number","keyCode","which","String","fromCharCode","queuedEvent","eventToKey","log","defaultConfig","canvasWidth","canvasHeight","application","app","fixedCameraStage","actionStage","backdropStage","renderRects","antialias","backgroundColor","sortableChildren","zIndex","keyboard","ticker","delta","update","curr","appendChild","view","viewport","pixiExample","clickableHud","interactive","addListener","alert","reticle","container","texture","from","bunny","i","anchor","set","screen","pivot","rotation","PixiComponent","useRef","useEffect","register","current","drawStart","ref","onClick","App","className","Boolean","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.976002c8.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAlCAYAAABcZvm2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAWNJREFUeNrsV8sNwjAMbUqBBWACxB2pQ8AKcGALTsAJuDEFB1gBhuDAuWICmICPQh01pXWdJqEFcaglRGRbfonjPLuMc+5QwhjLGEJfZusjxZOL9akZKye9G98vPMfvsAx4qBfKwfzBL9s6uUHpI6U/u7+BKGkNb/H6umtk7MczF0HyfKS4zo/k/4AgTV8DOizrqX8oECgC+MGa8lGJp9sJDiAB8nyqYoglvJOPbP97IqoATGxWVZeXJlMQwYHA3piF8wJIblOVNBBxe3TPMLoHIKtxrbS7AAbBrA4Y5NaPAXf8LjN6wKZ0RaZOnlAFZnuXInVR4FTE6eYp0olPhhshtXsAwY3PquoAJNkIY33U7HTs7hYBwV24ItUKqDwgKF3VzAZ6k8HF+B1BMF8xRJbeJoqMXHZAAQ1kwoluURCdzepEugGEImBrIADB7I4lyfbJLlw92FKE6b5hVd+ktv4vAQYASMWxvlAAvcsAAAAASUVORK5CYII=\"","export const EPSILON = 0.0000001;\n\nexport const epsEqual = (x: number, y: number) => {\n  return Math.abs(x - y) < EPSILON;\n}\n\nexport const epsGreaterThan = (x: number, y: number) => {\n  return (x + EPSILON - y) > 0;\n}\n\nexport const epsLessThan = (x: number, y: number) => {\n  return (x - EPSILON - y) < 0;\n}","let lastUsedId = 0;\n\nexport const getUniqueID = () => {\n  return lastUsedId++;\n};\n\nexport class Util {\n  static MinBy<T>(list: T[], fn: (T: T) => number): T | null {\n    let lowestT: T | null = null;\n    let lowestValue: number | null = null;\n\n    for (const item of list) {\n      const value = fn(item);\n\n      if (lowestValue === null || value < lowestValue) {\n        lowestT = item;\n        lowestValue = value;\n      }\n    }\n\n    return lowestT;\n  }\n\n  static MinByAndValue<T>(list: T[], fn: (T: T) => number): { obj: T, value: number } | null {\n    let lowestT: T | null = null;\n    let lowestValue: number | null = null;\n\n    for (const item of list) {\n      const value = fn(item);\n\n      if (lowestValue === null || value < lowestValue) {\n        lowestT = item;\n        lowestValue = value;\n      }\n    }\n\n    return lowestT === null || lowestValue === null ? null : { obj: lowestT, value: lowestValue };\n  }\n\n  static MaxBy<T>(list: T[], fn: (T: T) => number): T | null {\n    let highestT: T | null = null;\n    let highestValue: number | null = null;\n\n    for (const item of list) {\n      const value = fn(item);\n\n      if (highestValue === null || value > highestValue) {\n        highestT = item;\n        highestValue = value;\n      }\n    }\n\n    return highestT;\n  }\n\n  static RandRange(low: number, high: number): number {\n    return Math.floor(Math.random() * (high - low) + low);\n  }\n\n  public static SortByKey<T>(array: T[], key: (x: T) => number): T[] {\n    return array.sort((a, b) => {\n      return key(a) - key(b)\n    });\n  }\n\n  public static ReplaceAll(\n    str: string,\n    mapObj: { [key: string]: string }\n  ): string {\n    const re = new RegExp(Object.keys(mapObj).join('|'), 'gi')\n\n    return str.replace(re, matched => {\n      return mapObj[matched.toLowerCase()]\n    });\n  }\n\n  public static Debounce<F extends (...args: any[]) => void>(\n    func: F,\n    waitMilliseconds = 50,\n    options = {\n      isImmediate: false,\n    }\n  ): F {\n    let timeoutId: any; // types are different on node vs client, so we have to use any.\n\n    const result = (...args: any[]) => {\n      const doLater = () => {\n        timeoutId = undefined;\n        if (!options.isImmediate) {\n          func.apply(this, args);\n        }\n      }\n\n      const shouldCallNow = options.isImmediate && timeoutId === undefined;\n\n      if (timeoutId !== undefined) {\n        clearTimeout(timeoutId);\n      }\n\n      timeoutId = setTimeout(doLater, waitMilliseconds);\n\n      if (shouldCallNow) {\n        func.apply(this, args);\n      }\n    }\n\n    return result as any;\n  }\n\n  public static FormatDate(d: Date): string {\n    const monthName = [\n      'Jan',\n      'Feb',\n      'Mar',\n      'Apr',\n      'May',\n      'Jun',\n      'Jul',\n      'Aug',\n      'Sep',\n      'Oct',\n      'Nov',\n      'Dec',\n    ][d.getMonth()]\n\n    return `${monthName} ${d.getDate()}, ${('00' + d.getHours()).substr(-2)}:${(\n      '00' + d.getMinutes()\n    ).substr(-2)}:${('00' + d.getSeconds()).substr(-2)}`;\n  }\n\n  public static FlattenByOne<T>(arr: T[][]): T[] {\n    let result: T[] = []\n\n    for (const obj of arr) {\n      result = result.concat(obj)\n    }\n\n    return result\n  }\n\n  public static PadString(string: string, length: number, intersperse = \"\", character = \" \") {\n    return string + intersperse + character.repeat(length - string.length);\n  }\n}\n","import { EPSILON } from \"../epsilon_math\";\nimport { Util } from \"../misc\";\n\nexport interface IVector2 {\n  x: number;\n  y: number;\n}\n\nexport class Vector2 {\n  private _x: number;\n  private _y: number;\n\n  public get x(): number { return this._x; }\n  public get y(): number { return this._y; }\n\n  constructor();\n  constructor(x: number, y: number);\n  constructor(props: { x: number, y: number });\n  constructor(propsOrX: { x: number, y: number } | number = { x: 0, y: 0 }, y?: number) {\n    if (typeof propsOrX === \"number\") {\n      this._x = propsOrX;\n      this._y = y!;\n    } else {\n      this._x = propsOrX.x;\n      this._y = propsOrX.y;\n    }\n  }\n\n  public get half(): Vector2 {\n    return new Vector2({ x: this.x / 2, y: this.y / 2 });\n  }\n\n  public static Zero: Vector2 = new Vector2(0, 0);\n  public static One: Vector2 = new Vector2(1, 1);\n\n  static IsVector2(x: any): x is Vector2 {\n    return x instanceof Vector2;\n  }\n\n  static Random(highX: number, highY: number, lowX = 0, lowY = 0) {\n    return new Vector2({\n      x: Util.RandRange(lowX, highX),\n      y: Util.RandRange(lowY, highY),\n    });\n  }\n\n  hash(): string {\n    return this.toString();\n  }\n\n  toString(): string {\n    return `[${this.x}, ${this.y}]`;\n  }\n\n  invert(): Vector2 {\n    return new Vector2({\n      x: -this.x,\n      y: -this.y,\n    });\n  }\n\n  round(): Vector2 {\n    return new Vector2({\n      x: Math.round(this.x),\n      y: Math.round(this.y),\n    });\n  }\n\n  floor(): Vector2 {\n    return new Vector2({\n      x: Math.floor(this.x),\n      y: Math.floor(this.y),\n    });\n  }\n\n  taxicabDistance(p: Vector2): number {\n    return Math.abs(p.x - this.x) + Math.abs(p.y - this.y);\n  }\n\n  diagonalDistance(p: IVector2): number {\n    return Math.max(Math.abs(p.x - this.x), Math.abs(p.y - this.y));\n  }\n\n  distance(p: IVector2): number {\n    let dx = Math.abs(p.x - this.x);\n    let dy = Math.abs(p.y - this.y);\n\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n\n  translate(p: { x: number, y: number }): Vector2 {\n    return new Vector2({\n      x: this.x + p.x,\n      y: this.y + p.y,\n    });\n  }\n\n  subtract(p: { x: number, y: number }): Vector2 {\n    return new Vector2({\n      x: this.x - p.x,\n      y: this.y - p.y,\n    });\n  }\n\n  add(p: { x: number, y: number }): Vector2 {\n    return new Vector2({\n      x: this.x + p.x,\n      y: this.y + p.y,\n    });\n  }\n\n  addX(x: number): Vector2 {\n    return new Vector2({\n      x: this.x + x,\n      y: this.y,\n    });\n  }\n\n  addY(y: number): Vector2 {\n    return new Vector2({\n      x: this.x,\n      y: this.y + y,\n    });\n  }\n\n  subtractX(x: number): Vector2 {\n    return new Vector2({\n      x: this.x - x,\n      y: this.y,\n    });\n  }\n\n  subtractY(y: number): Vector2 {\n    return new Vector2({\n      x: this.x,\n      y: this.y - y,\n    });\n  }\n\n  clampY(low: number, high: number): Vector2 {\n    let newY = this.y;\n\n    if (newY < low) { newY = low; }\n    if (newY > high) { newY = high; }\n\n    return new Vector2({\n      x: this.x,\n      y: newY,\n    });\n  }\n\n  scale(about: { x: number; y: number }, amount: { x: number; y: number }): Vector2 {\n    return new Vector2({\n      x: (this.x - about.x) * amount.x + about.x,\n      y: (this.y - about.y) * amount.y + about.y,\n    });\n  }\n\n  rotate(origin: Vector2, angle: number): Vector2 {\n    angle = angle / (180 / Math.PI);\n\n    return new Vector2({\n      x: Math.cos(angle) * (this.x - origin.x) - Math.sin(angle) * (this.y - origin.y) + origin.x,\n      y: Math.sin(angle) * (this.x - origin.x) + Math.cos(angle) * (this.y - origin.y) + origin.y,\n    });\n  }\n\n  equals(other: Vector2 | undefined): boolean {\n    if (other === undefined) {\n      return false;\n    }\n\n    return (\n      Math.abs(this.x - other.x) < EPSILON &&\n      Math.abs(this.y - other.y) < EPSILON\n    );\n  }\n\n  multiply(other: Vector2 | number): Vector2 {\n    if (typeof other === \"number\") {\n      return new Vector2({\n        x: this.x * other,\n        y: this.y * other,\n      });\n    } else {\n      return new Vector2({\n        x: this.x * other.x,\n        y: this.y * other.y,\n      });\n    }\n  }\n\n  divide(other: Vector2 | number): Vector2 {\n    if (typeof other === \"number\") {\n      return new Vector2({\n        x: this.x / other,\n        y: this.y / other,\n      });\n    } else {\n      return new Vector2({\n        x: this.x / other.x,\n        y: this.y / other.y,\n      });\n    }\n  }\n\n  toJSON(): any {\n    return {\n      __type: \"Vector2\",\n      x: this.x,\n      y: this.y,\n    }\n  }\n\n  transform(trans: Vector2, scale: number): Vector2 {\n    return new Vector2({\n      x: Math.floor((this.x - trans.x) * scale),\n      y: Math.floor((this.y - trans.y) * scale),\n    });\n  }\n\n  normalize(): Vector2 {\n    if (this.x === 0 && this.y === 0) {\n      return this;\n    }\n\n    const length = Math.sqrt(this.x * this.x + this.y * this.y);\n\n    return new Vector2({\n      x: this.x / length,\n      y: this.y / length\n    });\n  }\n\n  withX(newX: number): Vector2 {\n    return new Vector2({\n      x: newX,\n      y: this.y,\n    });\n  }\n\n  withY(newY: number): Vector2 {\n    return new Vector2({\n      x: this.x,\n      y: newY,\n    });\n  }\n\n  invertX(): Vector2 {\n    return new Vector2({\n      x: -this.x,\n      y: this.y,\n    });\n  }\n\n  lerp(other: Vector2, t: number): Vector2 {\n    if (t > 1 || t < 0) { console.error(\"Lerp t must be between 0 and 1.\"); }\n    if (t === 0) return this;\n    if (t === 1) return other;\n\n    return this.scale({ x: 0, y: 0 }, { x: 1 - t, y: 1 - t }).add(other.scale({ x: 0, y: 0 }, { x: t, y: t }))\n  }\n\n  lerp2D(other: Vector2, tx: number, ty: number): Vector2 {\n    if (tx > 1 || tx < 0 || ty > 1 || ty < 0) { console.error(\"Lerp t must be between 0 and 1.\"); }\n    return this.scale({ x: 0, y: 0 }, { x: 1 - tx, y: 1 - ty }).add(other.scale({ x: 0, y: 0 }, { x: tx, y: ty }))\n  }\n\n  coserp(other: Vector2, t: number): Vector2 {\n    t = 0.5 * (1 + Math.cos(2 * t * Math.PI));\n\n    return this.lerp(other, t);\n  }\n\n  static Deserialize(obj: any): Vector2 {\n    if (!obj.hasOwnProperty(\"x\") || !obj.hasOwnProperty(\"y\")) {\n      console.error(\"Failed deserializing point\");\n    }\n\n    return new Vector2({\n      x: obj.x,\n      y: obj.y,\n    });\n  }\n\n  static Serialize(obj: Vector2): string {\n    return JSON.stringify({ x: obj.x, y: obj.y });\n  }\n}","import { Vector2 } from \"./vector2\"\nimport { Graphics } from \"pixi.js\";\nimport { epsGreaterThan, epsLessThan } from \"../epsilon_math\";\n\nexport class Line {\n  private _x1: number;\n  private _x2: number;\n  private _y1: number;\n  private _y2: number;\n\n  public get x1(): number { return this._x1; }\n  public get x2(): number { return this._x2; }\n  public get y1(): number { return this._y1; }\n  public get y2(): number { return this._y2; }\n\n  public get start(): Vector2 { return new Vector2({ x: this.x1, y: this.y1 }); }\n  public get end()  : Vector2 { return new Vector2({ x: this.x2, y: this.y2 }); }\n\n  public get angleInDegrees(): number {\n    const cx = this._x1;\n    const cy = this._y1;\n\n    const ex = this._x2;\n    const ey = this._y2;\n\n    const dy = ey - cy;\n    const dx = ex - cx;\n\n    let theta = Math.atan2(dy, dx);\n\n    theta *= 180 / Math.PI;\n\n    if (theta < 0) {\n      theta = 360 + theta;\n    }\n\n    return theta;\n  }\n\n  public serialized = \"\";\n\n  constructor(props: { x1: number, x2: number, y1: number, y2: number } |\n                     { start: Vector2, end: Vector2 }) {\n    let x1, x2, y1, y2;\n\n    if ('x1' in props) {\n      x1 = props.x1;\n      x2 = props.x2;\n      y1 = props.y1;\n      y2 = props.y2;\n    } else {\n      x1 = props.start.x;\n      x2 = props.end.x;\n      y1 = props.start.y;\n      y2 = props.end.y;\n    }\n\n    this._x1 = x1;\n    this._y1 = y1;\n    this._x2 = x2;\n    this._y2 = y2;\n\n    this.serialized = `${ this.x1 }|${ this.x2 }|${ this.y1 }|${ this.y2 }`;\n  }\n\n  public get length(): number {\n    return Math.sqrt(\n      (this.x2 - this.x1) * (this.x2 - this.x1) +\n      (this.y2 - this.y1) * (this.y2 - this.y1)\n    );\n  }\n\n  public get isDegenerate(): boolean {\n    return this.length === 0;\n  }\n\n  public rotateAbout(origin: Vector2, angle: number): Line {\n    const start = this.start;\n    const end = this.end;\n\n    return new Line({\n      start: start.rotate(origin, angle),\n      end: end.rotate(origin, angle),\n    });\n  }\n\n  public scaleAbout(about: Vector2, amount: Vector2): Line {\n    return new Line({\n      start: this.start.scale(about, amount),\n      end: this.end.scale(about, amount),\n    });\n  }\n\n  sharesAVertexWith(other: Line): Vector2 | null {\n    if (this.start.equals(other.start)) { return this.start; }\n    if (this.start.equals(other.end))   { return this.start; }\n\n    if (this.end.equals(other.start)) { return this.end; }\n    if (this.end.equals(other.end))   { return this.end; }\n\n    return null;\n  }\n\n  static DeserializeLine(s: string): Line {\n    const [ x1, x2, y1, y2 ] = s.split(\"|\").map(x => Number(x));\n\n    return new Line({ x1, x2, y1, y2 });\n  }\n\n  isXAligned(): boolean {\n    return this.x1 === this.x2;\n  }\n\n  isYAligned(): boolean {\n    return this.y1 === this.y2;\n  }\n\n  // Must be horizontally/vertically oriented lines\n  // Does not consider intersection, only overlap\n  getOverlap(other: Line): Line | undefined {\n    const orientedByX = (\n      this.x1 === this.x2 &&\n      this.x1 === other.x1 &&\n      this.x1 === other.x2\n    );\n\n    const orientedByY = (\n      this.y1 === this.y2 &&\n      this.y1 === other.y1 &&\n      this.y1 === other.y2\n    );\n\n    if (!orientedByX && !orientedByY) { return undefined; }\n\n    const summedLength  = this.length + other.length;\n    const overallLength = new Line({\n      x1: Math.min(this.x1, other.x1),\n      y1: Math.min(this.y1, other.y1),\n      x2: Math.max(this.x2, other.x2),\n      y2: Math.max(this.y2, other.y2),\n    }).length;\n\n    if (overallLength >= summedLength) {\n      // These lines do not overlap.\n\n      return undefined;\n    }\n\n    if (orientedByX) {\n      return new Line({\n        x1: this.x1,\n        x2: this.x2,\n        y1: Math.max(this.y1, other.y1),\n        y2: Math.min(this.y2, other.y2),\n      });\n    } else /* if (orientedByY) */ {\n      return new Line({\n        y1: this.y1,\n        y2: this.y2,\n        x1: Math.max(this.x1, other.x1),\n        x2: Math.min(this.x2, other.x2),\n      });\n    }\n  }\n\n  // A----B----C----D\n  // AD - BC returns AB and CD.\n  getNonOverlappingSections(other: Line): Line[] | undefined {\n    const orientedByX = (\n      this.x1 === this.x2 &&\n      this.x1 === other.x1 &&\n      this.x1 === other.x2\n    );\n\n    const orientedByY = (\n      this.y1 === this.y2 &&\n      this.y1 === other.y1 &&\n      this.y1 === other.y2\n    );\n\n    if (!orientedByX && !orientedByY) { return undefined; }\n\n    const summedLength  = new Line(this).length + new Line(other).length;\n    const overallLength = new Line({\n      x1: Math.min(this.x1, other.x1),\n      y1: Math.min(this.y1, other.y1),\n      x2: Math.max(this.x1, other.x1),\n      y2: Math.max(this.y1, other.y1),\n    }).length;\n\n    if (overallLength >= summedLength) {\n      // These lines do not overlap.\n\n      return undefined;\n    }\n\n    if (orientedByX) {\n      return [\n        new Line({ x1: this.x1, x2: this.x2, y1: Math.min(this.y1, other.y1), y2: Math.max(this.y1, other.y1), }),\n        new Line({ x1: this.x1, x2: this.x2, y1: Math.min(this.y2, other.y2), y2: Math.max(this.y2, other.y2), }),\n      ].filter(l => !l.isDegenerate);\n    } else /* if (orientedByY) */ {\n      return [\n        new Line({ y1: this.y1, y2: this.y2, x1: Math.min(this.x1, other.x1), x2: Math.max(this.x1, other.x1), }),\n        new Line({ y1: this.y1, y2: this.y2, x1: Math.min(this.x2, other.x2), x2: Math.max(this.x2, other.x2), }),\n      ].filter(l => !l.isDegenerate);\n    }\n  }\n\n  clone(): Line {\n    return new Line({ x1: this.x1, x2: this.x2, y1: this.y1, y2: this.y2 });\n  }\n\n  translate(p: Vector2): Line {\n    return new Line({\n      x1: this.x1 + p.x,\n      x2: this.x2 + p.x,\n\n      y1: this.y1 + p.y,\n      y2: this.y2 + p.y,\n    });\n  }\n\n  transform(trans: Vector2, scale: number): Line {\n    return new Line({\n      start: this.start.transform(trans, scale),\n      end: this.end.transform(trans, scale),\n    });\n  }\n\n  toJSON(): any {\n    return {\n      x1     : this.x1,\n      x2     : this.x2,\n      y1     : this.y1,\n      y2     : this.y2,\n      reviver: \"Line\",\n    };\n  }\n\n  toString(): string {\n    return `Line: [(${ this.x1 },${ this.y1 }) -> (${ this.x2 },${ this.y2 })]`;\n  }\n\n  equals(other: Line | null) {\n    if (other === null) { return false; }\n\n    return (\n      this.x1 === other.x1 &&\n      this.x2 === other.x2 &&\n      this.y1 === other.y1 &&\n      this.y2 === other.y2\n    ) || (\n      this.x1 === other.x2 &&\n      this.x2 === other.x1 &&\n      this.y1 === other.y2 &&\n      this.y2 === other.y1\n    );\n  }\n\n  withNewEnd(newEnd: Vector2): Line {\n    return new Line({\n      x1: this.x1,\n      y1: this.y1,\n      x2: newEnd.x,\n      y2: newEnd.y,\n    });\n  }\n\n  withNewStart(newStart: Vector2): Line {\n    return new Line({\n      x1: newStart.x,\n      y1: newStart.y,\n      x2: this.x2,\n      y2: this.y2,\n    });\n  }\n\n  static Deserialize(obj: any): Line {\n    if (\n      !obj.hasOwnProperty(\"x1\") ||\n      !obj.hasOwnProperty(\"y1\") ||\n      !obj.hasOwnProperty(\"x2\") ||\n      !obj.hasOwnProperty(\"y2\")) {\n\n      console.error(\"Failed deserializing Rect\");\n    }\n\n    return new Line({\n      x1: obj.x1,\n      y1: obj.y1,\n      x2: obj.x2,\n      y2: obj.y2,\n    });\n  }\n\n  static Serialize(obj: Line): string {\n    return JSON.stringify({\n      x1: obj.x1,\n      y1: obj.y1,\n      x2: obj.x2,\n      y2: obj.y2,\n    });\n  }\n\n  drawOnto(graphics: Graphics, color = 0xff0000) {\n    graphics.lineStyle(3, color, 1);\n\n    graphics.moveTo(this.x1, this.y1);\n    graphics.lineTo(this.x2, this.y2);\n  }\n\n  /** \n   * Returns the point where these two lines, if extended arbitrarily, would\n   * intersect.\n   */\n  lineIntersection(other: Line): Vector2 {\n    const p1 = this.start;\n    const p2 = this.end;\n    const p3 = other.start;\n    const p4 = other.end;\n\n    const s = (\n      (p4.x - p3.x) * \n      (p1.y - p3.y) - \n      (p4.y - p3.y) * \n      (p1.x - p3.x)) / (\n      (p4.y - p3.y) * \n      (p2.x - p1.x) - \n      (p4.x - p3.x) * \n      (p2.y - p1.y)\n    );\n\n    const x = p1.x + s * (p2.x - p1.x);\n    const y = p1.y + s * (p2.y - p1.y);\n\n    return new Vector2({ x, y });\n  }\n\n  /**\n   * Returns the point where these two segments exist, if there is one.\n   */\n  segmentIntersection(other: Line): Vector2 | null {\n    const lineIntersection = this.lineIntersection(other);\n\n    const x = lineIntersection.x;\n    const y = lineIntersection.y;\n\n    if (\n      (\n        // within us\n\n        epsGreaterThan(x, Math.min(this.x1, this.x2)) &&\n        epsLessThan   (x, Math.max(this.x1, this.x2)) &&\n        epsGreaterThan(y, Math.min(this.y1, this.y2)) &&\n        epsLessThan   (y, Math.max(this.y1, this.y2))\n      ) && (\n        // within other\n\n        epsGreaterThan(x, Math.min(other.x1, other.x2)) &&\n        epsLessThan   (x, Math.max(other.x1, other.x2)) &&\n        epsGreaterThan(y, Math.min(other.y1, other.y2)) &&\n        epsLessThan   (y, Math.max(other.y1, other.y2))\n      )\n    ) {\n      return lineIntersection;\n    }\n\n    return null;\n  }\n\n  normalize(): Line {\n    const mag = Math.sqrt(\n      (this.x1 - this.x2) ** 2 +\n      (this.y1 - this.y2) ** 2\n    );\n\n    return new Line({\n      start: this.start,\n      end: new Vector2({\n        x: this.start.x + (this.end.x - this.start.x) / mag,\n        y: this.start.x + (this.end.y - this.start.y) / mag,\n      })\n    })\n  }\n\n  hash(): string {\n    return this.toString();\n  }\n\n  add(x: Vector2): Line {\n    return new Line({ \n      start: this.start.add(x),\n      end: this.end.add(x),\n    })\n  }\n}\n","import { Line } from \"./line\";\nimport { Vector2, IVector2 } from \"./vector2\";\n\n/**\n * Immutable rectangle class.\n */\nexport class Rect {\n  private _x: number;\n  private _y: number;\n  private _width: number;\n  private _height: number;\n\n  public get x(): number {\n    return this._x;\n  }\n\n  public get y(): number {\n    return this._y;\n  }\n\n  public get width(): number {\n    return this._width;\n  }\n\n  public get height(): number {\n    return this._height;\n  }\n\n  public get centerX(): number {\n    return this._x + this._width / 2;\n  }\n\n  public get centerY(): number {\n    return this._y + this._height / 2;\n  }\n\n  public get right(): number {\n    return this._x + this._width;\n  }\n\n  public get bottom(): number {\n    return this._y + this._height;\n  }\n\n  public get top(): number {\n    return this._y;\n  }\n\n  public get left(): number {\n    return this._x;\n  }\n\n  public get center(): Vector2 {\n    return new Vector2({\n      x: this.x + this.width / 2,\n      y: this.y + this.height / 2,\n    });\n  }\n\n  public get dimensions(): Vector2 {\n    return new Vector2({ x: this.width, y: this.height });\n  }\n\n  public static FromPoint(point: IVector2, size: number): Rect {\n    return new Rect({\n      x: point.x,\n      y: point.y,\n      width: size,\n      height: size,\n    });\n  }\n\n  public static FromPoints(p1: IVector2, p2: IVector2): Rect {\n    return new Rect({\n      x: Math.min(p1.x, p2.x),\n      y: Math.min(p1.y, p2.y),\n      width: Math.abs(p1.x - p2.x),\n      height: Math.abs(p1.y - p2.y),\n    });\n  }\n\n  public static FromCenter(props: {\n    center: IVector2;\n    dimensions: IVector2;\n  }): Rect {\n    return new Rect({\n      x: props.center.x - props.dimensions.x / 2,\n      y: props.center.y - props.dimensions.y / 2,\n      width: props.dimensions.x,\n      height: props.dimensions.y,\n    });\n  }\n\n  public withRight(value: number): Rect {\n    return new Rect({\n      x: this.x,\n      y: this.y,\n      width: value - this.x,\n      height: this.height,\n    });\n  }\n\n  public withWidth(value: number): Rect {\n    return new Rect({\n      x: this.x,\n      y: this.y,\n      width: value,\n      height: this.height,\n    });\n  }\n\n  public withHeight(value: number): Rect {\n    return new Rect({\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: value,\n    });\n  }\n\n  public withBottom(value: number): Rect {\n    return new Rect({\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: value - this.y,\n    });\n  }\n\n  public withX(value: number): Rect {\n    return new Rect({\n      x: value,\n      y: this.y,\n      width: this.width,\n      height: this.height,\n    });\n  }\n\n  public withY(value: number): Rect {\n    return new Rect({\n      x: this.x,\n      y: value,\n      width: this.width,\n      height: this.height,\n    });\n  }\n\n  public withTop(value: number): Rect {\n    return this.withY(value);\n  }\n\n  public withLeft(value: number): Rect {\n    return this.withX(value);\n  }\n\n  /**\n   * bottomRight is held constant.\n   */\n  public withTopLeft(topLeft: IVector2): Rect {\n    return Rect.FromPoints(topLeft, this.bottomRight);\n  }\n\n  /**\n   * bottomLeft is held constant.\n   */\n  public withTopRight(topRight: IVector2): Rect {\n    return Rect.FromPoints(topRight, this.bottomLeft);\n  }\n\n  /**\n   * topLeft is held constant.\n   */\n  public withBottomRight(bottomRight: IVector2): Rect {\n    return Rect.FromPoints(bottomRight, this.topLeft);\n  }\n\n  /**\n   * topRight is held constant.\n   */\n  public withBottomLeft(bottomLeft: IVector2): Rect {\n    return Rect.FromPoints(bottomLeft, this.topRight);\n  }\n\n  public withCenter(center: IVector2): Rect {\n    return new Rect({\n      x: center.x - this.width / 2,\n      y: center.y - this.height / 2,\n      width: this.width,\n      height: this.height,\n    });\n  }\n\n  /**\n   * center is held constant\n   */\n  public withScale(props: { width?: number; height?: number }): Rect {\n    return new Rect({\n      x: this.centerX - (props.width || this.width) / 2,\n      y: this.centerY - (props.height || this.height) / 2,\n      width: props.width || this.width,\n      height: props.height || this.height,\n    });\n  }\n\n  public get topLeft(): Vector2 {\n    return new Vector2({\n      x: this.x,\n      y: this.y,\n    });\n  }\n\n  public get topRight(): Vector2 {\n    return new Vector2({\n      x: this.right,\n      y: this.y,\n    });\n  }\n\n  public get bottomRight(): Vector2 {\n    return new Vector2({\n      x: this.right,\n      y: this.bottom,\n    });\n  }\n\n  public get bottomLeft(): Vector2 {\n    return new Vector2({\n      x: this.x,\n      y: this.bottom,\n    });\n  }\n\n  constructor(props: { x: number; y: number; width: number; height: number }) {\n    this._x = props.x;\n    this._y = props.y;\n    this._width = props.width;\n    this._height = props.height;\n  }\n\n  static DeserializeRect(s: string): Rect {\n    const [x, y, w, h] = s.split(\"|\").map((x) => Number(x));\n\n    return new Rect({ x, y, width: w, height: h });\n  }\n\n  /**\n   * Return the four edges of this Rect as Lines.\n   */\n  getLinesFromRect(): Line[] {\n    return [\n      new Line({ x1: this.x, y1: this.y, x2: this.x + this.width, y2: this.y }),\n      new Line({\n        x1: this.x,\n        y1: this.y,\n        x2: this.x,\n        y2: this.y + this.height,\n      }),\n      new Line({\n        x1: this.x + this.width,\n        y1: this.y + this.height,\n        x2: this.x + this.width,\n        y2: this.y,\n      }),\n      new Line({\n        x1: this.x + this.width,\n        y1: this.y + this.height,\n        x2: this.x,\n        y2: this.y + this.height,\n      }),\n    ];\n  }\n\n  /**\n   * Return the four corners of this Rect.\n   */\n  getCorners(): Vector2[] {\n    return [\n      new Vector2({ x: this.x, y: this.y }),\n      new Vector2({ x: this.x + this.width, y: this.y }),\n      new Vector2({ x: this.x, y: this.y + this.height }),\n      new Vector2({ x: this.x + this.width, y: this.y + this.height }),\n    ];\n  }\n\n  serialize(): string {\n    return `${this.x}|${this.y}|${this.width}|${this.height}`;\n  }\n\n  // consider overlapping edges as intersection, but not overlapping corners.\n  intersects(\n    other: Rect,\n    props: { edgesOnlyIsAnIntersection: boolean } = {\n      edgesOnlyIsAnIntersection: false,\n    }\n  ): boolean {\n    const intersection = this.getIntersection(other, true);\n\n    if (props.edgesOnlyIsAnIntersection) {\n      return (\n        !!intersection && (intersection.width > 0 || intersection.height > 0)\n      );\n    } else {\n      return !!intersection && intersection.width * intersection.height > 0;\n    }\n  }\n\n  completelyContains(smaller: Rect): boolean {\n    return (\n      this.x <= smaller.x &&\n      this.x + this.width >= smaller.x + smaller.width &&\n      this.y <= smaller.y &&\n      this.y + this.height >= smaller.y + smaller.height\n    );\n  }\n\n  getIntersection(\n    other: Rect,\n    edgesOnlyIsAnIntersection = false\n  ): Rect | undefined {\n    const xmin = Math.max(this.x, other.x);\n    const xmax1 = this.x + this.width;\n    const xmax2 = other.x + other.width;\n    const xmax = Math.min(xmax1, xmax2);\n\n    if (xmax > xmin || (edgesOnlyIsAnIntersection && xmax >= xmin)) {\n      const ymin = Math.max(this.y, other.y);\n      const ymax1 = this.y + this.height;\n      const ymax2 = other.y + other.height;\n      const ymax = Math.min(ymax1, ymax2);\n\n      if (ymax >= ymin || (edgesOnlyIsAnIntersection && ymax >= ymin)) {\n        return new Rect({\n          x: xmin,\n          y: ymin,\n          width: xmax - xmin,\n          height: ymax - ymin,\n        });\n      }\n    }\n\n    return undefined;\n  }\n\n  contains(p: IVector2): boolean {\n    return (\n      p.x >= this.x &&\n      p.x < this.x + this.width &&\n      p.y >= this.y &&\n      p.y < this.y + this.height\n    );\n  }\n\n  clone(): Rect {\n    return new Rect({\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: this.height,\n    });\n  }\n\n  add(p: IVector2): Rect {\n    return this.translate(p);\n  }\n\n  subtract(p: IVector2): Rect {\n    return this.translate({ x: -p.x, y: -p.y });\n  }\n\n  translate(p: IVector2): Rect {\n    return new Rect({\n      x: this.x + p.x,\n      y: this.y + p.y,\n      width: this.width,\n      height: this.height,\n    });\n  }\n\n  scale(p: Vector2): Rect {\n    return new Rect({\n      x: this.x,\n      y: this.y,\n      width: this.width * p.x,\n      height: this.height * p.y,\n    });\n  }\n\n  centeredAtOrigin(): Rect {\n    return new Rect({\n      x: -this.width / 2,\n      y: -this.height / 2,\n      width: this.width,\n      height: this.height,\n    });\n  }\n\n  equals(o: Rect | undefined | null): boolean {\n    if (!o) {\n      return false;\n    }\n\n    return (\n      this.x === o.x &&\n      this.y === o.y &&\n      this.width === o.width &&\n      this.height === o.height\n    );\n  }\n\n  toJSON(): any {\n    return {\n      x: this.x,\n      y: this.y,\n      w: this.width,\n      h: this.height,\n      reviver: \"Rect\",\n    };\n  }\n\n  hash(): string {\n    return this.toString();\n  }\n\n  /**\n   * Adds amount to both width and height.\n   */\n  extend(amount: number): Rect {\n    return new Rect({\n      x: this.x,\n      y: this.y,\n      width: this.width + amount,\n      height: this.height + amount,\n    });\n  }\n\n  shrink(amount: number): Rect {\n    return new Rect({\n      x: this.x + amount,\n      y: this.y + amount,\n      width: Math.max(this.width - amount * 2, 0),\n      height: Math.max(this.height - amount * 2, 0),\n    });\n  }\n\n  floor(): Rect {\n    return new Rect({\n      x: Math.floor(this.x),\n      y: Math.floor(this.y),\n      width: Math.floor(this.width),\n      height: Math.floor(this.height),\n    });\n  }\n\n  /**\n   * Grow the Rect by amount in all directions.\n   */\n  expand(amount: number): Rect {\n    return this.shrink(-amount);\n  }\n\n  transform(trans: Vector2, scale: number): Rect {\n    const topLeft = this.topLeft.transform(trans, scale);\n    const botRight = this.bottomRight.transform(trans, scale);\n\n    return new Rect({\n      x: topLeft.x,\n      y: topLeft.y,\n      width: botRight.x - topLeft.x,\n      height: botRight.y - topLeft.y,\n    });\n  }\n\n  static Deserialize(obj: any): Rect {\n    if (\n      !obj.hasOwnProperty(\"x\") ||\n      !obj.hasOwnProperty(\"y\") ||\n      !obj.hasOwnProperty(\"w\") ||\n      !obj.hasOwnProperty(\"h\")\n    ) {\n      console.error(\"Failed deserializing Rect\");\n    }\n\n    return new Rect({\n      x: obj.x,\n      y: obj.y,\n      width: obj.w,\n      height: obj.h,\n    });\n  }\n\n  static Serialize(r: Rect): string {\n    return JSON.stringify({\n      x: r.x,\n      y: r.y,\n      w: r.width,\n      h: r.height,\n    });\n  }\n\n  toString(): string {\n    return `[${this.x}, ${this.y}]`;\n  }\n}\n","export class Pair<T extends { hash(): string }, U extends { hash(): string }> {\n  private _first: T;\n  private _second: U;\n\n  constructor(first: T, second: U) {\n    this._first  = first;\n    this._second = second;\n  }\n\n  hash(): string {\n    return `${ this._first.hash() }|${ this._second.hash() }`\n  }\n\n  get first() {\n    return this._first;\n  }\n\n  get second() {\n    return this._second;\n  }\n}","import * as Pixi from \"pixi.js\";\nimport { Container } from \"pixi.js\";\nimport { Pair } from \"../lib/util/data_structures/pair\";\nimport { Rect } from \"../lib/util/geometry/rect\";\nimport { IVector2, Vector2 } from \"../lib/util/geometry/vector2\";\n\nexport type RenderRectsConfig = {\n  containerHeightProportion: number;\n  aspectRatio1: number;\n  downscaleRatio12: number;\n  aspectRatio2?: number;\n  downscaleRatio23?: number;\n  aspectRatio3?: number;\n  circleSize: number;\n  circleOffColor: number;\n  circleOnColor: number;\n  circleHoverColor: number;\n  circleFillColor: number;\n  borderOffColor: number;\n  borderOnColor: number;\n  borderThickness: number;\n  centerToEdgeBorderRatio2: number;\n  centerToEdgeBorderRatio3?: number;\n  cornerCompression1?: number;\n  cornerCompression2?: number;\n  cornerCompression3?: number;\n  debugHasRectBorder: boolean;\n  debugRandomOn: boolean;\n};\n\nexport class RenderRects {\n  private config: RenderRectsConfig = {\n    containerHeightProportion: 0.9,\n    aspectRatio1: 1.6,\n    aspectRatio3: 1.6,\n    downscaleRatio12: 0.75,\n    downscaleRatio23: 0.35,\n    circleSize: 6,\n    circleOnColor: 0x030303,\n    circleOffColor: 0xcecece,\n    circleHoverColor: 0x000000,\n    circleFillColor: 0xd3d3d3,\n    borderOffColor: 0xefefef,\n    borderOnColor: 0xbcdebc,\n    borderThickness: 2,\n    centerToEdgeBorderRatio2: 1.2,\n    centerToEdgeBorderRatio3: 1.0,\n    cornerCompression1: 0.08,\n    cornerCompression2: 0.2,\n    cornerCompression3: 0.3,\n    debugHasRectBorder: false,\n    debugRandomOn: true,\n  };\n  private containerRect!: Rect;\n  private stage!: Container;\n\n  constructor(\n    stage: Container,\n    containerRect: Rect,\n    config?: RenderRectsConfig\n  ) {\n    this.stage = stage;\n    this.containerRect = containerRect;\n    this.config = Object.assign({}, this.config, config || {});\n  }\n\n  /**\n   * Draws a '=' oriented rectangle, 2 'O' oriented nested, and then 4 '=' further-nested.\n   */\n  public drawFirst() {\n    const hasBorder = this.config.debugHasRectBorder;\n    const newHeight =\n      this.containerRect.height * this.config.containerHeightProportion;\n    const newRect = this.containerRect.withScale({\n      height: newHeight,\n      width: newHeight * this.config.aspectRatio1,\n    });\n    this.drawRect(newRect, hasBorder, this.config.cornerCompression1 || 0);\n\n    const layer2 = this.nestRectPair(\n      newRect,\n      this.config.downscaleRatio12,\n      this.config.aspectRatio2 || this.config.aspectRatio1,\n      this.config.centerToEdgeBorderRatio2\n    );\n    this.drawRect(\n      layer2.first,\n      hasBorder,\n      this.config.cornerCompression2 || this.config.cornerCompression1 || 0\n    );\n    this.drawRect(\n      layer2.second,\n      hasBorder,\n      this.config.cornerCompression2 || this.config.cornerCompression1 || 0\n    );\n\n    const layer3 = new Pair(\n      this.nestRectPair(\n        layer2.first,\n        this.config.downscaleRatio23 || this.config.downscaleRatio12,\n        this.config.aspectRatio3 ||\n          this.config.aspectRatio2 ||\n          this.config.aspectRatio1,\n        this.config.centerToEdgeBorderRatio3 ||\n          this.config.centerToEdgeBorderRatio2\n      ),\n      this.nestRectPair(\n        layer2.second,\n        this.config.downscaleRatio23 || this.config.downscaleRatio12,\n        this.config.aspectRatio3 ||\n          this.config.aspectRatio2 ||\n          this.config.aspectRatio1,\n        this.config.centerToEdgeBorderRatio3 ||\n          this.config.centerToEdgeBorderRatio2\n      )\n    );\n    this.drawRect(\n      layer3.first.first,\n      hasBorder,\n      this.config.cornerCompression3 ||\n        this.config.cornerCompression2 ||\n        this.config.cornerCompression1 ||\n        0\n    );\n    this.drawRect(\n      layer3.second.first,\n      hasBorder,\n      this.config.cornerCompression3 ||\n        this.config.cornerCompression2 ||\n        this.config.cornerCompression1 ||\n        0\n    );\n    this.drawRect(\n      layer3.first.second,\n      hasBorder,\n      this.config.cornerCompression3 ||\n        this.config.cornerCompression2 ||\n        this.config.cornerCompression1 ||\n        0\n    );\n    this.drawRect(\n      layer3.second.second,\n      hasBorder,\n      this.config.cornerCompression3 ||\n        this.config.cornerCompression2 ||\n        this.config.cornerCompression1 ||\n        0\n    );\n  }\n\n  private nestRectPair(\n    original: Rect,\n    downscaleRatio: number,\n    newAspectRatio: number,\n    centerToEdgeBorderRatio: number\n  ): Pair<Rect, Rect> {\n    const longSide = Math.min(original.height, original.width) * downscaleRatio;\n    const shortSide = longSide / newAspectRatio;\n    const remaining = Math.max(original.height, original.width) - 2 * shortSide;\n    const middleGap =\n      (remaining / (2 + centerToEdgeBorderRatio)) * centerToEdgeBorderRatio;\n    const offset = middleGap / 2 + shortSide / 2;\n\n    if (original.height < original.width) {\n      const newHeight = longSide;\n      const newWidth = shortSide;\n\n      const leftCenter = new Vector2(\n        original.centerX - offset,\n        original.centerY\n      );\n      const rightCenter = new Vector2(\n        original.centerX + offset,\n        original.centerY\n      );\n      return new Pair<Rect, Rect>(\n        Rect.FromCenter({\n          center: leftCenter,\n          dimensions: new Vector2(newWidth, newHeight),\n        }),\n        Rect.FromCenter({\n          center: rightCenter,\n          dimensions: new Vector2(newWidth, newHeight),\n        })\n      );\n    } else {\n      const newHeight = shortSide;\n      const newWidth = longSide;\n\n      const topCenter = new Vector2(\n        original.centerX,\n        original.centerY - offset\n      );\n      const bottomCenter = new Vector2(\n        original.centerX,\n        original.centerY + offset\n      );\n      return new Pair<Rect, Rect>(\n        Rect.FromCenter({\n          center: topCenter,\n          dimensions: new Vector2(newWidth, newHeight),\n        }),\n        Rect.FromCenter({\n          center: bottomCenter,\n          dimensions: new Vector2(newWidth, newHeight),\n        })\n      );\n    }\n  }\n\n  private drawRect(\n    rect: Rect,\n    hasBorder: boolean,\n    cornerCompressionRatio: number\n  ) {\n    const corners = rect.withScale({\n      width:\n        rect.width -\n        (cornerCompressionRatio * (3 * rect.width + rect.height)) / 4,\n      height:\n        rect.height -\n        (cornerCompressionRatio * (rect.width + 3 * rect.height)) / 4,\n    });\n    const midpoints = {\n      left: new Vector2(rect.left, rect.centerY),\n      right: new Vector2(rect.right, rect.centerY),\n      top: new Vector2(rect.centerX, rect.top),\n      bottom: new Vector2(rect.centerX, rect.bottom),\n    };\n\n    if (hasBorder) {\n      const graphics = new Pixi.Graphics();\n      graphics.lineStyle(\n        this.config.borderThickness,\n        this.config.borderOffColor,\n        1\n      );\n      graphics.drawRect(rect.x, rect.y, rect.width, rect.height);\n      this.stage.addChild(graphics);\n    }\n    this.drawLine(corners.topLeft, midpoints.left);\n    this.drawLine(corners.topLeft, midpoints.top);\n    this.drawLine(corners.topRight, midpoints.right);\n    this.drawLine(corners.topRight, midpoints.top);\n    this.drawLine(corners.bottomLeft, midpoints.left);\n    this.drawLine(corners.bottomLeft, midpoints.bottom);\n    this.drawLine(corners.bottomRight, midpoints.right);\n    this.drawLine(corners.bottomRight, midpoints.bottom);\n\n    this.drawCorners(corners);\n    Object.values(midpoints).map((p) => this.drawCircleAt(p));\n  }\n\n  private drawCorners(rect: Rect) {\n    this.drawCircleAt(rect.topLeft);\n    this.drawCircleAt(rect.topRight);\n    this.drawCircleAt(rect.bottomLeft);\n    this.drawCircleAt(rect.bottomRight);\n  }\n\n  public drawLine(p1: IVector2, p2: IVector2) {\n    const graphics = new Pixi.Graphics();\n    // graphics.position.set(p1.x, p1.y);\n    if (this.config.debugRandomOn && Math.random() < 0.5) {\n      graphics.lineStyle(\n        this.config.borderThickness,\n        this.config.borderOnColor,\n        1\n      );\n    } else {\n      graphics.lineStyle(\n        this.config.borderThickness,\n        this.config.borderOffColor,\n        1\n      );\n    }\n    graphics.moveTo(p1.x, p1.y);\n    graphics.lineTo(p2.x, p2.y);\n    this.stage.addChild(graphics);\n  }\n\n  public drawCircleAt(point: IVector2): IVector2 {\n    const graphics = new Pixi.Graphics();\n\n    if (this.config.debugRandomOn && Math.random() < 0.5) {\n      graphics.lineStyle(1, this.config.circleOnColor, 1);\n    } else {\n      graphics.lineStyle(1, this.config.circleOffColor, 1);\n    }\n    graphics.beginFill(this.config.circleFillColor, 1);\n    graphics.drawCircle(point.x, point.y, this.config.circleSize);\n    graphics.endFill();\n    this.stage.addChild(graphics);\n    return point;\n  }\n}\n","const KeyInfo = () => ({\n  Q       : false,\n  W       : false,\n  E       : false,\n  R       : false,\n  T       : false,\n  Y       : false,\n  U       : false,\n  I       : false,\n  O       : false,\n  P       : false,\n  A       : false,\n  S       : false,\n  D       : false,\n  F       : false,\n  G       : false,\n  H       : false,\n  J       : false,\n  K       : false,\n  L       : false,\n  Z       : false,\n  X       : false,\n  C       : false,\n  V       : false,\n  B       : false,\n  N       : false,\n  M       : false,\n  Up      : false,\n  Down    : false,\n  Left    : false,\n  Right   : false,\n  Shift   : false,\n  Spacebar: false,\n  Enter   : false,\n});\n\nconst KeyInfoMap = (() => {\n  let m = KeyInfo();\n  for (let k of Object.keys(m)) {\n    m[k as keyof KeyInfoType] = true;\n  }\n  return m;\n})();\n\nexport type KeyInfoType = ReturnType<typeof KeyInfo>;\n\ninterface QueuedKeyboardEvent {\n  isDown: boolean;\n  event : KeyboardEvent;\n}\n\nexport class KeyboardState {\n  public down     = KeyInfo();\n  public justDown = KeyInfo();\n  public justUp   = KeyInfo();\n\n  private _queuedEvents: QueuedKeyboardEvent[] = [];\n\n  constructor() {\n    document.addEventListener(\"keydown\", e => this.keyDown(e), false);\n    document.addEventListener(\"keyup\"  , e => this.keyUp(e),   false);\n    window.addEventListener(\"blur\"     , () => { \n      this.clear();\n    }, false);\n  }\n\n  public clear() {\n    this.down          = KeyInfo(); \n    this.justDown      = KeyInfo(); \n    this.justUp        = KeyInfo(); \n    this._queuedEvents = [];\n  }\n\n  private keyUp(e: KeyboardEvent): void {\n    // Since events usually happen between two ticks, we queue them up to be\n    // processed on the next tick.\n\n    this._queuedEvents.push({ event: e, isDown: false });\n  }\n\n  private keyDown(e: KeyboardEvent): void {\n    this._queuedEvents.push({ event: e, isDown: true });\n  }\n\n  private formatKeyString(str: string): string {\n    if (str === \" \") {\n      return \"Spacebar\";\n    }\n\n    if (str.length === 1) {\n      return str.toUpperCase();\n    }\n    if (str.slice(0, 5) === \"Arrow\") {\n      return str.slice(5);\n    }\n\n    return str[0].toUpperCase() + str.slice(1);\n  }\n\n  private eventToKey(event: KeyboardEvent): string {\n    // prefer event.key\n    let str: string = event.key;\n    str = this.formatKeyString(str);\n    if (str) {\n      return str;\n    }\n    // use keycode or which if they are supported, and convert them to key string\n    const number = event.keyCode || event.which;\n\n    switch (number) {\n      case 13: str = \"Enter\"; break;\n      case 16: str = \"Shift\"; break;\n      case 37: str = \"Left\" ; break;\n      case 38: str = \"Up\"   ; break;\n      case 39: str = \"Right\"; break;\n      case 40: str = \"Down\" ; break;\n\n      /* A-Z */\n      default: str = String.fromCharCode(number);\n    }\n    return this.formatKeyString(str);\n  }\n\n  update(): void {\n    for (const key of Object.keys(this.justDown)) {\n      this.justDown[key as keyof KeyInfoType] = false;\n      this.justUp[key as keyof KeyInfoType] = false;\n    }\n\n    for (const queuedEvent of this._queuedEvents) {\n      const key = this.eventToKey(queuedEvent.event);\n      if (!KeyInfoMap[key as keyof KeyInfoType]) {\n        console.log(\"got unrecognized keypress: [\", key,\"]\", queuedEvent) // DEBUG\n      }\n\n      if (queuedEvent.isDown) {\n        if (!this.down[key as keyof KeyInfoType]) {\n          this.justDown[key as keyof KeyInfoType] = true;\n        }\n\n        this.down[key as keyof KeyInfoType] = true;\n      } else {\n        if (this.down[key as keyof KeyInfoType]) {\n          this.justUp[key as keyof KeyInfoType] = true;\n        }\n        \n        this.down[key as keyof KeyInfoType] = false;\n      }\n    }\n\n    this._queuedEvents = [];\n  }\n}","import * as Pixi from \"pixi.js\";\nimport { Rect } from \"../lib/util/geometry/rect\";\nimport { Vector2 } from \"../lib/util/geometry/vector2\";\nimport { RenderRects, RenderRectsConfig } from \"./RenderRects\";\nimport bunny from \"../bunny.png\";\nimport { KeyboardState } from \"../lib/pixi/keyboard\";\nimport { inflate } from \"zlib\";\n\nexport type Config = {\n  canvasWidth: number;\n  canvasHeight: number;\n};\n\nconst defaultConfig: Config = {\n  canvasWidth: 800,\n  canvasHeight: 800,\n};\n\nexport type Point = number[];\n\nexport class Application {\n  public app!: Pixi.Application;\n\n  // root container\n  public stage!: Pixi.Container;\n  // Contains HUD, and other entities that don't move when game camera moves\n  public fixedCameraStage!: Pixi.Container;\n  // Contains game entities that move when game camera pans/zooms. Highly encouraged to have further subdivions.\n  public actionStage!: Pixi.Container;\n  // Contains a few entities that doesn't move when game camera moves, but located behind action stage entities, e.g. static backgrounds\n  public backdropStage!: Pixi.Container;\n\n  public config!: Config;\n\n  public renderRects: RenderRects;\n\n  /**\n   * Need to provide config to set up the pixi canvas\n   */\n  constructor(config?: Config, app?: Pixi.Application) {\n    this.config = Object.assign({}, defaultConfig, config);\n\n    this.app =\n      app ||\n      new Pixi.Application({\n        width: this.config.canvasWidth,\n        height: this.config.canvasHeight,\n        antialias: true,\n        backgroundColor: 0xffffff,\n      });\n\n    this.renderRects = new RenderRects(\n      this.app.stage,\n      new Rect({\n        x: 0,\n        y: 0,\n        width: this.config.canvasWidth,\n        height: this.config.canvasHeight,\n      })\n    );\n\n    this.stage = this.app.stage;\n    this.stage.sortableChildren = true;\n\n    this.fixedCameraStage = new Pixi.Sprite();\n    this.fixedCameraStage.zIndex = 1;\n    this.fixedCameraStage.sortableChildren = true;\n    this.stage.addChild(this.fixedCameraStage);\n    this.actionStage = new Pixi.Sprite();\n    this.actionStage.zIndex = 0;\n    this.actionStage.sortableChildren = true;\n    this.stage.addChild(this.actionStage);\n    this.backdropStage = new Pixi.Sprite();\n    this.backdropStage.zIndex = -1;\n    this.backdropStage.sortableChildren = true;\n    this.stage.addChild(this.backdropStage);\n\n\n    const keyboard = new KeyboardState();\n    this.app.ticker.add((delta) => {\n      keyboard.update();\n      if (keyboard.down.Right) {\n        this.actionStage.x -= 10;\n      }\n      if (keyboard.down.Left) {\n        this.actionStage.x += 10;\n      }\n      if (keyboard.down.Up) {\n        this.actionStage.y += 10;\n      }\n      if (keyboard.down.Down) {\n        this.actionStage.y -= 10;\n      }\n    })\n  }\n\n  /**\n   * Please only call once!!\n   * Usage: const container = useRef<HTMLDivElement>(null); useEffect(() => { application.register(container.current!); }, []);\n   */\n  public register(curr: HTMLDivElement) {\n    curr.appendChild(this.app.view);\n  }\n\n  /**\n   * Draws a full skill tree at the default zoom level.\n   */\n  public drawAll() {\n    // get the first 3 layers' configurations\n    // render the top layer points\n    // renderLayerPoints(layer[0], { rect: null })\n    // render the next layer\n    // render the intermediate connections\n    // render the final layer\n    // render the intermediate connections\n  }\n\n  /**\n   * Used for panning/zooming.\n   */\n  public moveViewport(viewport: Rect) {}\n\n  public drawStart() {\n    // this.renderRects.drawFirst();\n    this.pixiExample();\n    \n    // add an invisible layer to the entire fixedCameraStage so we can pan and zoom\n    const clickableHud = new Pixi.Graphics();\n    this.backdropStage.addChild(clickableHud);\n    clickableHud.beginFill(0xabcdef, 1);\n    // clickableHud.alpha = 0.5;\n    clickableHud.interactive = true;\n    // clickableHud.interactiveChildren = true;\n    // clickableHud.zIndex = 31;\n    // clickableHud.buttonMode = true;\n    // clickableHud.drawRect(0, 0, this.config.canvasWidth, this.config.canvasHeight);\n    clickableHud.drawRect(-10000, -10000, 20000, 20000);\n    clickableHud.addListener('pointerupoutside', e => {\n      console.log('clickable hud', e)\n    })\n    clickableHud.addListener('pointerup', (e) => {\n      window.alert('up from clickable hud');\n      console.log('clickable hud', e)\n    })\n\n    const reticle = new Pixi.Graphics();\n    this.fixedCameraStage.addChild(reticle);\n\n    reticle.lineStyle(2, 0x999999);\n    reticle.drawCircle(this.config.canvasWidth / 2, this.config.canvasHeight / 2, 10);\n    reticle.interactive = true;\n  }\n\n  public drawCircle() {\n    this.renderRects.drawCircleAt(\n      new Vector2(\n        Math.random() * this.config.canvasWidth,\n        Math.random() * this.config.canvasHeight\n      )\n    );\n  }\n\n  public pixiExample() {\n    // Taken from  https://pixijs.io/examples/#/demos-basic/container.js\n    const container = new Pixi.Container();\n\n    this.actionStage.addChild(container);\n\n    // Create a new texture\n    const texture = Pixi.Texture.from(bunny);\n\n    window.alert(\"doing bunny stuff\")\n\n    // Create a 5x5 grid of bunnies\n    for (let i = 0; i < 25; i++) {\n      const bunny = new Pixi.Sprite(texture);\n      bunny.anchor.set(0.5);\n      bunny.x = (i % 5) * 40;\n      bunny.y = Math.floor(i / 5) * 40;\n      container.addChild(bunny);\n      bunny.interactive = true;\n      // bunny.addListener('pointerdown', () => {\n      //   window.alert('clicked bunny #' + i);\n      // });\n    }\n\n    // Move container to the center\n    container.x = this.app.screen.width / 2;\n    container.y = this.app.screen.height / 2;\n\n    // Center bunny sprite in local container coordinates\n    container.pivot.x = container.width / 2;\n    container.pivot.y = container.height / 2;\n\n    // Listen for animate update\n    this.app.ticker.add((delta) => {\n      // rotate the container!\n      // use delta to create frame-independent transform\n      container.rotation -= 0.01 * delta;\n    });\n  }\n}\n","import React, { useEffect, useRef, useState } from \"react\";\nimport \"./PixiComponent.css\";\nimport { Application } from \"../pixi/Application\";\n\n/**\n * Initialize the pixi app\n */\n// const game = new BaseGame({\n//   scale: 1,\n//   canvasWidth: 800,\n//   canvasHeight: 800,\n//   tileHeight: 16,\n//   tileWidth: 16,\n//   debugFlags: {},\n//   state: {\n//     tick: 0,\n//   },\n//   backgroundColor: 0xffffff, // TODO(bowei): fix this\n// });\nconst application = new Application();\n\nexport function PixiComponent(props: { whatever?: any }) {\n  const container = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    application.register(container.current!);\n    // container.current!.appendChild(application.app.view)\n\n    application.drawStart();\n  }, []);\n\n  return (\n    <>\n      <div ref={container} />\n      <button onClick={() => application.drawCircle()}>draw circle</button>\n      <button onClick={() => application.drawStart()}>rerender all</button>\n    </>\n  );\n}\n","import React from \"react\";\nimport \"./App.css\";\nimport { PixiComponent } from \"./components/PixiComponent\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      Hi stuff is here\n      {/* <header className=\"App-header\">\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n        <p>\n          Edit <code>src/App.tsx</code> and save to reload.\n        </p>\n        <a\n          className=\"App-link\"\n          href=\"https://reactjs.org\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Learn React\n        </a>\n  </header> */}\n      <PixiComponent />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}