(this["webpackJsonpprocgen-skill-tree"]=this["webpackJsonpprocgen-skill-tree"]||[]).push([[0],{118:function(e,t,n){e.exports=n(223)},123:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},136:function(e,t){},138:function(e,t){},149:function(e,t){},151:function(e,t){},176:function(e,t){},178:function(e,t){},179:function(e,t){},18:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));n(3),n(4),n(40);var i=Math.pow(2,32);function a(e){var t=(e+i)%i;return t=Math.imul(t,3039394381),t^=t>>>8,t+=1759714724,t^=t<<8,t=Math.imul(t,458671337),((t^=t>>>8)+i)%i}}).call(this,n(5).Buffer)},184:function(e,t){},186:function(e,t){},205:function(e,t){},217:function(e,t){},220:function(e,t){},223:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),r=n(115),o=n.n(r),s=(n(123),n(24)),h=(n(124),n(117));n(125);function c(e){var t=e.focusedNode,n=Object(i.useState)([]),r=Object(s.a)(n,2),o=r[0],c=r[1];return Object(i.useEffect)((function(){t&&null!==(null===t||void 0===t?void 0:t.chunk)&&c((function(e){return[].concat(Object(h.a)(e),[t])}))}),[t]),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"layout"},t&&t.chunk&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",null,"Current"),a.a.createElement("h3",null,"Chunk: ",t.chunk.location.x,",",t.chunk.location.y),a.a.createElement("h3",null,"X: ",t.node.x),a.a.createElement("h3",null,"Y: ",t.node.y),a.a.createElement("h2",null,"Previous"),o.slice(0,-1).map((function(e,t){var n=e.chunk,i=e.node;return a.a.createElement("div",{key:t},"Chunk (",n.location.x,",",n.location.y,") at (",i.x,",",i.y,")")})).reverse())))}n(126);var u=n(6),l=n(3),d=n(4),f=n(8),v=function(){for(var e={Q:!1,W:!1,E:!1,R:!1,T:!1,Y:!1,U:!1,I:!1,O:!1,P:!1,A:!1,S:!1,D:!1,F:!1,G:!1,H:!1,J:!1,K:!1,L:!1,Z:!1,X:!1,C:!1,V:!1,B:!1,N:!1,M:!1,Up:!1,Down:!1,Left:!1,Right:!1,">":!1,"<":!1,"+":!1,"-":!1,Shift:!1,Spacebar:!1,Enter:!1},t=0,n=Object.keys(e);t<n.length;t++){e[n[t]]=!0}return e}(),y=function(){function e(){var t=this;Object(l.a)(this,e),this.down={Q:!1,W:!1,E:!1,R:!1,T:!1,Y:!1,U:!1,I:!1,O:!1,P:!1,A:!1,S:!1,D:!1,F:!1,G:!1,H:!1,J:!1,K:!1,L:!1,Z:!1,X:!1,C:!1,V:!1,B:!1,N:!1,M:!1,Up:!1,Down:!1,Left:!1,Right:!1,">":!1,"<":!1,"+":!1,"-":!1,Shift:!1,Spacebar:!1,Enter:!1},this.justDown={Q:!1,W:!1,E:!1,R:!1,T:!1,Y:!1,U:!1,I:!1,O:!1,P:!1,A:!1,S:!1,D:!1,F:!1,G:!1,H:!1,J:!1,K:!1,L:!1,Z:!1,X:!1,C:!1,V:!1,B:!1,N:!1,M:!1,Up:!1,Down:!1,Left:!1,Right:!1,">":!1,"<":!1,"+":!1,"-":!1,Shift:!1,Spacebar:!1,Enter:!1},this.justUp={Q:!1,W:!1,E:!1,R:!1,T:!1,Y:!1,U:!1,I:!1,O:!1,P:!1,A:!1,S:!1,D:!1,F:!1,G:!1,H:!1,J:!1,K:!1,L:!1,Z:!1,X:!1,C:!1,V:!1,B:!1,N:!1,M:!1,Up:!1,Down:!1,Left:!1,Right:!1,">":!1,"<":!1,"+":!1,"-":!1,Shift:!1,Spacebar:!1,Enter:!1},this._queuedEvents=[],document.addEventListener("keydown",(function(e){return t.keyDown(e)}),!1),document.addEventListener("keyup",(function(e){return t.keyUp(e)}),!1),window.addEventListener("blur",(function(){t.clear()}),!1)}return Object(d.a)(e,[{key:"clear",value:function(){this.down={Q:!1,W:!1,E:!1,R:!1,T:!1,Y:!1,U:!1,I:!1,O:!1,P:!1,A:!1,S:!1,D:!1,F:!1,G:!1,H:!1,J:!1,K:!1,L:!1,Z:!1,X:!1,C:!1,V:!1,B:!1,N:!1,M:!1,Up:!1,Down:!1,Left:!1,Right:!1,">":!1,"<":!1,"+":!1,"-":!1,Shift:!1,Spacebar:!1,Enter:!1},this.justDown={Q:!1,W:!1,E:!1,R:!1,T:!1,Y:!1,U:!1,I:!1,O:!1,P:!1,A:!1,S:!1,D:!1,F:!1,G:!1,H:!1,J:!1,K:!1,L:!1,Z:!1,X:!1,C:!1,V:!1,B:!1,N:!1,M:!1,Up:!1,Down:!1,Left:!1,Right:!1,">":!1,"<":!1,"+":!1,"-":!1,Shift:!1,Spacebar:!1,Enter:!1},this.justUp={Q:!1,W:!1,E:!1,R:!1,T:!1,Y:!1,U:!1,I:!1,O:!1,P:!1,A:!1,S:!1,D:!1,F:!1,G:!1,H:!1,J:!1,K:!1,L:!1,Z:!1,X:!1,C:!1,V:!1,B:!1,N:!1,M:!1,Up:!1,Down:!1,Left:!1,Right:!1,">":!1,"<":!1,"+":!1,"-":!1,Shift:!1,Spacebar:!1,Enter:!1},this._queuedEvents=[]}},{key:"keyUp",value:function(e){this._queuedEvents.push({event:e,isDown:!1})}},{key:"keyDown",value:function(e){this._queuedEvents.push({event:e,isDown:!0})}},{key:"formatKeyString",value:function(e){return" "===e?"Spacebar":1===e.length?e.toUpperCase():"Arrow"===e.slice(0,5)?e.slice(5):e[0].toUpperCase()+e.slice(1)}},{key:"eventToKey",value:function(e){var t=e.key;if(t=this.formatKeyString(t))return t;var n=e.keyCode||e.which;switch(n){case 13:t="Enter";break;case 16:t="Shift";break;case 37:t="Left";break;case 38:t="Up";break;case 39:t="Right";break;case 40:t="Down";break;default:t=String.fromCharCode(n)}return this.formatKeyString(t)}},{key:"update",value:function(){for(var e=0,t=Object.keys(this.justDown);e<t.length;e++){var n=t[e];this.justDown[n]=!1,this.justUp[n]=!1}var i,a=Object(u.a)(this._queuedEvents);try{for(a.s();!(i=a.n()).done;){var r=i.value,o=this.eventToKey(r.event);v[o]||console.log("got unrecognized keypress: [",o,"]",r),r.isDown?(this.down[o]||(this.justDown[o]=!0),this.down[o]=!0):(this.down[o]&&(this.justUp[o]=!0),this.down[o]=!1)}}catch(s){a.e(s)}finally{a.f()}this._queuedEvents=[]}}]),e}(),p=function(){function e(){Object(l.a)(this,e),this.frameTimestampsInTicks=[],this.frameTimestampsInTime=[],this.frameTimestampsInTicks.push(0)}return Object(d.a)(e,[{key:"tick",value:function(e){var t=this.frameTimestampsInTicks[this.frameTimestampsInTicks.length-1];this.frameTimestampsInTicks.push(t+e),this.frameTimestampsInTicks.length>120&&(this.frameTimestampsInTicks=this.frameTimestampsInTicks.slice(60)),this.frameTimestampsInTime.push((new Date).getTime()),this.frameTimestampsInTime.length>120&&(this.frameTimestampsInTime=this.frameTimestampsInTime.slice(60))}},{key:"getUps",value:function(){var e=this.frameTimestampsInTicks[this.frameTimestampsInTicks.length-1]-this.frameTimestampsInTicks[0],t=(this.frameTimestampsInTicks.length-1)/e;return t?60*t:60}},{key:"getFps",value:function(){var e=this.frameTimestampsInTime[this.frameTimestampsInTime.length-1]-this.frameTimestampsInTime[0],t=(this.frameTimestampsInTime.length-1)/e;return t?1e3*t:60}},{key:"getFpsString",value:function(){return this.getFps().toFixed(1)}},{key:"getUpsString",value:function(){return this.getUps().toFixed(1)}}]),e}(),g=function e(t){var n=this;Object(l.a)(this,e),this.sourceContainer=void 0,this.targetContainer=void 0,this.targetStartingX=void 0,this.targetStartingY=void 0,this.mouseStartingX=void 0,this.mouseStartingY=void 0,this.data=void 0,this.isDragging=!1,this.onDragStart=function(e){n.data=e.data,n.targetStartingX=n.targetContainer.x,n.targetStartingY=n.targetContainer.y;var t=n.data.getLocalPosition(n.sourceContainer);n.mouseStartingX=t.x,n.mouseStartingY=t.y,console.log(n),n.isDragging=!0},this.onDragEnd=function(){n.isDragging=!1},this.onDragMove=function(){if(n.isDragging){var e=n.data.getLocalPosition(n.sourceContainer);n.targetContainer.x=n.targetStartingX+(e.x-n.mouseStartingX),n.targetContainer.y=n.targetStartingY+(e.y-n.mouseStartingY)}};var i=t.source,a=t.target;i.interactive=!0,this.sourceContainer=i,this.targetContainer=a,i.addListener("pointerdown",this.onDragStart),i.addListener("pointerup",this.onDragEnd),i.addListener("pointerupoutside",this.onDragEnd),i.addListener("pointermove",this.onDragMove)};var k=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,null,[{key:"MinBy",value:function(e,t){var n,i=null,a=null,r=Object(u.a)(e);try{for(r.s();!(n=r.n()).done;){var o=n.value,s=t(o);(null===a||s<a)&&(i=o,a=s)}}catch(h){r.e(h)}finally{r.f()}return i}},{key:"MinByAndValue",value:function(e,t){var n,i=null,a=null,r=Object(u.a)(e);try{for(r.s();!(n=r.n()).done;){var o=n.value,s=t(o);(null===a||s<a)&&(i=o,a=s)}}catch(h){r.e(h)}finally{r.f()}return null===i||null===a?null:{obj:i,value:a}}},{key:"MaxBy",value:function(e,t){var n,i=null,a=null,r=Object(u.a)(e);try{for(r.s();!(n=r.n()).done;){var o=n.value,s=t(o);(null===a||s>a)&&(i=o,a=s)}}catch(h){r.e(h)}finally{r.f()}return i}},{key:"RandRange",value:function(e,t){return Math.floor(Math.random()*(t-e)+e)}},{key:"SortByKey",value:function(e,t){return e.sort((function(e,n){return t(e)-t(n)}))}},{key:"ReplaceAll",value:function(e,t){var n=new RegExp(Object.keys(t).join("|"),"gi");return e.replace(n,(function(e){return t[e.toLowerCase()]}))}},{key:"Debounce",value:function(e){var t,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isImmediate:!1},r=function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];var h=function(){t=void 0,a.isImmediate||e.apply(n,o)},c=a.isImmediate&&void 0===t;void 0!==t&&clearTimeout(t),t=setTimeout(h,i),c&&e.apply(n,o)};return r}},{key:"FormatDate",value:function(e){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()];return"".concat(t," ").concat(e.getDate(),", ").concat(("00"+e.getHours()).substr(-2),":").concat(("00"+e.getMinutes()).substr(-2),":").concat(("00"+e.getSeconds()).substr(-2))}},{key:"FlattenByOne",value:function(e){var t,n=[],i=Object(u.a)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n=n.concat(a)}}catch(r){i.e(r)}finally{i.f()}return n}},{key:"PadString",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" ";return e+n+i.repeat(t-e.length)}}]),e}(),w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},n=arguments.length>1?arguments[1]:void 0;Object(l.a)(this,e),this._x=void 0,this._y=void 0,"number"===typeof t?(this._x=t,this._y=n):(this._x=t.x,this._y=t.y)}return Object(d.a)(e,[{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}}]),Object(d.a)(e,[{key:"hash",value:function(){return this.toString()}},{key:"toString",value:function(){return"[".concat(this.x,", ").concat(this.y,"]")}},{key:"invert",value:function(){return new e({x:-this.x,y:-this.y})}},{key:"round",value:function(){return new e({x:Math.round(this.x),y:Math.round(this.y)})}},{key:"floor",value:function(){return new e({x:Math.floor(this.x),y:Math.floor(this.y)})}},{key:"taxicabDistance",value:function(e){return Math.abs(e.x-this.x)+Math.abs(e.y-this.y)}},{key:"diagonalDistance",value:function(e){return Math.max(Math.abs(e.x-this.x),Math.abs(e.y-this.y))}},{key:"distance",value:function(e){var t=Math.abs(e.x-this.x),n=Math.abs(e.y-this.y);return Math.sqrt(t*t+n*n)}},{key:"translate",value:function(t){return new e({x:this.x+t.x,y:this.y+t.y})}},{key:"subtract",value:function(t){return new e({x:this.x-t.x,y:this.y-t.y})}},{key:"add",value:function(t){return new e({x:this.x+t.x,y:this.y+t.y})}},{key:"addX",value:function(t){return new e({x:this.x+t,y:this.y})}},{key:"addY",value:function(t){return new e({x:this.x,y:this.y+t})}},{key:"subtractX",value:function(t){return new e({x:this.x-t,y:this.y})}},{key:"subtractY",value:function(t){return new e({x:this.x,y:this.y-t})}},{key:"clampY",value:function(t,n){var i=this.y;return i<t&&(i=t),i>n&&(i=n),new e({x:this.x,y:i})}},{key:"scale",value:function(t,n){return new e({x:(this.x-t.x)*n.x+t.x,y:(this.y-t.y)*n.y+t.y})}},{key:"rotate",value:function(t,n){return n/=180/Math.PI,new e({x:Math.cos(n)*(this.x-t.x)-Math.sin(n)*(this.y-t.y)+t.x,y:Math.sin(n)*(this.x-t.x)+Math.cos(n)*(this.y-t.y)+t.y})}},{key:"equals",value:function(e){return void 0!==e&&(Math.abs(this.x-e.x)<1e-7&&Math.abs(this.y-e.y)<1e-7)}},{key:"multiply",value:function(t){return new e("number"===typeof t?{x:this.x*t,y:this.y*t}:{x:this.x*t.x,y:this.y*t.y})}},{key:"divide",value:function(t){return new e("number"===typeof t?{x:this.x/t,y:this.y/t}:{x:this.x/t.x,y:this.y/t.y})}},{key:"toJSON",value:function(){return{__type:"Vector2",x:this.x,y:this.y}}},{key:"transform",value:function(t,n){return new e({x:Math.floor((this.x-t.x)*n),y:Math.floor((this.y-t.y)*n)})}},{key:"normalize",value:function(){if(0===this.x&&0===this.y)return this;var t=Math.sqrt(this.x*this.x+this.y*this.y);return new e({x:this.x/t,y:this.y/t})}},{key:"withX",value:function(t){return new e({x:t,y:this.y})}},{key:"withY",value:function(t){return new e({x:this.x,y:t})}},{key:"invertX",value:function(){return new e({x:-this.x,y:this.y})}},{key:"lerp",value:function(e,t){return(t>1||t<0)&&console.error("Lerp t must be between 0 and 1."),0===t?this:1===t?e:this.scale({x:0,y:0},{x:1-t,y:1-t}).add(e.scale({x:0,y:0},{x:t,y:t}))}},{key:"lerp2D",value:function(e,t,n){return(t>1||t<0||n>1||n<0)&&console.error("Lerp t must be between 0 and 1."),this.scale({x:0,y:0},{x:1-t,y:1-n}).add(e.scale({x:0,y:0},{x:t,y:n}))}},{key:"coserp",value:function(e,t){return t=.5*(1+Math.cos(2*t*Math.PI)),this.lerp(e,t)}},{key:"half",get:function(){return new e({x:this.x/2,y:this.y/2})}}],[{key:"IsVector2",value:function(t){return t instanceof e}},{key:"Random",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new e({x:k.RandRange(i,t),y:k.RandRange(a,n)})}},{key:"Deserialize",value:function(t){return t.hasOwnProperty("x")&&t.hasOwnProperty("y")||console.error("Failed deserializing point"),new e({x:t.x,y:t.y})}},{key:"Serialize",value:function(e){return JSON.stringify({x:e.x,y:e.y})}}]),e}();w.Zero=new w(0,0),w.One=new w(1,1);var m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(l.a)(this,e),this._values=void 0,this._values=new x;var n,i=Object(u.a)(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.put(a)}}catch(r){i.e(r)}finally{i.f()}}return Object(d.a)(e,[{key:"remove",value:function(e){this._values.remove(e)}},{key:"put",value:function(e){this._values.put(e,e)}},{key:"get",value:function(e){return void 0!==this._values.get(e)}},{key:"values",value:function(){return this._values.values()}}]),e}(),x=function(){function e(){Object(l.a)(this,e),this._values={}}return Object(d.a)(e,[{key:"put",value:function(e,t){this._values[e.hash()]=t}},{key:"remove",value:function(e){delete this._values[e.hash()]}},{key:"get",value:function(e){return this._values[e.hash()]}},{key:"values",value:function(){var e=this;return Object.keys(this._values).map((function(t){return e._values[t]}))}}]),e}(),b=n(18),S=function(){function e(t,n){Object(l.a)(this,e),this.id=void 0,this.nodes=[],this.selectedNodes=new m,this.allocatedNodes=new m,this.edges=[],this.location=new w(0,0),this.location=n,this.id=Object(b.b)(t+Object(b.b)(t+this.location.x)+this.location.y);for(var i=new m,a=-e.CHUNK_HALF_DIM;a<=e.CHUNK_HALF_DIM;a++)for(var r=-e.CHUNK_HALF_DIM;r<=e.CHUNK_HALF_DIM;r++)0===a&&0===r||Object(b.b)(this.id+a*e.CHUNK_DIM+r)/b.a<e.DROP_NODES_CHANCE/4&&(i.put(new w(a,r)),i.put(new w(r,-a)),i.put(new w(-a,-r)),i.put(new w(-r,a)));for(var o=-e.CHUNK_HALF_DIM;o<=e.CHUNK_HALF_DIM;o++)for(var s=-e.CHUNK_HALF_DIM;s<=e.CHUNK_HALF_DIM;s++){var h=new w(o,s);i.get(h)||this.nodes.push(new w(o,s))}}return Object(d.a)(e,[{key:"hash",value:function(){return this.id.toString()}}]),e}();S.CHUNK_DIM=9,S.CHUNK_HALF_DIM=(S.CHUNK_DIM-1)/2,S.DROP_NODES_CHANCE=.3;var C=function(){function e(t,n){var i=this;Object(l.a)(this,e),this.chunk=void 0,this.container=void 0,this.renderedNodes=new x,this.chunk=t,this.container=new f.b;var a,r=Object(u.a)(t.nodes);try{var o=function(){var t=a.value,r=new f.c;i.renderedNodes.put(t,r),r.beginFill(16744576),0==t.x&&0==t.y&&r.beginFill(16711680),r.drawRoundedRect(t.x*e.SPACING_PX-e.NODE_SIZE_PX/2,t.y*e.SPACING_PX-e.NODE_SIZE_PX/2,e.NODE_SIZE_PX,e.NODE_SIZE_PX,e.NODE_ROUNDED_PX),r.hitArea=new f.d(t.x*e.SPACING_PX-e.NODE_HITAREA_PX/2,t.y*e.SPACING_PX-e.NODE_HITAREA_PX/2,e.NODE_HITAREA_PX,e.NODE_HITAREA_PX),r.interactive=!0,r.addListener("pointerdown",(function(){if(null===n||void 0===n||n(i.chunk,t),console.log("clicked chunk ".concat(i.chunk.location.x," ").concat(i.chunk.location.y," node ").concat(t.x,", ").concat(t.y)),0==i.chunk.selectedNodes.values().length)i.chunk.selectedNodes.put(t),r.tint=12303291;else if(i.chunk.selectedNodes.get(t)){i.chunk.selectedNodes.remove(t);for(var e=!1,a=0,o=[t.addX(1),t.addY(1),t.addY(-1),t.addX(-1)];a<o.length;a++){var s=o[a];if(i.chunk.allocatedNodes.get(s)){e=!0;break}}e?(i.chunk.allocatedNodes.put(t),r.tint=43775):(r.tint=16777215,window.alert("not allowed to allocate that one!"))}else{var h,c=Object(u.a)(i.chunk.selectedNodes.values());try{for(c.s();!(h=c.n()).done;){var l=h.value;i.renderedNodes.get(l).tint=16777215,i.chunk.selectedNodes.remove(l)}}catch(d){c.e(d)}finally{c.f()}i.chunk.selectedNodes.put(t),r.tint=12303291}})),i.container.addChild(r)};for(r.s();!(a=r.n()).done;)o()}catch(s){r.e(s)}finally{r.f()}this.container.x=this.chunk.location.x*e.CHUNK_SPACING_PX,this.container.y=this.chunk.location.y*e.CHUNK_SPACING_PX}return Object(d.a)(e,[{key:"hash",value:function(){return this.chunk.hash()}}]),e}();C.SPACING_PX=24,C.CHUNK_SPACING_PX=(S.CHUNK_DIM+.5)*C.SPACING_PX,C.NODE_SIZE_PX=14,C.NODE_HITAREA_PX=18,C.NODE_ROUNDED_PX=4;var _=function e(t,n){Object(l.a)(this,e),this.id=void 0,this.z=void 0,this.chunks=[],this.z=n,this.id=Object(b.b)(t+this.z);for(var i=-3;i<=3;i++)for(var a=-3;a<=3;a++)this.chunks.push(new S(this.id,new w(i,a)))},O=function e(t,n){Object(l.a)(this,e),this.zLevel=void 0,this.container=void 0,this.renderedChunks=new x,this.zLevel=t,this.container=new f.b;var i,a=Object(u.a)(this.zLevel.chunks);try{for(a.s();!(i=a.n()).done;){var r=i.value,o=new C(r,n);this.renderedChunks.put(r,o),this.container.addChild(o.container)}}catch(s){a.e(s)}finally{a.f()}},D={originalWindowWidth:800,originalWindowHeight:800,onFocusedNodeChange:function(){}},N=function(){function e(t,n){var i=this;Object(l.a)(this,e),this.app=void 0,this.stage=void 0,this.fixedCameraStage=void 0,this.actionStage=void 0,this.backdropStage=void 0,this.keyboard=void 0,this.config=void 0,this.fpsTracker=void 0,this.onResize=[],this.originalAppWidth=1280,this.originalAppHeight=720,this.randomSeed=void 0,this.config=Object.assign({},D,t),this.randomSeed=3405691582,this.originalAppWidth=Math.min(1280,this.config.originalWindowWidth-8),this.originalAppHeight=Math.min(720,this.config.originalWindowHeight-8),this.app=n||new f.a({width:this.originalAppWidth,height:this.originalAppHeight,antialias:!0,transparent:!0,resolution:window.devicePixelRatio||1,autoDensity:!0,powerPreference:"low-power",backgroundColor:16777215}),this.stage=this.app.stage,this.stage.sortableChildren=!0,this.fixedCameraStage=new f.e,this.fixedCameraStage.zIndex=1,this.fixedCameraStage.sortableChildren=!0,this.stage.addChild(this.fixedCameraStage),this.actionStage=new f.e,this.actionStage.zIndex=0,this.actionStage.sortableChildren=!0,this.stage.addChild(this.actionStage),this.backdropStage=new f.e,this.backdropStage.zIndex=-1,this.backdropStage.sortableChildren=!0,this.stage.addChild(this.backdropStage),this.keyboard=new y,this.app.ticker.add((function(){i.keyboard.update()})),this.fpsTracker=new p,this.app.ticker.add((function(e){i.fpsTracker.tick(e)})),this.resize(this.config.originalWindowWidth,this.config.originalWindowHeight)}return Object(d.a)(e,[{key:"register",value:function(e){e.appendChild(this.app.view)}},{key:"resize",value:function(e,t){this.app.renderer.resize(Math.min(1280,e-8),Math.min(720,t-8)),this.actionStage.pivot.x=-.5*(this.app.screen.width-this.originalAppWidth),this.actionStage.pivot.y=-.5*(this.app.screen.height-this.originalAppHeight),this.onResize.map((function(e){return e()}))}},{key:"drawStart",value:function(){var e,t=this,n=new f.f("",{fontFamily:"PixelMix",fontSize:12});this.app.ticker.add((function(){n.text=t.fpsTracker.getFpsString()+" FPS\n"+t.fpsTracker.getUpsString()+" UPS\n"+t.app.screen.width+"x"+t.app.screen.height})),n.x=this.app.screen.width,this.onResize.push((function(){n.x=t.app.screen.width})),n.y=0,n.anchor.x=1,this.fixedCameraStage.addChild(n),e={source:this.backdropStage,target:this.actionStage},new g(e);var i=new f.c;this.backdropStage.addChild(i),i.beginFill(11259375,1),i.interactive=!0,i.drawRect(0,0,this.app.screen.width,this.app.screen.height),this.onResize.push((function(){i.width=t.app.screen.width,i.height=t.app.screen.height})),this.app.ticker.add((function(e){t.keyboard.down.Right&&(t.actionStage.x-=10*e),t.keyboard.down.Left&&(t.actionStage.x+=10*e),t.keyboard.down.Up&&(t.actionStage.y+=10*e),t.keyboard.down.Down&&(t.actionStage.y-=10*e)}));var a=new f.c;a.lineStyle(2,10066329),a.drawCircle(0,0,6),a.x=this.app.screen.width/2,a.y=this.app.screen.height/2,this.onResize.push((function(){a.x=t.app.screen.width/2,a.y=t.app.screen.height/2})),a.interactive=!0,this.fixedCameraStage.addChild(a);var r,o=new O(new _(this.randomSeed,0),this.config.onFocusedNodeChange),s=Object(u.a)(o.zLevel.chunks);try{for(s.s();!(r=s.n()).done;){var h=r.value;0===h.location.x&&0===h.location.y&&(h.allocatedNodes.put(new w(0,0)),o.renderedChunks.get(h).renderedNodes.get(new w(0,0)).tint=43775)}}catch(v){s.e(v)}finally{s.f()}var c=o.container;this.actionStage.addChild(c),c.x=this.app.screen.width/2,c.y=this.app.screen.height/2,this.onResize.push((function(){c.x=t.app.screen.width/2,c.y=t.app.screen.height/2}));var l=c.width,d=c.height;this.app.ticker.add((function(e){(t.keyboard.justUp[">"]||t.keyboard.justUp["<"])&&(c.alpha=1,c.width=l,c.height=d),t.keyboard.down[">"]&&(c.alpha-=.1,c.width*=1.03,c.height*=1.03,c.alpha<=0&&(c.alpha=1,i.tint=14527197,t.actionStage.removeChild(c),setTimeout((function(){o=new O(new _(t.randomSeed,o.zLevel.z-1),t.config.onFocusedNodeChange),c=o.container,t.actionStage.addChild(c),c.x=t.app.screen.width/2,c.y=t.app.screen.height/2,i.tint=16777215})))),t.keyboard.down["<"]&&(c.alpha-=.1,c.width*=1/1.03,c.height*=1/1.03,c.alpha<=0&&(c.alpha=1,i.tint=14527197,t.actionStage.removeChild(c),setTimeout((function(){o=new O(new _(t.randomSeed,o.zLevel.z+1),t.config.onFocusedNodeChange),c=o.container,t.actionStage.addChild(c),c.x=t.app.screen.width/2,c.y=t.app.screen.height/2,i.tint=16777215}))))}))}}]),e}();function E(e){var t=e.onFocusedNodeChange,n=Object(i.useRef)(null),r=Object(i.useState)(),o=Object(s.a)(r,2),h=o[0],c=o[1];function u(){var e=new N({originalWindowWidth:window.innerWidth,originalWindowHeight:window.innerHeight,onFocusedNodeChange:t});n.current.appendChild(e.app.view),e.drawStart(),c(e)}return Object(i.useEffect)((function(){return u()}),[]),window.onresize=function(){var e;null===h||void 0===h||null===(e=h.resize)||void 0===e||e.call(h,window.innerWidth,window.innerHeight)},a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{ref:n}),a.a.createElement("button",{onClick:function(){}},"draw circle"),a.a.createElement("button",{onClick:function(){var e;n.current.removeChild(null===h||void 0===h||null===(e=h.app)||void 0===e?void 0:e.view),u()}},"[DEBUG] reset and rerender"))}var I=a.a.createContext({}),j=a.a.createContext({});var M=function(){var e=Object(i.useState)(),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(i.useMemo)((function(){return{focusedNode:n}}),[n]),h=Object(i.useMemo)((function(){return{}}),[]),u=Object(i.useCallback)((function(e,t){r({chunk:e,node:t})}),[r]);return a.a.createElement("div",{className:"App"},a.a.createElement(I.Provider,{value:h},a.a.createElement(j.Provider,{value:o},a.a.createElement(E,{onFocusedNodeChange:u}),a.a.createElement(c,{focusedNode:n}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[118,1,2]]]);
//# sourceMappingURL=main.0cbe5e9c.chunk.js.map